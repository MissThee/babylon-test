import{S as F,E as C,A as B,R as K}from"./arrayTools.49279cc5.js";import{E as mt,P as X}from"./performanceConfigurator.ee04355d.js";var D=function(o){return parseInt(o.toString().replace(/\W/g,""))},ot=function(){function o(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this.x=t,this.y=r}return o.prototype.toString=function(){return"{X: ".concat(this.x," Y: ").concat(this.y,"}")},o.prototype.getClassName=function(){return"Vector2"},o.prototype.getHashCode=function(){var t=D(this.x),r=D(this.y),n=t;return n=n*397^r,n},o.prototype.toArray=function(t,r){return r===void 0&&(r=0),t[r]=this.x,t[r+1]=this.y,this},o.prototype.fromArray=function(t,r){return r===void 0&&(r=0),o.FromArrayToRef(t,r,this),this},o.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},o.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},o.prototype.copyFromFloats=function(t,r){return this.x=t,this.y=r,this},o.prototype.set=function(t,r){return this.copyFromFloats(t,r)},o.prototype.add=function(t){return new o(this.x+t.x,this.y+t.y)},o.prototype.addToRef=function(t,r){return r.x=this.x+t.x,r.y=this.y+t.y,this},o.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this},o.prototype.addVector3=function(t){return new o(this.x+t.x,this.y+t.y)},o.prototype.subtract=function(t){return new o(this.x-t.x,this.y-t.y)},o.prototype.subtractToRef=function(t,r){return r.x=this.x-t.x,r.y=this.y-t.y,this},o.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this},o.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this},o.prototype.multiply=function(t){return new o(this.x*t.x,this.y*t.y)},o.prototype.multiplyToRef=function(t,r){return r.x=this.x*t.x,r.y=this.y*t.y,this},o.prototype.multiplyByFloats=function(t,r){return new o(this.x*t,this.y*r)},o.prototype.divide=function(t){return new o(this.x/t.x,this.y/t.y)},o.prototype.divideToRef=function(t,r){return r.x=this.x/t.x,r.y=this.y/t.y,this},o.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},o.prototype.negate=function(){return new o(-this.x,-this.y)},o.prototype.negateInPlace=function(){return this.x*=-1,this.y*=-1,this},o.prototype.negateToRef=function(t){return t.copyFromFloats(this.x*-1,this.y*-1)},o.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this},o.prototype.scale=function(t){var r=new o(0,0);return this.scaleToRef(t,r),r},o.prototype.scaleToRef=function(t,r){return r.x=this.x*t,r.y=this.y*t,this},o.prototype.scaleAndAddToRef=function(t,r){return r.x+=this.x*t,r.y+=this.y*t,this},o.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y},o.prototype.equalsWithEpsilon=function(t,r){return r===void 0&&(r=C),t&&F.WithinEpsilon(this.x,t.x,r)&&F.WithinEpsilon(this.y,t.y,r)},o.prototype.floor=function(){return new o(Math.floor(this.x),Math.floor(this.y))},o.prototype.fract=function(){return new o(this.x-Math.floor(this.x),this.y-Math.floor(this.y))},o.prototype.rotateToRef=function(t,r){var n=Math.cos(t),i=Math.sin(t);return r.x=n*this.x-i*this.y,r.y=i*this.x+n*this.y,this},o.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},o.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},o.prototype.normalize=function(){return o.NormalizeToRef(this,this),this},o.prototype.clone=function(){return new o(this.x,this.y)},o.Zero=function(){return new o(0,0)},o.One=function(){return new o(1,1)},o.FromArray=function(t,r){return r===void 0&&(r=0),new o(t[r],t[r+1])},o.FromArrayToRef=function(t,r,n){n.x=t[r],n.y=t[r+1]},o.CatmullRom=function(t,r,n,i,e){var a=e*e,s=e*a,y=.5*(2*r.x+(-t.x+n.x)*e+(2*t.x-5*r.x+4*n.x-i.x)*a+(-t.x+3*r.x-3*n.x+i.x)*s),f=.5*(2*r.y+(-t.y+n.y)*e+(2*t.y-5*r.y+4*n.y-i.y)*a+(-t.y+3*r.y-3*n.y+i.y)*s);return new o(y,f)},o.Clamp=function(t,r,n){var i=t.x;i=i>n.x?n.x:i,i=i<r.x?r.x:i;var e=t.y;return e=e>n.y?n.y:e,e=e<r.y?r.y:e,new o(i,e)},o.Hermite=function(t,r,n,i,e){var a=e*e,s=e*a,y=2*s-3*a+1,f=-2*s+3*a,h=s-2*a+e,u=s-a,_=t.x*y+n.x*f+r.x*h+i.x*u,x=t.y*y+n.y*f+r.y*h+i.y*u;return new o(_,x)},o.Hermite1stDerivative=function(t,r,n,i,e){var a=o.Zero();return this.Hermite1stDerivativeToRef(t,r,n,i,e,a),a},o.Hermite1stDerivativeToRef=function(t,r,n,i,e,a){var s=e*e;a.x=(s-e)*6*t.x+(3*s-4*e+1)*r.x+(-s+e)*6*n.x+(3*s-2*e)*i.x,a.y=(s-e)*6*t.y+(3*s-4*e+1)*r.y+(-s+e)*6*n.y+(3*s-2*e)*i.y},o.Lerp=function(t,r,n){var i=t.x+(r.x-t.x)*n,e=t.y+(r.y-t.y)*n;return new o(i,e)},o.Dot=function(t,r){return t.x*r.x+t.y*r.y},o.Normalize=function(t){var r=o.Zero();return this.NormalizeToRef(t,r),r},o.NormalizeToRef=function(t,r){var n=t.length();n!==0&&(r.x=t.x/n,r.y=t.y/n)},o.Minimize=function(t,r){var n=t.x<r.x?t.x:r.x,i=t.y<r.y?t.y:r.y;return new o(n,i)},o.Maximize=function(t,r){var n=t.x>r.x?t.x:r.x,i=t.y>r.y?t.y:r.y;return new o(n,i)},o.Transform=function(t,r){var n=o.Zero();return o.TransformToRef(t,r,n),n},o.TransformToRef=function(t,r,n){var i=r.m,e=t.x*i[0]+t.y*i[4]+i[12],a=t.x*i[1]+t.y*i[5]+i[13];n.x=e,n.y=a},o.PointInTriangle=function(t,r,n,i){var e=.5*(-n.y*i.x+r.y*(-n.x+i.x)+r.x*(n.y-i.y)+n.x*i.y),a=e<0?-1:1,s=(r.y*i.x-r.x*i.y+(i.y-r.y)*t.x+(r.x-i.x)*t.y)*a,y=(r.x*n.y-r.y*n.x+(r.y-n.y)*t.x+(n.x-r.x)*t.y)*a;return s>0&&y>0&&s+y<2*e*a},o.Distance=function(t,r){return Math.sqrt(o.DistanceSquared(t,r))},o.DistanceSquared=function(t,r){var n=t.x-r.x,i=t.y-r.y;return n*n+i*i},o.Center=function(t,r){return o.CenterToRef(t,r,o.Zero())},o.CenterToRef=function(t,r,n){return n.copyFromFloats((t.x+r.x)/2,(t.y+r.y)/2)},o.DistanceOfPointFromSegment=function(t,r,n){var i=o.DistanceSquared(r,n);if(i===0)return o.Distance(t,r);var e=n.subtract(r),a=Math.max(0,Math.min(1,o.Dot(t.subtract(r),e)/i)),s=r.add(e.multiplyByFloats(a,a));return o.Distance(t,s)},o}(),T=function(){function o(t,r,n){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),this._isDirty=!0,this._x=t,this._y=r,this._z=n}return Object.defineProperty(o.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t,this._isDirty=!0},enumerable:!1,configurable:!0}),o.prototype.toString=function(){return"{X: ".concat(this._x," Y: ").concat(this._y," Z: ").concat(this._z,"}")},o.prototype.getClassName=function(){return"Vector3"},o.prototype.getHashCode=function(){var t=D(this._x),r=D(this._y),n=D(this._z),i=t;return i=i*397^r,i=i*397^n,i},o.prototype.asArray=function(){var t=[];return this.toArray(t,0),t},o.prototype.toArray=function(t,r){return r===void 0&&(r=0),t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,this},o.prototype.fromArray=function(t,r){return r===void 0&&(r=0),o.FromArrayToRef(t,r,this),this},o.prototype.toQuaternion=function(){return Q.RotationYawPitchRoll(this._y,this._x,this._z)},o.prototype.addInPlace=function(t){return this.addInPlaceFromFloats(t._x,t._y,t._z)},o.prototype.addInPlaceFromFloats=function(t,r,n){return this.x+=t,this.y+=r,this.z+=n,this},o.prototype.add=function(t){return new o(this._x+t._x,this._y+t._y,this._z+t._z)},o.prototype.addToRef=function(t,r){return r.copyFromFloats(this._x+t._x,this._y+t._y,this._z+t._z)},o.prototype.subtractInPlace=function(t){return this.x-=t._x,this.y-=t._y,this.z-=t._z,this},o.prototype.subtract=function(t){return new o(this._x-t._x,this._y-t._y,this._z-t._z)},o.prototype.subtractToRef=function(t,r){return this.subtractFromFloatsToRef(t._x,t._y,t._z,r)},o.prototype.subtractFromFloats=function(t,r,n){return new o(this._x-t,this._y-r,this._z-n)},o.prototype.subtractFromFloatsToRef=function(t,r,n,i){return i.copyFromFloats(this._x-t,this._y-r,this._z-n)},o.prototype.negate=function(){return new o(-this._x,-this._y,-this._z)},o.prototype.negateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},o.prototype.negateToRef=function(t){return t.copyFromFloats(this._x*-1,this._y*-1,this._z*-1)},o.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this},o.prototype.scale=function(t){return new o(this._x*t,this._y*t,this._z*t)},o.prototype.scaleToRef=function(t,r){return r.copyFromFloats(this._x*t,this._y*t,this._z*t)},o.prototype.applyRotationQuaternionToRef=function(t,r){var n=t.w*this.x+t.y*this.z-t.z*this.y,i=t.w*this.y+t.z*this.x-t.x*this.z,e=t.w*this.z+t.x*this.y-t.y*this.x,a=-t.x*this.x-t.y*this.y-t.z*this.z;return r.x=n*t.w+a*-t.x+i*-t.z-e*-t.y,r.y=i*t.w+a*-t.y+e*-t.x-n*-t.z,r.z=e*t.w+a*-t.z+n*-t.y-i*-t.x,r},o.prototype.applyRotationQuaternionInPlace=function(t){return this.applyRotationQuaternionToRef(t,this)},o.prototype.applyRotationQuaternion=function(t){return this.applyRotationQuaternionToRef(t,o.Zero())},o.prototype.scaleAndAddToRef=function(t,r){return r.addInPlaceFromFloats(this._x*t,this._y*t,this._z*t)},o.prototype.projectOnPlane=function(t,r){var n=o.Zero();return this.projectOnPlaneToRef(t,r,n),n},o.prototype.projectOnPlaneToRef=function(t,r,n){var i=t.normal,e=t.d,a=c.Vector3[0];this.subtractToRef(r,a),a.normalize();var s=o.Dot(a,i);if(Math.abs(s)<Math.pow(10,-10))r.addToRef(new o(1/0,1/0,1/0),n);else{var y=-(o.Dot(r,i)+e)/s,f=a.scaleInPlace(y);r.addToRef(f,n)}},o.prototype.equals=function(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z},o.prototype.equalsWithEpsilon=function(t,r){return r===void 0&&(r=C),t&&F.WithinEpsilon(this._x,t._x,r)&&F.WithinEpsilon(this._y,t._y,r)&&F.WithinEpsilon(this._z,t._z,r)},o.prototype.equalsToFloats=function(t,r,n){return this._x===t&&this._y===r&&this._z===n},o.prototype.multiplyInPlace=function(t){return this.x*=t._x,this.y*=t._y,this.z*=t._z,this},o.prototype.multiply=function(t){return this.multiplyByFloats(t._x,t._y,t._z)},o.prototype.multiplyToRef=function(t,r){return r.copyFromFloats(this._x*t._x,this._y*t._y,this._z*t._z)},o.prototype.multiplyByFloats=function(t,r,n){return new o(this._x*t,this._y*r,this._z*n)},o.prototype.divide=function(t){return new o(this._x/t._x,this._y/t._y,this._z/t._z)},o.prototype.divideToRef=function(t,r){return r.copyFromFloats(this._x/t._x,this._y/t._y,this._z/t._z)},o.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},o.prototype.minimizeInPlace=function(t){return this.minimizeInPlaceFromFloats(t._x,t._y,t._z)},o.prototype.maximizeInPlace=function(t){return this.maximizeInPlaceFromFloats(t._x,t._y,t._z)},o.prototype.minimizeInPlaceFromFloats=function(t,r,n){return t<this._x&&(this.x=t),r<this._y&&(this.y=r),n<this._z&&(this.z=n),this},o.prototype.maximizeInPlaceFromFloats=function(t,r,n){return t>this._x&&(this.x=t),r>this._y&&(this.y=r),n>this._z&&(this.z=n),this},o.prototype.isNonUniformWithinEpsilon=function(t){var r=Math.abs(this._x),n=Math.abs(this._y);if(!F.WithinEpsilon(r,n,t))return!0;var i=Math.abs(this._z);return!F.WithinEpsilon(r,i,t)||!F.WithinEpsilon(n,i,t)},Object.defineProperty(o.prototype,"isNonUniform",{get:function(){var t=Math.abs(this._x),r=Math.abs(this._y);if(t!==r)return!0;var n=Math.abs(this._z);return t!==n},enumerable:!1,configurable:!0}),o.prototype.floor=function(){return new o(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z))},o.prototype.fract=function(){return new o(this._x-Math.floor(this._x),this._y-Math.floor(this._y),this._z-Math.floor(this._z))},o.prototype.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)},o.prototype.lengthSquared=function(){return this._x*this._x+this._y*this._y+this._z*this._z},Object.defineProperty(o.prototype,"hasAZeroComponent",{get:function(){return this._x*this._y*this._z===0},enumerable:!1,configurable:!0}),o.prototype.normalize=function(){return this.normalizeFromLength(this.length())},o.prototype.reorderInPlace=function(t){var r=this;return t=t.toLowerCase(),t==="xyz"?this:(c.Vector3[0].copyFrom(this),["x","y","z"].forEach(function(n,i){r[n]=c.Vector3[0][t[i]]}),this)},o.prototype.rotateByQuaternionToRef=function(t,r){return t.toRotationMatrix(c.Matrix[0]),o.TransformCoordinatesToRef(this,c.Matrix[0],r),r},o.prototype.rotateByQuaternionAroundPointToRef=function(t,r,n){return this.subtractToRef(r,c.Vector3[0]),c.Vector3[0].rotateByQuaternionToRef(t,c.Vector3[0]),r.addToRef(c.Vector3[0],n),n},o.prototype.cross=function(t){return o.Cross(this,t)},o.prototype.normalizeFromLength=function(t){return t===0||t===1?this:this.scaleInPlace(1/t)},o.prototype.normalizeToNew=function(){var t=new o(0,0,0);return this.normalizeToRef(t),t},o.prototype.normalizeToRef=function(t){var r=this.length();return r===0||r===1?t.copyFromFloats(this._x,this._y,this._z):this.scaleToRef(1/r,t)},o.prototype.clone=function(){return new o(this._x,this._y,this._z)},o.prototype.copyFrom=function(t){return this.copyFromFloats(t._x,t._y,t._z)},o.prototype.copyFromFloats=function(t,r,n){return this.x=t,this.y=r,this.z=n,this},o.prototype.set=function(t,r,n){return this.copyFromFloats(t,r,n)},o.prototype.setAll=function(t){return this.x=this.y=this.z=t,this},o.GetClipFactor=function(t,r,n,i){var e=o.Dot(t,n)-i,a=o.Dot(r,n)-i,s=e/(e-a);return s},o.GetAngleBetweenVectors=function(t,r,n){var i=t.normalizeToRef(c.Vector3[1]),e=r.normalizeToRef(c.Vector3[2]),a=o.Dot(i,e);a=F.Clamp(a,-1,1);var s=Math.acos(a),y=c.Vector3[3];return o.CrossToRef(i,e,y),o.Dot(y,n)>0?isNaN(s)?0:s:isNaN(s)?-Math.PI:-Math.acos(a)},o.GetAngleBetweenVectorsOnPlane=function(t,r,n){c.Vector3[0].copyFrom(t);var i=c.Vector3[0];c.Vector3[1].copyFrom(r);var e=c.Vector3[1];c.Vector3[2].copyFrom(n);var a=c.Vector3[2],s=c.Vector3[3],y=c.Vector3[4];i.normalize(),e.normalize(),a.normalize(),o.CrossToRef(a,i,s),o.CrossToRef(s,a,y);var f=Math.atan2(o.Dot(e,s),o.Dot(e,y));return F.NormalizeRadians(f)},o.SlerpToRef=function(t,r,n,i){n=F.Clamp(n,0,1);var e=c.Vector3[0],a=c.Vector3[1];e.copyFrom(t);var s=e.length();e.normalizeFromLength(s),a.copyFrom(r);var y=a.length();a.normalizeFromLength(y);var f=o.Dot(e,a),h,u;if(f<1-C){var _=Math.acos(f),x=1/Math.sin(_);h=Math.sin((1-n)*_)*x,u=Math.sin(n*_)*x}else h=1-n,u=n;e.scaleInPlace(h),a.scaleInPlace(u),i.copyFrom(e).addInPlace(a),i.scaleInPlace(F.Lerp(s,y,n))},o.SmoothToRef=function(t,r,n,i,e){o.SlerpToRef(t,r,i===0?1:n/i,e)},o.FromArray=function(t,r){return r===void 0&&(r=0),new o(t[r],t[r+1],t[r+2])},o.FromFloatArray=function(t,r){return o.FromArray(t,r)},o.FromArrayToRef=function(t,r,n){n.x=t[r],n.y=t[r+1],n.z=t[r+2]},o.FromFloatArrayToRef=function(t,r,n){return o.FromArrayToRef(t,r,n)},o.FromFloatsToRef=function(t,r,n,i){i.copyFromFloats(t,r,n)},o.Zero=function(){return new o(0,0,0)},o.One=function(){return new o(1,1,1)},o.Up=function(){return new o(0,1,0)},Object.defineProperty(o,"UpReadOnly",{get:function(){return o._UpReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(o,"RightReadOnly",{get:function(){return o._RightReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(o,"LeftReadOnly",{get:function(){return o._LeftReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(o,"LeftHandedForwardReadOnly",{get:function(){return o._LeftHandedForwardReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(o,"RightHandedForwardReadOnly",{get:function(){return o._RightHandedForwardReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(o,"ZeroReadOnly",{get:function(){return o._ZeroReadOnly},enumerable:!1,configurable:!0}),o.Down=function(){return new o(0,-1,0)},o.Forward=function(t){return t===void 0&&(t=!1),new o(0,0,t?-1:1)},o.Backward=function(t){return t===void 0&&(t=!1),new o(0,0,t?1:-1)},o.Right=function(){return new o(1,0,0)},o.Left=function(){return new o(-1,0,0)},o.TransformCoordinates=function(t,r){var n=o.Zero();return o.TransformCoordinatesToRef(t,r,n),n},o.TransformCoordinatesToRef=function(t,r,n){o.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,r,n)},o.TransformCoordinatesFromFloatsToRef=function(t,r,n,i,e){var a=i.m,s=t*a[0]+r*a[4]+n*a[8]+a[12],y=t*a[1]+r*a[5]+n*a[9]+a[13],f=t*a[2]+r*a[6]+n*a[10]+a[14],h=1/(t*a[3]+r*a[7]+n*a[11]+a[15]);e.x=s*h,e.y=y*h,e.z=f*h},o.TransformNormal=function(t,r){var n=o.Zero();return o.TransformNormalToRef(t,r,n),n},o.TransformNormalToRef=function(t,r,n){this.TransformNormalFromFloatsToRef(t._x,t._y,t._z,r,n)},o.TransformNormalFromFloatsToRef=function(t,r,n,i,e){var a=i.m;e.x=t*a[0]+r*a[4]+n*a[8],e.y=t*a[1]+r*a[5]+n*a[9],e.z=t*a[2]+r*a[6]+n*a[10]},o.CatmullRom=function(t,r,n,i,e){var a=e*e,s=e*a,y=.5*(2*r._x+(-t._x+n._x)*e+(2*t._x-5*r._x+4*n._x-i._x)*a+(-t._x+3*r._x-3*n._x+i._x)*s),f=.5*(2*r._y+(-t._y+n._y)*e+(2*t._y-5*r._y+4*n._y-i._y)*a+(-t._y+3*r._y-3*n._y+i._y)*s),h=.5*(2*r._z+(-t._z+n._z)*e+(2*t._z-5*r._z+4*n._z-i._z)*a+(-t._z+3*r._z-3*n._z+i._z)*s);return new o(y,f,h)},o.Clamp=function(t,r,n){var i=new o;return o.ClampToRef(t,r,n,i),i},o.ClampToRef=function(t,r,n,i){var e=t._x;e=e>n._x?n._x:e,e=e<r._x?r._x:e;var a=t._y;a=a>n._y?n._y:a,a=a<r._y?r._y:a;var s=t._z;s=s>n._z?n._z:s,s=s<r._z?r._z:s,i.copyFromFloats(e,a,s)},o.CheckExtends=function(t,r,n){r.minimizeInPlace(t),n.maximizeInPlace(t)},o.Hermite=function(t,r,n,i,e){var a=e*e,s=e*a,y=2*s-3*a+1,f=-2*s+3*a,h=s-2*a+e,u=s-a,_=t._x*y+n._x*f+r._x*h+i._x*u,x=t._y*y+n._y*f+r._y*h+i._y*u,p=t._z*y+n._z*f+r._z*h+i._z*u;return new o(_,x,p)},o.Hermite1stDerivative=function(t,r,n,i,e){var a=o.Zero();return this.Hermite1stDerivativeToRef(t,r,n,i,e,a),a},o.Hermite1stDerivativeToRef=function(t,r,n,i,e,a){var s=e*e;a.x=(s-e)*6*t.x+(3*s-4*e+1)*r.x+(-s+e)*6*n.x+(3*s-2*e)*i.x,a.y=(s-e)*6*t.y+(3*s-4*e+1)*r.y+(-s+e)*6*n.y+(3*s-2*e)*i.y,a.z=(s-e)*6*t.z+(3*s-4*e+1)*r.z+(-s+e)*6*n.z+(3*s-2*e)*i.z},o.Lerp=function(t,r,n){var i=new o(0,0,0);return o.LerpToRef(t,r,n,i),i},o.LerpToRef=function(t,r,n,i){i.x=t._x+(r._x-t._x)*n,i.y=t._y+(r._y-t._y)*n,i.z=t._z+(r._z-t._z)*n},o.Dot=function(t,r){return t._x*r._x+t._y*r._y+t._z*r._z},o.Cross=function(t,r){var n=o.Zero();return o.CrossToRef(t,r,n),n},o.CrossToRef=function(t,r,n){var i=t._y*r._z-t._z*r._y,e=t._z*r._x-t._x*r._z,a=t._x*r._y-t._y*r._x;n.copyFromFloats(i,e,a)},o.Normalize=function(t){var r=o.Zero();return o.NormalizeToRef(t,r),r},o.NormalizeToRef=function(t,r){t.normalizeToRef(r)},o.Project=function(t,r,n,i){var e=new o;return o.ProjectToRef(t,r,n,i,e),e},o.ProjectToRef=function(t,r,n,i,e){var a=i.width,s=i.height,y=i.x,f=i.y,h=c.Matrix[1];E.FromValuesToRef(a/2,0,0,0,0,-s/2,0,0,0,0,.5,0,y+a/2,s/2+f,.5,1,h);var u=c.Matrix[0];return r.multiplyToRef(n,u),u.multiplyToRef(h,u),o.TransformCoordinatesToRef(t,u,e),e},o._UnprojectFromInvertedMatrixToRef=function(t,r,n){o.TransformCoordinatesToRef(t,r,n);var i=r.m,e=t._x*i[3]+t._y*i[7]+t._z*i[11]+i[15];F.WithinEpsilon(e,1)&&n.scaleInPlace(1/e)},o.UnprojectFromTransform=function(t,r,n,i,e){return this.Unproject(t,r,n,i,e,E.IdentityReadOnly)},o.Unproject=function(t,r,n,i,e,a){var s=o.Zero();return o.UnprojectToRef(t,r,n,i,e,a,s),s},o.UnprojectToRef=function(t,r,n,i,e,a,s){o.UnprojectFloatsToRef(t._x,t._y,t._z,r,n,i,e,a,s)},o.UnprojectFloatsToRef=function(t,r,n,i,e,a,s,y,f){var h,u=c.Matrix[0];a.multiplyToRef(s,u),u.multiplyToRef(y,u),u.invert();var _=c.Vector3[0];_.x=t/i*2-1,_.y=-(r/e*2-1),!((h=mt.LastCreatedEngine)===null||h===void 0)&&h.isNDCHalfZRange?_.z=n:_.z=2*n-1,o._UnprojectFromInvertedMatrixToRef(_,u,f)},o.Minimize=function(t,r){var n=t.clone();return n.minimizeInPlace(r),n},o.Maximize=function(t,r){var n=t.clone();return n.maximizeInPlace(r),n},o.Distance=function(t,r){return Math.sqrt(o.DistanceSquared(t,r))},o.DistanceSquared=function(t,r){var n=t._x-r._x,i=t._y-r._y,e=t._z-r._z;return n*n+i*i+e*e},o.ProjectOnTriangleToRef=function(t,r,n,i,e){var a=c.Vector3[0],s=c.Vector3[1],y=c.Vector3[2],f=c.Vector3[3],h=c.Vector3[4];n.subtractToRef(r,a),i.subtractToRef(r,s),i.subtractToRef(n,y);var u=a.length(),_=s.length(),x=y.length();if(u<C||_<C||x<C)return e.copyFrom(r),o.Distance(t,r);t.subtractToRef(r,h),o.CrossToRef(a,s,f);var p=f.length();if(p<C)return e.copyFrom(r),o.Distance(t,r);f.normalizeFromLength(p);var R=h.length();if(R<C)return e.copyFrom(r),0;h.normalizeFromLength(R);var v=o.Dot(f,h),d=c.Vector3[5],m=c.Vector3[6];d.copyFrom(f).scaleInPlace(-R*v),m.copyFrom(t).addInPlace(d);var M=c.Vector3[4],A=c.Vector3[5],P=c.Vector3[7],z=c.Vector3[8];M.copyFrom(a).scaleInPlace(1/u),z.copyFrom(s).scaleInPlace(1/_),M.addInPlace(z).scaleInPlace(-1),A.copyFrom(a).scaleInPlace(-1/u),z.copyFrom(y).scaleInPlace(1/x),A.addInPlace(z).scaleInPlace(-1),P.copyFrom(y).scaleInPlace(-1/x),z.copyFrom(s).scaleInPlace(-1/_),P.addInPlace(z).scaleInPlace(-1);var w=c.Vector3[9],I;w.copyFrom(m).subtractInPlace(r),o.CrossToRef(M,w,z),I=o.Dot(z,f);var H=I;w.copyFrom(m).subtractInPlace(n),o.CrossToRef(A,w,z),I=o.Dot(z,f);var L=I;w.copyFrom(m).subtractInPlace(i),o.CrossToRef(P,w,z),I=o.Dot(z,f);var U=I,g=c.Vector3[10],b,l;H>0&&L<0?(g.copyFrom(a),b=r,l=n):L>0&&U<0?(g.copyFrom(y),b=n,l=i):(g.copyFrom(s).scaleInPlace(-1),b=i,l=r);var N=c.Vector3[9],Z=c.Vector3[4];b.subtractToRef(m,z),l.subtractToRef(m,N),o.CrossToRef(z,N,Z);var j=o.Dot(Z,f)<0;if(!j)return e.copyFrom(m),Math.abs(R*v);var O=c.Vector3[5];o.CrossToRef(g,Z,O),O.normalize();var S=c.Vector3[9];S.copyFrom(b).subtractInPlace(m);var k=S.length();if(k<C)return e.copyFrom(b),o.Distance(t,b);S.normalizeFromLength(k);var Y=o.Dot(O,S),W=c.Vector3[7];W.copyFrom(m).addInPlace(O.scaleInPlace(k*Y)),z.copyFrom(W).subtractInPlace(b),R=g.length(),g.normalizeFromLength(R);var G=o.Dot(z,g)/Math.max(R,C);return G=F.Clamp(G,0,1),W.copyFrom(b).addInPlace(g.scaleInPlace(G*R)),e.copyFrom(W),o.Distance(t,W)},o.Center=function(t,r){return o.CenterToRef(t,r,o.Zero())},o.CenterToRef=function(t,r,n){return n.copyFromFloats((t._x+r._x)/2,(t._y+r._y)/2,(t._z+r._z)/2)},o.RotationFromAxis=function(t,r,n){var i=o.Zero();return o.RotationFromAxisToRef(t,r,n,i),i},o.RotationFromAxisToRef=function(t,r,n,i){var e=c.Quaternion[0];Q.RotationQuaternionFromAxisToRef(t,r,n,e),e.toEulerAnglesToRef(i)},o._UpReadOnly=o.Up(),o._LeftHandedForwardReadOnly=o.Forward(!1),o._RightHandedForwardReadOnly=o.Forward(!0),o._RightReadOnly=o.Right(),o._LeftReadOnly=o.Left(),o._ZeroReadOnly=o.Zero(),o}(),$=function(){function o(t,r,n,i){this.x=t,this.y=r,this.z=n,this.w=i}return o.prototype.toString=function(){return"{X: ".concat(this.x," Y: ").concat(this.y," Z: ").concat(this.z," W: ").concat(this.w,"}")},o.prototype.getClassName=function(){return"Vector4"},o.prototype.getHashCode=function(){var t=D(this.x),r=D(this.y),n=D(this.z),i=D(this.w),e=t;return e=e*397^r,e=e*397^n,e=e*397^i,e},o.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},o.prototype.toArray=function(t,r){return r===void 0&&(r=0),t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,this},o.prototype.fromArray=function(t,r){return r===void 0&&(r=0),o.FromArrayToRef(t,r,this),this},o.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},o.prototype.add=function(t){return new o(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)},o.prototype.addToRef=function(t,r){return r.x=this.x+t.x,r.y=this.y+t.y,r.z=this.z+t.z,r.w=this.w+t.w,this},o.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},o.prototype.subtract=function(t){return new o(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)},o.prototype.subtractToRef=function(t,r){return r.x=this.x-t.x,r.y=this.y-t.y,r.z=this.z-t.z,r.w=this.w-t.w,this},o.prototype.subtractFromFloats=function(t,r,n,i){return new o(this.x-t,this.y-r,this.z-n,this.w-i)},o.prototype.subtractFromFloatsToRef=function(t,r,n,i,e){return e.x=this.x-t,e.y=this.y-r,e.z=this.z-n,e.w=this.w-i,this},o.prototype.negate=function(){return new o(-this.x,-this.y,-this.z,-this.w)},o.prototype.negateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this},o.prototype.negateToRef=function(t){return t.copyFromFloats(this.x*-1,this.y*-1,this.z*-1,this.w*-1)},o.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},o.prototype.scale=function(t){return new o(this.x*t,this.y*t,this.z*t,this.w*t)},o.prototype.scaleToRef=function(t,r){return r.x=this.x*t,r.y=this.y*t,r.z=this.z*t,r.w=this.w*t,this},o.prototype.scaleAndAddToRef=function(t,r){return r.x+=this.x*t,r.y+=this.y*t,r.z+=this.z*t,r.w+=this.w*t,this},o.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},o.prototype.equalsWithEpsilon=function(t,r){return r===void 0&&(r=C),t&&F.WithinEpsilon(this.x,t.x,r)&&F.WithinEpsilon(this.y,t.y,r)&&F.WithinEpsilon(this.z,t.z,r)&&F.WithinEpsilon(this.w,t.w,r)},o.prototype.equalsToFloats=function(t,r,n,i){return this.x===t&&this.y===r&&this.z===n&&this.w===i},o.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},o.prototype.multiply=function(t){return new o(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)},o.prototype.multiplyToRef=function(t,r){return r.x=this.x*t.x,r.y=this.y*t.y,r.z=this.z*t.z,r.w=this.w*t.w,this},o.prototype.multiplyByFloats=function(t,r,n,i){return new o(this.x*t,this.y*r,this.z*n,this.w*i)},o.prototype.divide=function(t){return new o(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)},o.prototype.divideToRef=function(t,r){return r.x=this.x/t.x,r.y=this.y/t.y,r.z=this.z/t.z,r.w=this.w/t.w,this},o.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},o.prototype.minimizeInPlace=function(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this},o.prototype.maximizeInPlace=function(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this},o.prototype.floor=function(){return new o(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))},o.prototype.fract=function(){return new o(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))},o.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},o.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},o.prototype.normalize=function(){var t=this.length();return t===0?this:this.scaleInPlace(1/t)},o.prototype.toVector3=function(){return new T(this.x,this.y,this.z)},o.prototype.clone=function(){return new o(this.x,this.y,this.z,this.w)},o.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},o.prototype.copyFromFloats=function(t,r,n,i){return this.x=t,this.y=r,this.z=n,this.w=i,this},o.prototype.set=function(t,r,n,i){return this.copyFromFloats(t,r,n,i)},o.prototype.setAll=function(t){return this.x=this.y=this.z=this.w=t,this},o.FromArray=function(t,r){return r||(r=0),new o(t[r],t[r+1],t[r+2],t[r+3])},o.FromArrayToRef=function(t,r,n){n.x=t[r],n.y=t[r+1],n.z=t[r+2],n.w=t[r+3]},o.FromFloatArrayToRef=function(t,r,n){o.FromArrayToRef(t,r,n)},o.FromFloatsToRef=function(t,r,n,i,e){e.x=t,e.y=r,e.z=n,e.w=i},o.Zero=function(){return new o(0,0,0,0)},o.One=function(){return new o(1,1,1,1)},o.Normalize=function(t){var r=o.Zero();return o.NormalizeToRef(t,r),r},o.NormalizeToRef=function(t,r){r.copyFrom(t),r.normalize()},o.Minimize=function(t,r){var n=t.clone();return n.minimizeInPlace(r),n},o.Maximize=function(t,r){var n=t.clone();return n.maximizeInPlace(r),n},o.Distance=function(t,r){return Math.sqrt(o.DistanceSquared(t,r))},o.DistanceSquared=function(t,r){var n=t.x-r.x,i=t.y-r.y,e=t.z-r.z,a=t.w-r.w;return n*n+i*i+e*e+a*a},o.Center=function(t,r){return o.CenterToRef(t,r,o.Zero())},o.CenterToRef=function(t,r,n){return n.copyFromFloats((t.x+r.x)/2,(t.y+r.y)/2,(t.z+r.z)/2,(t.w+r.w)/2)},o.TransformCoordinates=function(t,r){var n=o.Zero();return o.TransformCoordinatesToRef(t,r,n),n},o.TransformCoordinatesToRef=function(t,r,n){o.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,r,n)},o.TransformCoordinatesFromFloatsToRef=function(t,r,n,i,e){var a=i.m,s=t*a[0]+r*a[4]+n*a[8]+a[12],y=t*a[1]+r*a[5]+n*a[9]+a[13],f=t*a[2]+r*a[6]+n*a[10]+a[14],h=t*a[3]+r*a[7]+n*a[11]+a[15];e.x=s,e.y=y,e.z=f,e.w=h},o.TransformNormal=function(t,r){var n=o.Zero();return o.TransformNormalToRef(t,r,n),n},o.TransformNormalToRef=function(t,r,n){var i=r.m,e=t.x*i[0]+t.y*i[4]+t.z*i[8],a=t.x*i[1]+t.y*i[5]+t.z*i[9],s=t.x*i[2]+t.y*i[6]+t.z*i[10];n.x=e,n.y=a,n.z=s,n.w=t.w},o.TransformNormalFromFloatsToRef=function(t,r,n,i,e,a){var s=e.m;a.x=t*s[0]+r*s[4]+n*s[8],a.y=t*s[1]+r*s[5]+n*s[9],a.z=t*s[2]+r*s[6]+n*s[10],a.w=i},o.FromVector3=function(t,r){return r===void 0&&(r=0),new o(t._x,t._y,t._z,r)},o}(),Q=function(){function o(t,r,n,i){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),this._isDirty=!0,this._x=t,this._y=r,this._z=n,this._w=i}return Object.defineProperty(o.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"w",{get:function(){return this._w},set:function(t){this._w=t,this._isDirty=!0},enumerable:!1,configurable:!0}),o.prototype.toString=function(){return"{X: ".concat(this._x," Y: ").concat(this._y," Z: ").concat(this._z," W: ").concat(this._w,"}")},o.prototype.getClassName=function(){return"Quaternion"},o.prototype.getHashCode=function(){var t=D(this._x),r=D(this._y),n=D(this._z),i=D(this._w),e=t;return e=e*397^r,e=e*397^n,e=e*397^i,e},o.prototype.asArray=function(){return[this._x,this._y,this._z,this._w]},o.prototype.toArray=function(t,r){return r===void 0&&(r=0),t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,this},o.prototype.equals=function(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z&&this._w===t._w},o.prototype.equalsWithEpsilon=function(t,r){return r===void 0&&(r=C),t&&F.WithinEpsilon(this._x,t._x,r)&&F.WithinEpsilon(this._y,t._y,r)&&F.WithinEpsilon(this._z,t._z,r)&&F.WithinEpsilon(this._w,t._w,r)},o.prototype.clone=function(){return new o(this._x,this._y,this._z,this._w)},o.prototype.copyFrom=function(t){return this.x=t._x,this.y=t._y,this.z=t._z,this.w=t._w,this},o.prototype.copyFromFloats=function(t,r,n,i){return this.x=t,this.y=r,this.z=n,this.w=i,this},o.prototype.set=function(t,r,n,i){return this.copyFromFloats(t,r,n,i)},o.prototype.add=function(t){return new o(this._x+t._x,this._y+t._y,this._z+t._z,this._w+t._w)},o.prototype.addInPlace=function(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._w+=t._w,this},o.prototype.subtract=function(t){return new o(this._x-t._x,this._y-t._y,this._z-t._z,this._w-t._w)},o.prototype.subtractInPlace=function(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._w-=t._w,this},o.prototype.scale=function(t){return new o(this._x*t,this._y*t,this._z*t,this._w*t)},o.prototype.scaleToRef=function(t,r){return r.x=this._x*t,r.y=this._y*t,r.z=this._z*t,r.w=this._w*t,this},o.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},o.prototype.scaleAndAddToRef=function(t,r){return r.x+=this._x*t,r.y+=this._y*t,r.z+=this._z*t,r.w+=this._w*t,this},o.prototype.multiply=function(t){var r=new o(0,0,0,1);return this.multiplyToRef(t,r),r},o.prototype.multiplyToRef=function(t,r){var n=this._x*t._w+this._y*t._z-this._z*t._y+this._w*t._x,i=-this._x*t._z+this._y*t._w+this._z*t._x+this._w*t._y,e=this._x*t._y-this._y*t._x+this._z*t._w+this._w*t._z,a=-this._x*t._x-this._y*t._y-this._z*t._z+this._w*t._w;return r.copyFromFloats(n,i,e,a),this},o.prototype.multiplyInPlace=function(t){return this.multiplyToRef(t,this),this},o.prototype.conjugateToRef=function(t){return t.copyFromFloats(-this._x,-this._y,-this._z,this._w),this},o.prototype.conjugateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},o.prototype.conjugate=function(){return new o(-this._x,-this._y,-this._z,this._w)},o.prototype.invert=function(){var t=this.conjugate(),r=this.lengthSquared();return r==0||r==1||t.scaleInPlace(1/r),t},o.prototype.invertInPlace=function(){this.conjugateInPlace();var t=this.lengthSquared();return t==0||t==1?this:(this.scaleInPlace(1/t),this)},o.prototype.lengthSquared=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},o.prototype.length=function(){return Math.sqrt(this.lengthSquared())},o.prototype.normalize=function(){var t=this.length();if(t===0)return this;var r=1/t;return this.scaleInPlace(r),this},o.prototype.normalizeToNew=function(){var t=this.length();if(t===0)return this.clone();var r=1/t;return this.scale(r)},o.prototype.toEulerAngles=function(){var t=T.Zero();return this.toEulerAnglesToRef(t),t},o.prototype.toEulerAnglesToRef=function(t){var r=this._z,n=this._x,i=this._y,e=this._w,a=i*r-n*e,s=.4999999;if(a<-s)t.y=2*Math.atan2(i,e),t.x=Math.PI/2,t.z=0;else if(a>s)t.y=2*Math.atan2(i,e),t.x=-Math.PI/2,t.z=0;else{var y=e*e,f=r*r,h=n*n,u=i*i;t.z=Math.atan2(2*(n*i+r*e),-f-h+u+y),t.x=Math.asin(-2*a),t.y=Math.atan2(2*(r*n+i*e),f-h-u+y)}return this},o.prototype.toRotationMatrix=function(t){return E.FromQuaternionToRef(this,t),this},o.prototype.fromRotationMatrix=function(t){return o.FromRotationMatrixToRef(t,this),this},o.FromRotationMatrix=function(t){var r=new o;return o.FromRotationMatrixToRef(t,r),r},o.FromRotationMatrixToRef=function(t,r){var n=t.m,i=n[0],e=n[4],a=n[8],s=n[1],y=n[5],f=n[9],h=n[2],u=n[6],_=n[10],x=i+y+_,p;x>0?(p=.5/Math.sqrt(x+1),r.w=.25/p,r.x=(u-f)*p,r.y=(a-h)*p,r.z=(s-e)*p):i>y&&i>_?(p=2*Math.sqrt(1+i-y-_),r.w=(u-f)/p,r.x=.25*p,r.y=(e+s)/p,r.z=(a+h)/p):y>_?(p=2*Math.sqrt(1+y-i-_),r.w=(a-h)/p,r.x=(e+s)/p,r.y=.25*p,r.z=(f+u)/p):(p=2*Math.sqrt(1+_-i-y),r.w=(s-e)/p,r.x=(a+h)/p,r.y=(f+u)/p,r.z=.25*p)},o.Dot=function(t,r){return t._x*r._x+t._y*r._y+t._z*r._z+t._w*r._w},o.AreClose=function(t,r){var n=o.Dot(t,r);return n>=0},o.SmoothToRef=function(t,r,n,i,e){var a=i===0?1:n/i;a=F.Clamp(a,0,1),o.SlerpToRef(t,r,a,e)},o.Zero=function(){return new o(0,0,0,0)},o.Inverse=function(t){return new o(-t._x,-t._y,-t._z,t._w)},o.InverseToRef=function(t,r){return r.set(-t._x,-t._y,-t._z,t._w),r},o.Identity=function(){return new o(0,0,0,1)},o.IsIdentity=function(t){return t&&t._x===0&&t._y===0&&t._z===0&&t._w===1},o.RotationAxis=function(t,r){return o.RotationAxisToRef(t,r,new o)},o.RotationAxisToRef=function(t,r,n){var i=Math.sin(r/2);return t.normalize(),n.w=Math.cos(r/2),n.x=t._x*i,n.y=t._y*i,n.z=t._z*i,n},o.FromArray=function(t,r){return r||(r=0),new o(t[r],t[r+1],t[r+2],t[r+3])},o.FromArrayToRef=function(t,r,n){n.x=t[r],n.y=t[r+1],n.z=t[r+2],n.w=t[r+3]},o.FromEulerAngles=function(t,r,n){var i=new o;return o.RotationYawPitchRollToRef(r,t,n,i),i},o.FromEulerAnglesToRef=function(t,r,n,i){return o.RotationYawPitchRollToRef(r,t,n,i),i},o.FromEulerVector=function(t){var r=new o;return o.RotationYawPitchRollToRef(t._y,t._x,t._z,r),r},o.FromEulerVectorToRef=function(t,r){return o.RotationYawPitchRollToRef(t._y,t._x,t._z,r),r},o.FromUnitVectorsToRef=function(t,r,n){var i=T.Dot(t,r)+1;return i<C?Math.abs(t.x)>Math.abs(t.z)?n.set(-t.y,t.x,0,0):n.set(0,-t.z,t.y,0):(T.CrossToRef(t,r,J.Vector3[0]),n.set(J.Vector3[0].x,J.Vector3[0].y,J.Vector3[0].z,i)),n.normalize()},o.RotationYawPitchRoll=function(t,r,n){var i=new o;return o.RotationYawPitchRollToRef(t,r,n,i),i},o.RotationYawPitchRollToRef=function(t,r,n,i){var e=n*.5,a=r*.5,s=t*.5,y=Math.sin(e),f=Math.cos(e),h=Math.sin(a),u=Math.cos(a),_=Math.sin(s),x=Math.cos(s);i.x=x*h*f+_*u*y,i.y=_*u*f-x*h*y,i.z=x*u*y-_*h*f,i.w=x*u*f+_*h*y},o.RotationAlphaBetaGamma=function(t,r,n){var i=new o;return o.RotationAlphaBetaGammaToRef(t,r,n,i),i},o.RotationAlphaBetaGammaToRef=function(t,r,n,i){var e=(n+t)*.5,a=(n-t)*.5,s=r*.5;i.x=Math.cos(a)*Math.sin(s),i.y=Math.sin(a)*Math.sin(s),i.z=Math.sin(e)*Math.cos(s),i.w=Math.cos(e)*Math.cos(s)},o.RotationQuaternionFromAxis=function(t,r,n){var i=new o(0,0,0,0);return o.RotationQuaternionFromAxisToRef(t,r,n,i),i},o.RotationQuaternionFromAxisToRef=function(t,r,n,i){var e=c.Matrix[0];E.FromXYZAxesToRef(t.normalize(),r.normalize(),n.normalize(),e),o.FromRotationMatrixToRef(e,i)},o.FromLookDirectionLH=function(t,r){var n=new o;return o.FromLookDirectionLHToRef(t,r,n),n},o.FromLookDirectionLHToRef=function(t,r,n){var i=c.Matrix[0];E.LookDirectionLHToRef(t,r,i),o.FromRotationMatrixToRef(i,n)},o.FromLookDirectionRH=function(t,r){var n=new o;return o.FromLookDirectionRHToRef(t,r,n),n},o.FromLookDirectionRHToRef=function(t,r,n){var i=c.Matrix[0];return E.LookDirectionRHToRef(t,r,i),o.FromRotationMatrixToRef(i,n)},o.Slerp=function(t,r,n){var i=o.Identity();return o.SlerpToRef(t,r,n,i),i},o.SlerpToRef=function(t,r,n,i){var e,a,s=t._x*r._x+t._y*r._y+t._z*r._z+t._w*r._w,y=!1;if(s<0&&(y=!0,s=-s),s>.999999)a=1-n,e=y?-n:n;else{var f=Math.acos(s),h=1/Math.sin(f);a=Math.sin((1-n)*f)*h,e=y?-Math.sin(n*f)*h:Math.sin(n*f)*h}i.x=a*t._x+e*r._x,i.y=a*t._y+e*r._y,i.z=a*t._z+e*r._z,i.w=a*t._w+e*r._w},o.Hermite=function(t,r,n,i,e){var a=e*e,s=e*a,y=2*s-3*a+1,f=-2*s+3*a,h=s-2*a+e,u=s-a,_=t._x*y+n._x*f+r._x*h+i._x*u,x=t._y*y+n._y*f+r._y*h+i._y*u,p=t._z*y+n._z*f+r._z*h+i._z*u,R=t._w*y+n._w*f+r._w*h+i._w*u;return new o(_,x,p,R)},o.Hermite1stDerivative=function(t,r,n,i,e){var a=o.Zero();return this.Hermite1stDerivativeToRef(t,r,n,i,e,a),a},o.Hermite1stDerivativeToRef=function(t,r,n,i,e,a){var s=e*e;a.x=(s-e)*6*t.x+(3*s-4*e+1)*r.x+(-s+e)*6*n.x+(3*s-2*e)*i.x,a.y=(s-e)*6*t.y+(3*s-4*e+1)*r.y+(-s+e)*6*n.y+(3*s-2*e)*i.y,a.z=(s-e)*6*t.z+(3*s-4*e+1)*r.z+(-s+e)*6*n.z+(3*s-2*e)*i.z,a.w=(s-e)*6*t.w+(3*s-4*e+1)*r.w+(-s+e)*6*n.w+(3*s-2*e)*i.w},o}(),E=function(){function o(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,X.MatrixTrackPrecisionChange&&X.MatrixTrackedMatrices.push(this),this._m=new X.MatrixCurrentType(16),this.markAsUpdated()}return Object.defineProperty(o,"Use64Bits",{get:function(){return X.MatrixUse64Bits},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"m",{get:function(){return this._m},enumerable:!1,configurable:!0}),o.prototype.markAsUpdated=function(){this.updateFlag=o._UpdateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0},o.prototype._updateIdentityStatus=function(t,r,n,i){r===void 0&&(r=!1),n===void 0&&(n=!1),i===void 0&&(i=!0),this._isIdentity=t,this._isIdentity3x2=t||n,this._isIdentityDirty=this._isIdentity?!1:r,this._isIdentity3x2Dirty=this._isIdentity3x2?!1:i},o.prototype.isIdentity=function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var t=this._m;this._isIdentity=t[0]===1&&t[1]===0&&t[2]===0&&t[3]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[7]===0&&t[8]===0&&t[9]===0&&t[10]===1&&t[11]===0&&t[12]===0&&t[13]===0&&t[14]===0&&t[15]===1}return this._isIdentity},o.prototype.isIdentityAs3x2=function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,this._m[0]!==1||this._m[5]!==1||this._m[15]!==1?this._isIdentity3x2=!1:this._m[1]!==0||this._m[2]!==0||this._m[3]!==0||this._m[4]!==0||this._m[6]!==0||this._m[7]!==0||this._m[8]!==0||this._m[9]!==0||this._m[10]!==0||this._m[11]!==0||this._m[12]!==0||this._m[13]!==0||this._m[14]!==0?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2},o.prototype.determinant=function(){if(this._isIdentity===!0)return 1;var t=this._m,r=t[0],n=t[1],i=t[2],e=t[3],a=t[4],s=t[5],y=t[6],f=t[7],h=t[8],u=t[9],_=t[10],x=t[11],p=t[12],R=t[13],v=t[14],d=t[15],m=_*d-v*x,M=u*d-R*x,A=u*v-R*_,P=h*d-p*x,z=h*v-_*p,w=h*R-p*u,I=+(s*m-y*M+f*A),H=-(a*m-y*P+f*z),L=+(a*M-s*P+f*w),U=-(a*A-s*z+y*w);return r*I+n*H+i*L+e*U},o.prototype.toArray=function(){return this._m},o.prototype.asArray=function(){return this._m},o.prototype.invert=function(){return this.invertToRef(this),this},o.prototype.reset=function(){return o.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this},o.prototype.add=function(t){var r=new o;return this.addToRef(t,r),r},o.prototype.addToRef=function(t,r){for(var n=this._m,i=r._m,e=t.m,a=0;a<16;a++)i[a]=n[a]+e[a];return r.markAsUpdated(),this},o.prototype.addToSelf=function(t){for(var r=this._m,n=t.m,i=0;i<16;i++)r[i]+=n[i];return this.markAsUpdated(),this},o.prototype.invertToRef=function(t){if(this._isIdentity===!0)return o.IdentityToRef(t),this;var r=this._m,n=r[0],i=r[1],e=r[2],a=r[3],s=r[4],y=r[5],f=r[6],h=r[7],u=r[8],_=r[9],x=r[10],p=r[11],R=r[12],v=r[13],d=r[14],m=r[15],M=x*m-d*p,A=_*m-v*p,P=_*d-v*x,z=u*m-R*p,w=u*d-x*R,I=u*v-R*_,H=+(y*M-f*A+h*P),L=-(s*M-f*z+h*w),U=+(s*A-y*z+h*I),g=-(s*P-y*w+f*I),b=n*H+i*L+e*U+a*g;if(b===0)return t.copyFrom(this),this;var l=1/b,N=f*m-d*h,Z=y*m-v*h,j=y*d-v*f,O=s*m-R*h,S=s*d-R*f,k=s*v-R*y,Y=f*p-x*h,W=y*p-_*h,G=y*x-_*f,q=s*p-u*h,tt=s*x-u*f,rt=s*_-u*y,nt=-(i*M-e*A+a*P),it=+(n*M-e*z+a*w),et=-(n*A-i*z+a*I),at=+(n*P-i*w+e*I),st=+(i*N-e*Z+a*j),yt=-(n*N-e*O+a*S),ft=+(n*Z-i*O+a*k),ht=-(n*j-i*S+e*k),ut=-(i*Y-e*W+a*G),_t=+(n*Y-e*q+a*tt),ct=-(n*W-i*q+a*rt),pt=+(n*G-i*tt+e*rt);return o.FromValuesToRef(H*l,nt*l,st*l,ut*l,L*l,it*l,yt*l,_t*l,U*l,et*l,ft*l,ct*l,g*l,at*l,ht*l,pt*l,t),this},o.prototype.addAtIndex=function(t,r){return this._m[t]+=r,this.markAsUpdated(),this},o.prototype.multiplyAtIndex=function(t,r){return this._m[t]*=r,this.markAsUpdated(),this},o.prototype.setTranslationFromFloats=function(t,r,n){return this._m[12]=t,this._m[13]=r,this._m[14]=n,this.markAsUpdated(),this},o.prototype.addTranslationFromFloats=function(t,r,n){return this._m[12]+=t,this._m[13]+=r,this._m[14]+=n,this.markAsUpdated(),this},o.prototype.setTranslation=function(t){return this.setTranslationFromFloats(t._x,t._y,t._z)},o.prototype.getTranslation=function(){return new T(this._m[12],this._m[13],this._m[14])},o.prototype.getTranslationToRef=function(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],this},o.prototype.removeRotationAndScaling=function(){var t=this.m;return o.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t[12],t[13],t[14],t[15],this),this._updateIdentityStatus(t[12]===0&&t[13]===0&&t[14]===0&&t[15]===1),this},o.prototype.multiply=function(t){var r=new o;return this.multiplyToRef(t,r),r},o.prototype.copyFrom=function(t){t.copyToArray(this._m);var r=t;return this.updateFlag=r.updateFlag,this._updateIdentityStatus(r._isIdentity,r._isIdentityDirty,r._isIdentity3x2,r._isIdentity3x2Dirty),this},o.prototype.copyToArray=function(t,r){r===void 0&&(r=0);var n=this._m;return t[r]=n[0],t[r+1]=n[1],t[r+2]=n[2],t[r+3]=n[3],t[r+4]=n[4],t[r+5]=n[5],t[r+6]=n[6],t[r+7]=n[7],t[r+8]=n[8],t[r+9]=n[9],t[r+10]=n[10],t[r+11]=n[11],t[r+12]=n[12],t[r+13]=n[13],t[r+14]=n[14],t[r+15]=n[15],this},o.prototype.multiplyToRef=function(t,r){return this._isIdentity?(r.copyFrom(t),this):t._isIdentity?(r.copyFrom(this),this):(this.multiplyToArray(t,r._m,0),r.markAsUpdated(),this)},o.prototype.multiplyToArray=function(t,r,n){var i=this._m,e=t.m,a=i[0],s=i[1],y=i[2],f=i[3],h=i[4],u=i[5],_=i[6],x=i[7],p=i[8],R=i[9],v=i[10],d=i[11],m=i[12],M=i[13],A=i[14],P=i[15],z=e[0],w=e[1],I=e[2],H=e[3],L=e[4],U=e[5],g=e[6],b=e[7],l=e[8],N=e[9],Z=e[10],j=e[11],O=e[12],S=e[13],k=e[14],Y=e[15];return r[n]=a*z+s*L+y*l+f*O,r[n+1]=a*w+s*U+y*N+f*S,r[n+2]=a*I+s*g+y*Z+f*k,r[n+3]=a*H+s*b+y*j+f*Y,r[n+4]=h*z+u*L+_*l+x*O,r[n+5]=h*w+u*U+_*N+x*S,r[n+6]=h*I+u*g+_*Z+x*k,r[n+7]=h*H+u*b+_*j+x*Y,r[n+8]=p*z+R*L+v*l+d*O,r[n+9]=p*w+R*U+v*N+d*S,r[n+10]=p*I+R*g+v*Z+d*k,r[n+11]=p*H+R*b+v*j+d*Y,r[n+12]=m*z+M*L+A*l+P*O,r[n+13]=m*w+M*U+A*N+P*S,r[n+14]=m*I+M*g+A*Z+P*k,r[n+15]=m*H+M*b+A*j+P*Y,this},o.prototype.equals=function(t){var r=t;if(!r)return!1;if((this._isIdentity||r._isIdentity)&&!this._isIdentityDirty&&!r._isIdentityDirty)return this._isIdentity&&r._isIdentity;var n=this.m,i=r.m;return n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]&&n[3]===i[3]&&n[4]===i[4]&&n[5]===i[5]&&n[6]===i[6]&&n[7]===i[7]&&n[8]===i[8]&&n[9]===i[9]&&n[10]===i[10]&&n[11]===i[11]&&n[12]===i[12]&&n[13]===i[13]&&n[14]===i[14]&&n[15]===i[15]},o.prototype.clone=function(){var t=new o;return t.copyFrom(this),t},o.prototype.getClassName=function(){return"Matrix"},o.prototype.getHashCode=function(){for(var t=D(this._m[0]),r=1;r<16;r++)t=t*397^D(this._m[r]);return t},o.prototype.decomposeToTransformNode=function(t){return t.rotationQuaternion=t.rotationQuaternion||new Q,this.decompose(t.scaling,t.rotationQuaternion,t.position)},o.prototype.decompose=function(t,r,n,i){if(this._isIdentity)return n&&n.setAll(0),t&&t.setAll(1),r&&r.copyFromFloats(0,0,0,1),!0;var e=this._m;if(n&&n.copyFromFloats(e[12],e[13],e[14]),t=t||c.Vector3[0],t.x=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),t.y=Math.sqrt(e[4]*e[4]+e[5]*e[5]+e[6]*e[6]),t.z=Math.sqrt(e[8]*e[8]+e[9]*e[9]+e[10]*e[10]),i){var a=i.scaling.x<0?-1:1,s=i.scaling.y<0?-1:1,y=i.scaling.z<0?-1:1;t.x*=a,t.y*=s,t.z*=y}else this.determinant()<=0&&(t.y*=-1);if(t._x===0||t._y===0||t._z===0)return r&&r.copyFromFloats(0,0,0,1),!1;if(r){var f=1/t._x,h=1/t._y,u=1/t._z;o.FromValuesToRef(e[0]*f,e[1]*f,e[2]*f,0,e[4]*h,e[5]*h,e[6]*h,0,e[8]*u,e[9]*u,e[10]*u,0,0,0,0,1,c.Matrix[0]),Q.FromRotationMatrixToRef(c.Matrix[0],r)}return!0},o.prototype.getRow=function(t){if(t<0||t>3)return null;var r=t*4;return new $(this._m[r+0],this._m[r+1],this._m[r+2],this._m[r+3])},o.prototype.setRow=function(t,r){return this.setRowFromFloats(t,r.x,r.y,r.z,r.w)},o.prototype.transpose=function(){return o.Transpose(this)},o.prototype.transposeToRef=function(t){return o.TransposeToRef(this,t),this},o.prototype.setRowFromFloats=function(t,r,n,i,e){if(t<0||t>3)return this;var a=t*4;return this._m[a+0]=r,this._m[a+1]=n,this._m[a+2]=i,this._m[a+3]=e,this.markAsUpdated(),this},o.prototype.scale=function(t){var r=new o;return this.scaleToRef(t,r),r},o.prototype.scaleToRef=function(t,r){for(var n=0;n<16;n++)r._m[n]=this._m[n]*t;return r.markAsUpdated(),this},o.prototype.scaleAndAddToRef=function(t,r){for(var n=0;n<16;n++)r._m[n]+=this._m[n]*t;return r.markAsUpdated(),this},o.prototype.toNormalMatrix=function(t){var r=c.Matrix[0];this.invertToRef(r),r.transposeToRef(t);var n=t._m;o.FromValuesToRef(n[0],n[1],n[2],0,n[4],n[5],n[6],0,n[8],n[9],n[10],0,0,0,0,1,t)},o.prototype.getRotationMatrix=function(){var t=new o;return this.getRotationMatrixToRef(t),t},o.prototype.getRotationMatrixToRef=function(t){var r=c.Vector3[0];if(!this.decompose(r))return o.IdentityToRef(t),this;var n=this._m,i=1/r._x,e=1/r._y,a=1/r._z;return o.FromValuesToRef(n[0]*i,n[1]*i,n[2]*i,0,n[4]*e,n[5]*e,n[6]*e,0,n[8]*a,n[9]*a,n[10]*a,0,0,0,0,1,t),this},o.prototype.toggleModelMatrixHandInPlace=function(){var t=this._m;t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this.markAsUpdated()},o.prototype.toggleProjectionMatrixHandInPlace=function(){var t=this._m;t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this.markAsUpdated()},o.FromArray=function(t,r){r===void 0&&(r=0);var n=new o;return o.FromArrayToRef(t,r,n),n},o.FromArrayToRef=function(t,r,n){for(var i=0;i<16;i++)n._m[i]=t[i+r];n.markAsUpdated()},o.FromFloat32ArrayToRefScaled=function(t,r,n,i){for(var e=0;e<16;e++)i._m[e]=t[e+r]*n;i.markAsUpdated()},Object.defineProperty(o,"IdentityReadOnly",{get:function(){return o._IdentityReadOnly},enumerable:!1,configurable:!0}),o.FromValuesToRef=function(t,r,n,i,e,a,s,y,f,h,u,_,x,p,R,v,d){var m=d._m;m[0]=t,m[1]=r,m[2]=n,m[3]=i,m[4]=e,m[5]=a,m[6]=s,m[7]=y,m[8]=f,m[9]=h,m[10]=u,m[11]=_,m[12]=x,m[13]=p,m[14]=R,m[15]=v,d.markAsUpdated()},o.FromValues=function(t,r,n,i,e,a,s,y,f,h,u,_,x,p,R,v){var d=new o,m=d._m;return m[0]=t,m[1]=r,m[2]=n,m[3]=i,m[4]=e,m[5]=a,m[6]=s,m[7]=y,m[8]=f,m[9]=h,m[10]=u,m[11]=_,m[12]=x,m[13]=p,m[14]=R,m[15]=v,d.markAsUpdated(),d},o.Compose=function(t,r,n){var i=new o;return o.ComposeToRef(t,r,n,i),i},o.ComposeToRef=function(t,r,n,i){var e=i._m,a=r._x,s=r._y,y=r._z,f=r._w,h=a+a,u=s+s,_=y+y,x=a*h,p=a*u,R=a*_,v=s*u,d=s*_,m=y*_,M=f*h,A=f*u,P=f*_,z=t._x,w=t._y,I=t._z;e[0]=(1-(v+m))*z,e[1]=(p+P)*z,e[2]=(R-A)*z,e[3]=0,e[4]=(p-P)*w,e[5]=(1-(x+m))*w,e[6]=(d+M)*w,e[7]=0,e[8]=(R+A)*I,e[9]=(d-M)*I,e[10]=(1-(x+v))*I,e[11]=0,e[12]=n._x,e[13]=n._y,e[14]=n._z,e[15]=1,i.markAsUpdated()},o.Identity=function(){var t=o.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return t._updateIdentityStatus(!0),t},o.IdentityToRef=function(t){o.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(!0)},o.Zero=function(){var t=o.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return t._updateIdentityStatus(!1),t},o.RotationX=function(t){var r=new o;return o.RotationXToRef(t,r),r},o.Invert=function(t){var r=new o;return t.invertToRef(r),r},o.RotationXToRef=function(t,r){var n=Math.sin(t),i=Math.cos(t);o.FromValuesToRef(1,0,0,0,0,i,n,0,0,-n,i,0,0,0,0,1,r),r._updateIdentityStatus(i===1&&n===0)},o.RotationY=function(t){var r=new o;return o.RotationYToRef(t,r),r},o.RotationYToRef=function(t,r){var n=Math.sin(t),i=Math.cos(t);o.FromValuesToRef(i,0,-n,0,0,1,0,0,n,0,i,0,0,0,0,1,r),r._updateIdentityStatus(i===1&&n===0)},o.RotationZ=function(t){var r=new o;return o.RotationZToRef(t,r),r},o.RotationZToRef=function(t,r){var n=Math.sin(t),i=Math.cos(t);o.FromValuesToRef(i,n,0,0,-n,i,0,0,0,0,1,0,0,0,0,1,r),r._updateIdentityStatus(i===1&&n===0)},o.RotationAxis=function(t,r){var n=new o;return o.RotationAxisToRef(t,r,n),n},o.RotationAxisToRef=function(t,r,n){var i=Math.sin(-r),e=Math.cos(-r),a=1-e;t.normalize();var s=n._m;s[0]=t._x*t._x*a+e,s[1]=t._x*t._y*a-t._z*i,s[2]=t._x*t._z*a+t._y*i,s[3]=0,s[4]=t._y*t._x*a+t._z*i,s[5]=t._y*t._y*a+e,s[6]=t._y*t._z*a-t._x*i,s[7]=0,s[8]=t._z*t._x*a-t._y*i,s[9]=t._z*t._y*a+t._x*i,s[10]=t._z*t._z*a+e,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,n.markAsUpdated()},o.RotationAlignToRef=function(t,r,n){var i=T.Dot(r,t),e=n._m;if(i<-1+C)e[0]=-1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0;else{var a=T.Cross(r,t),s=1/(1+i);e[0]=a._x*a._x*s+i,e[1]=a._y*a._x*s-a._z,e[2]=a._z*a._x*s+a._y,e[3]=0,e[4]=a._x*a._y*s+a._z,e[5]=a._y*a._y*s+i,e[6]=a._z*a._y*s-a._x,e[7]=0,e[8]=a._x*a._z*s-a._y,e[9]=a._y*a._z*s+a._x,e[10]=a._z*a._z*s+i,e[11]=0}e[12]=0,e[13]=0,e[14]=0,e[15]=1,n.markAsUpdated()},o.RotationYawPitchRoll=function(t,r,n){var i=new o;return o.RotationYawPitchRollToRef(t,r,n,i),i},o.RotationYawPitchRollToRef=function(t,r,n,i){Q.RotationYawPitchRollToRef(t,r,n,c.Quaternion[0]),c.Quaternion[0].toRotationMatrix(i)},o.Scaling=function(t,r,n){var i=new o;return o.ScalingToRef(t,r,n,i),i},o.ScalingToRef=function(t,r,n,i){o.FromValuesToRef(t,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1,i),i._updateIdentityStatus(t===1&&r===1&&n===1)},o.Translation=function(t,r,n){var i=new o;return o.TranslationToRef(t,r,n,i),i},o.TranslationToRef=function(t,r,n,i){o.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t,r,n,1,i),i._updateIdentityStatus(t===0&&r===0&&n===0)},o.Lerp=function(t,r,n){var i=new o;return o.LerpToRef(t,r,n,i),i},o.LerpToRef=function(t,r,n,i){for(var e=i._m,a=t.m,s=r.m,y=0;y<16;y++)e[y]=a[y]*(1-n)+s[y]*n;i.markAsUpdated()},o.DecomposeLerp=function(t,r,n){var i=new o;return o.DecomposeLerpToRef(t,r,n,i),i},o.DecomposeLerpToRef=function(t,r,n,i){var e=c.Vector3[0],a=c.Quaternion[0],s=c.Vector3[1];t.decompose(e,a,s);var y=c.Vector3[2],f=c.Quaternion[1],h=c.Vector3[3];r.decompose(y,f,h);var u=c.Vector3[4];T.LerpToRef(e,y,n,u);var _=c.Quaternion[2];Q.SlerpToRef(a,f,n,_);var x=c.Vector3[5];T.LerpToRef(s,h,n,x),o.ComposeToRef(u,_,x,i)},o.LookAtLH=function(t,r,n){var i=new o;return o.LookAtLHToRef(t,r,n,i),i},o.LookAtLHToRef=function(t,r,n,i){var e=c.Vector3[0],a=c.Vector3[1],s=c.Vector3[2];r.subtractToRef(t,s),s.normalize(),T.CrossToRef(n,s,e);var y=e.lengthSquared();y===0?e.x=1:e.normalizeFromLength(Math.sqrt(y)),T.CrossToRef(s,e,a),a.normalize();var f=-T.Dot(e,t),h=-T.Dot(a,t),u=-T.Dot(s,t);o.FromValuesToRef(e._x,a._x,s._x,0,e._y,a._y,s._y,0,e._z,a._z,s._z,0,f,h,u,1,i)},o.LookAtRH=function(t,r,n){var i=new o;return o.LookAtRHToRef(t,r,n,i),i},o.LookAtRHToRef=function(t,r,n,i){var e=c.Vector3[0],a=c.Vector3[1],s=c.Vector3[2];t.subtractToRef(r,s),s.normalize(),T.CrossToRef(n,s,e);var y=e.lengthSquared();y===0?e.x=1:e.normalizeFromLength(Math.sqrt(y)),T.CrossToRef(s,e,a),a.normalize();var f=-T.Dot(e,t),h=-T.Dot(a,t),u=-T.Dot(s,t);o.FromValuesToRef(e._x,a._x,s._x,0,e._y,a._y,s._y,0,e._z,a._z,s._z,0,f,h,u,1,i)},o.LookDirectionLH=function(t,r){var n=new o;return o.LookDirectionLHToRef(t,r,n),n},o.LookDirectionLHToRef=function(t,r,n){var i=c.Vector3[0];i.copyFrom(t),i.scaleInPlace(-1);var e=c.Vector3[1];T.CrossToRef(r,i,e),o.FromValuesToRef(e._x,e._y,e._z,0,r._x,r._y,r._z,0,i._x,i._y,i._z,0,0,0,0,1,n)},o.LookDirectionRH=function(t,r){var n=new o;return o.LookDirectionRHToRef(t,r,n),n},o.LookDirectionRHToRef=function(t,r,n){var i=c.Vector3[2];T.CrossToRef(r,t,i),o.FromValuesToRef(i._x,i._y,i._z,0,r._x,r._y,r._z,0,t._x,t._y,t._z,0,0,0,0,1,n)},o.OrthoLH=function(t,r,n,i,e){var a=new o;return o.OrthoLHToRef(t,r,n,i,a,e),a},o.OrthoLHToRef=function(t,r,n,i,e,a){var s=n,y=i,f=2/t,h=2/r,u=2/(y-s),_=-(y+s)/(y-s);o.FromValuesToRef(f,0,0,0,0,h,0,0,0,0,u,0,0,0,_,1,e),a&&e.multiplyToRef(V,e),e._updateIdentityStatus(f===1&&h===1&&u===1&&_===0)},o.OrthoOffCenterLH=function(t,r,n,i,e,a,s){var y=new o;return o.OrthoOffCenterLHToRef(t,r,n,i,e,a,y,s),y},o.OrthoOffCenterLHToRef=function(t,r,n,i,e,a,s,y){var f=e,h=a,u=2/(r-t),_=2/(i-n),x=2/(h-f),p=-(h+f)/(h-f),R=(t+r)/(t-r),v=(i+n)/(n-i);o.FromValuesToRef(u,0,0,0,0,_,0,0,0,0,x,0,R,v,p,1,s),y&&s.multiplyToRef(V,s),s.markAsUpdated()},o.OrthoOffCenterRH=function(t,r,n,i,e,a,s){var y=new o;return o.OrthoOffCenterRHToRef(t,r,n,i,e,a,y,s),y},o.OrthoOffCenterRHToRef=function(t,r,n,i,e,a,s,y){o.OrthoOffCenterLHToRef(t,r,n,i,e,a,s,y),s._m[10]*=-1},o.PerspectiveLH=function(t,r,n,i,e,a){a===void 0&&(a=0);var s=new o,y=n,f=i,h=2*y/t,u=2*y/r,_=(f+y)/(f-y),x=-2*f*y/(f-y),p=Math.tan(a);return o.FromValuesToRef(h,0,0,0,0,u,0,p,0,0,_,1,0,0,x,0,s),e&&s.multiplyToRef(V,s),s._updateIdentityStatus(!1),s},o.PerspectiveFovLH=function(t,r,n,i,e,a,s){a===void 0&&(a=0),s===void 0&&(s=!1);var y=new o;return o.PerspectiveFovLHToRef(t,r,n,i,y,!0,e,a,s),y},o.PerspectiveFovLHToRef=function(t,r,n,i,e,a,s,y,f){a===void 0&&(a=!0),y===void 0&&(y=0),f===void 0&&(f=!1);var h=n,u=i,_=1/Math.tan(t*.5),x=a?_/r:_,p=a?_:_*r,R=f&&h===0?-1:u!==0?(u+h)/(u-h):1,v=f&&h===0?2*u:u!==0?-2*u*h/(u-h):-2*h,d=Math.tan(y);o.FromValuesToRef(x,0,0,0,0,p,0,d,0,0,R,1,0,0,v,0,e),s&&e.multiplyToRef(V,e),e._updateIdentityStatus(!1)},o.PerspectiveFovReverseLHToRef=function(t,r,n,i,e,a,s,y){a===void 0&&(a=!0),y===void 0&&(y=0);var f=1/Math.tan(t*.5),h=a?f/r:f,u=a?f:f*r,_=Math.tan(y);o.FromValuesToRef(h,0,0,0,0,u,0,_,0,0,-n,1,0,0,1,0,e),s&&e.multiplyToRef(V,e),e._updateIdentityStatus(!1)},o.PerspectiveFovRH=function(t,r,n,i,e,a,s){a===void 0&&(a=0),s===void 0&&(s=!1);var y=new o;return o.PerspectiveFovRHToRef(t,r,n,i,y,!0,e,a,s),y},o.PerspectiveFovRHToRef=function(t,r,n,i,e,a,s,y,f){a===void 0&&(a=!0),y===void 0&&(y=0),f===void 0&&(f=!1);var h=n,u=i,_=1/Math.tan(t*.5),x=a?_/r:_,p=a?_:_*r,R=f&&h===0?1:u!==0?-(u+h)/(u-h):-1,v=f&&h===0?2*u:u!==0?-2*u*h/(u-h):-2*h,d=Math.tan(y);o.FromValuesToRef(x,0,0,0,0,p,0,d,0,0,R,-1,0,0,v,0,e),s&&e.multiplyToRef(V,e),e._updateIdentityStatus(!1)},o.PerspectiveFovReverseRHToRef=function(t,r,n,i,e,a,s,y){a===void 0&&(a=!0),y===void 0&&(y=0);var f=1/Math.tan(t*.5),h=a?f/r:f,u=a?f:f*r,_=Math.tan(y);o.FromValuesToRef(h,0,0,0,0,u,0,_,0,0,-n,-1,0,0,-1,0,e),s&&e.multiplyToRef(V,e),e._updateIdentityStatus(!1)},o.PerspectiveFovWebVRToRef=function(t,r,n,i,e,a,s){e===void 0&&(e=!1),s===void 0&&(s=0);var y=e?-1:1,f=Math.tan(t.upDegrees*Math.PI/180),h=Math.tan(t.downDegrees*Math.PI/180),u=Math.tan(t.leftDegrees*Math.PI/180),_=Math.tan(t.rightDegrees*Math.PI/180),x=2/(u+_),p=2/(f+h),R=Math.tan(s),v=i._m;v[0]=x,v[1]=v[2]=v[3]=v[4]=0,v[5]=p,v[6]=0,v[7]=R,v[8]=(u-_)*x*.5,v[9]=-((f-h)*p*.5),v[10]=-n/(r-n),v[11]=1*y,v[12]=v[13]=v[15]=0,v[14]=-(2*n*r)/(n-r),a&&i.multiplyToRef(V,i),i.markAsUpdated()},o.GetFinalMatrix=function(t,r,n,i,e,a){var s=t.width,y=t.height,f=t.x,h=t.y,u=o.FromValues(s/2,0,0,0,0,-y/2,0,0,0,0,a-e,0,f+s/2,y/2+h,e,1),_=c.Matrix[0];return r.multiplyToRef(n,_),_.multiplyToRef(i,_),_.multiply(u)},o.GetAsMatrix2x2=function(t){var r=t.m,n=[r[0],r[1],r[4],r[5]];return X.MatrixUse64Bits?n:new Float32Array(n)},o.GetAsMatrix3x3=function(t){var r=t.m,n=[r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10]];return X.MatrixUse64Bits?n:new Float32Array(n)},o.Transpose=function(t){var r=new o;return o.TransposeToRef(t,r),r},o.TransposeToRef=function(t,r){var n=r._m,i=t.m;n[0]=i[0],n[1]=i[4],n[2]=i[8],n[3]=i[12],n[4]=i[1],n[5]=i[5],n[6]=i[9],n[7]=i[13],n[8]=i[2],n[9]=i[6],n[10]=i[10],n[11]=i[14],n[12]=i[3],n[13]=i[7],n[14]=i[11],n[15]=i[15],r.markAsUpdated(),r._updateIdentityStatus(t._isIdentity,t._isIdentityDirty)},o.Reflection=function(t){var r=new o;return o.ReflectionToRef(t,r),r},o.ReflectionToRef=function(t,r){t.normalize();var n=t.normal.x,i=t.normal.y,e=t.normal.z,a=-2*n,s=-2*i,y=-2*e;o.FromValuesToRef(a*n+1,s*n,y*n,0,a*i,s*i+1,y*i,0,a*e,s*e,y*e+1,0,a*t.d,s*t.d,y*t.d,1,r)},o.FromXYZAxesToRef=function(t,r,n,i){o.FromValuesToRef(t._x,t._y,t._z,0,r._x,r._y,r._z,0,n._x,n._y,n._z,0,0,0,0,1,i)},o.FromQuaternionToRef=function(t,r){var n=t._x*t._x,i=t._y*t._y,e=t._z*t._z,a=t._x*t._y,s=t._z*t._w,y=t._z*t._x,f=t._y*t._w,h=t._y*t._z,u=t._x*t._w;r._m[0]=1-2*(i+e),r._m[1]=2*(a+s),r._m[2]=2*(y-f),r._m[3]=0,r._m[4]=2*(a-s),r._m[5]=1-2*(e+n),r._m[6]=2*(h+u),r._m[7]=0,r._m[8]=2*(y+f),r._m[9]=2*(h-u),r._m[10]=1-2*(i+n),r._m[11]=0,r._m[12]=0,r._m[13]=0,r._m[14]=0,r._m[15]=1,r.markAsUpdated()},o._UpdateFlagSeed=0,o._IdentityReadOnly=o.Identity(),o}(),c=function(){function o(){}return o.Vector3=B.BuildTuple(11,T.Zero),o.Matrix=B.BuildTuple(2,E.Identity),o.Quaternion=B.BuildTuple(3,Q.Zero),o}(),J=function(){function o(){}return o.Vector2=B.BuildTuple(3,ot.Zero),o.Vector3=B.BuildTuple(13,T.Zero),o.Vector4=B.BuildTuple(3,$.Zero),o.Quaternion=B.BuildTuple(2,Q.Zero),o.Matrix=B.BuildTuple(8,E.Identity),o}();K("BABYLON.Vector2",ot);K("BABYLON.Vector3",T);K("BABYLON.Vector4",$);K("BABYLON.Matrix",E);var V=E.FromValues(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);export{E as Matrix,Q as Quaternion,J as TmpVectors,ot as Vector2,T as Vector3,$ as Vector4};
