import{_ as R,b as se,c as Kt,d as Gt,e as ur}from"./tslibtslib.b6e59fa7.js";import{M as Te,Q as fr,b as Ht,a as C,V as ne,C as Qt,q as cr,d as B,r as Oe,i as qe}from"./@babylonjscore_Maths.42afce42.js";import{f as Je,e as Ce,B as jt,b as z,C as lr,H as hr,o as dr,k as vr}from"./@babylonjscore_Materials.49fd589a.js";import{S as gr}from"./@babylonjscore_scene.b072ee35.js";import{b as _e,c as pr,F as mr}from"./@babylonjscore_PostProcesses.028f5b5f.js";import{E as oe,T as Xe,b as Ar}from"./@babylonjscore_Engines.a7c830c0.js";import"./@babylonjscore_Shaders.eb9cec10.js";import{M as at}from"./@babylonjscore_Meshes.896ebf22.js";import"./@babylonjscore_Lights.ab9a75bc.js";import"./@babylonjscore_Cameras.c6ce826c.js";import"./@babylonjscore_Bones.5bf57496.js";import"./@babylonjscore_Particles.6d203a63.js";import"./@babylonjscore_Morph.1da5b78b.js";import"./@babylonjscore_Instrumentation.d039f990.js";import{S as me}from"./@babylonjscore_Loading.1653106a.js";import{D as Cr}from"./@babylonjscore_Rendering.98162e5e.js";var Nt=function(){function e(t,r,n,i){r===void 0&&(r=!1),this.initialize(t,r,n,i)}return e.prototype.initialize=function(t,r,n,i){return r===void 0&&(r=!1),this.mask=t,this.skipNextObservers=r,this.target=n,this.currentTarget=i,this},e}(),_r=function(){function e(t,r,n){n===void 0&&(n=null),this.callback=t,this.mask=r,this.scope=n,this._willBeUnregistered=!1,this.unregisterOnNextCall=!1}return e}(),O=function(){function e(t){this._observers=new Array,this._eventState=new Nt(0),t&&(this._onObserverAdded=t)}return e.FromPromise=function(t,r){var n=new e;return t.then(function(i){n.notifyObservers(i)}).catch(function(i){if(r)r.notifyObservers(i);else throw i}),n},Object.defineProperty(e.prototype,"observers",{get:function(){return this._observers},enumerable:!1,configurable:!0}),e.prototype.add=function(t,r,n,i,a){if(r===void 0&&(r=-1),n===void 0&&(n=!1),i===void 0&&(i=null),a===void 0&&(a=!1),!t)return null;var o=new _r(t,r,i);return o.unregisterOnNextCall=a,n?this._observers.unshift(o):this._observers.push(o),this._onObserverAdded&&this._onObserverAdded(o),o},e.prototype.addOnce=function(t){return this.add(t,void 0,void 0,void 0,!0)},e.prototype.remove=function(t){if(!t)return!1;var r=this._observers.indexOf(t);return r!==-1?(this._deferUnregister(t),!0):!1},e.prototype.removeCallback=function(t,r){for(var n=0;n<this._observers.length;n++){var i=this._observers[n];if(!i._willBeUnregistered&&i.callback===t&&(!r||r===i.scope))return this._deferUnregister(i),!0}return!1},e.prototype._deferUnregister=function(t){var r=this;t.unregisterOnNextCall=!1,t._willBeUnregistered=!0,setTimeout(function(){r._remove(t)},0)},e.prototype._remove=function(t){if(!t)return!1;var r=this._observers.indexOf(t);return r!==-1?(this._observers.splice(r,1),!0):!1},e.prototype.makeObserverTopPriority=function(t){this._remove(t),this._observers.unshift(t)},e.prototype.makeObserverBottomPriority=function(t){this._remove(t),this._observers.push(t)},e.prototype.notifyObservers=function(t,r,n,i,a){if(r===void 0&&(r=-1),!this._observers.length)return!0;var o=this._eventState;o.mask=r,o.target=n,o.currentTarget=i,o.skipNextObservers=!1,o.lastReturnValue=t,o.userInfo=a;for(var s=0,f=this._observers;s<f.length;s++){var u=f[s];if(!u._willBeUnregistered&&(u.mask&r&&(u.scope?o.lastReturnValue=u.callback.apply(u.scope,[t,o]):o.lastReturnValue=u.callback(t,o),u.unregisterOnNextCall&&this._deferUnregister(u)),o.skipNextObservers))return!1}return!0},e.prototype.notifyObserversWithPromise=function(t,r,n,i,a){var o=this;r===void 0&&(r=-1);var s=Promise.resolve(t);if(!this._observers.length)return s;var f=this._eventState;return f.mask=r,f.target=n,f.currentTarget=i,f.skipNextObservers=!1,f.userInfo=a,this._observers.forEach(function(u){f.skipNextObservers||u._willBeUnregistered||u.mask&r&&(u.scope?s=s.then(function(c){return f.lastReturnValue=c,u.callback.apply(u.scope,[t,f])}):s=s.then(function(c){return f.lastReturnValue=c,u.callback(t,f)}),u.unregisterOnNextCall&&o._deferUnregister(u))}),s.then(function(){return t})},e.prototype.notifyObserver=function(t,r,n){if(n===void 0&&(n=-1),!t._willBeUnregistered){var i=this._eventState;i.mask=n,i.skipNextObservers=!1,t.callback(r,i),t.unregisterOnNextCall&&this._deferUnregister(t)}},e.prototype.hasObservers=function(){return this._observers.length>0},e.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},e.prototype.clone=function(){var t=new e;return t._observers=this._observers.slice(0),t},e.prototype.hasSpecificMask=function(t){t===void 0&&(t=-1);for(var r=0,n=this._observers;r<n.length;r++){var i=n[r];if(i.mask&t||i.mask===t)return!0}return!1},e}(),vi=function(){function e(){}return e.BuildArray=function(t,r){for(var n=[],i=0;i<t;++i)n.push(r());return n},e.BuildTuple=function(t,r){return e.BuildArray(t,r)},e}(),zt={};function gi(e,t){zt[e]=t}function br(e){return zt[e]}var P=function(){function e(){}return e._CheckLimit=function(t,r){var n=e._LogLimitOutputs[t];return n?n.current++:(n={limit:r,current:1},e._LogLimitOutputs[t]=n),n.current<=n.limit},e._GenerateLimitMessage=function(t,r){var n=e._LogLimitOutputs[t];if(!(!n||!e.MessageLimitReached)&&n.current===n.limit)switch(r){case 0:e.Log(e.MessageLimitReached.replace(/%LIMIT%/g,""+n.limit).replace(/%TYPE%/g,"log"));break;case 1:e.Warn(e.MessageLimitReached.replace(/%LIMIT%/g,""+n.limit).replace(/%TYPE%/g,"warning"));break;case 2:e.Error(e.MessageLimitReached.replace(/%LIMIT%/g,""+n.limit).replace(/%TYPE%/g,"error"));break}},e._AddLogEntry=function(t){e._LogCache=t+e._LogCache,e.OnNewCacheEntry&&e.OnNewCacheEntry(t)},e._FormatMessage=function(t){var r=function(i){return i<10?"0"+i:""+i},n=new Date;return"["+r(n.getHours())+":"+r(n.getMinutes())+":"+r(n.getSeconds())+"]: "+t},e._LogDisabled=function(t,r){},e._LogEnabled=function(t,r){if(!(r!==void 0&&!e._CheckLimit(t,r))){var n=e._FormatMessage(t);console.log("BJS - "+n);var i="<div style='color:white'>"+n+"</div><br>";e._AddLogEntry(i),e._GenerateLimitMessage(t,0)}},e._WarnDisabled=function(t,r){},e._WarnEnabled=function(t,r){if(!(r!==void 0&&!e._CheckLimit(t,r))){var n=e._FormatMessage(t);console.warn("BJS - "+n);var i="<div style='color:orange'>"+t+"</div><br>";e._AddLogEntry(i),e._GenerateLimitMessage(t,1)}},e._ErrorDisabled=function(t,r){},e._ErrorEnabled=function(t,r){if(!(r!==void 0&&!e._CheckLimit(t,r))){var n=e._FormatMessage(t);e.errorsCount++,console.error("BJS - "+n);var i="<div style='color:red'>"+n+"</div><br>";e._AddLogEntry(i),e._GenerateLimitMessage(t,2)}},Object.defineProperty(e,"LogCache",{get:function(){return e._LogCache},enumerable:!1,configurable:!0}),e.ClearLogCache=function(){e._LogCache="",e._LogLimitOutputs={},e.errorsCount=0},Object.defineProperty(e,"LogLevels",{set:function(t){(t&e.MessageLogLevel)===e.MessageLogLevel?e.Log=e._LogEnabled:e.Log=e._LogDisabled,(t&e.WarningLogLevel)===e.WarningLogLevel?e.Warn=e._WarnEnabled:e.Warn=e._WarnDisabled,(t&e.ErrorLogLevel)===e.ErrorLogLevel?e.Error=e._ErrorEnabled:e.Error=e._ErrorDisabled},enumerable:!1,configurable:!0}),e.NoneLogLevel=0,e.MessageLogLevel=1,e.WarningLogLevel=2,e.ErrorLogLevel=4,e.AllLogLevel=7,e.MessageLimitReached="Too many %TYPE%s (%LIMIT%), no more %TYPE%s will be reported for this message.",e._LogCache="",e._LogLimitOutputs={},e.errorsCount=0,e.Log=e._LogEnabled,e.Warn=e._WarnEnabled,e.Error=e._ErrorEnabled,e}(),ot=function(e,t){return!e||e.getClassName&&e.getClassName()==="Mesh"?null:e.getClassName&&e.getClassName()==="SubMesh"?e.clone(t):e.clone?e.clone():null};function wr(e){var t=[];do Object.getOwnPropertyNames(e).forEach(function(r){t.indexOf(r)===-1&&t.push(r)});while(e=Object.getPrototypeOf(e));return t}var yr=function(){function e(){}return e.DeepCopy=function(t,r,n,i){for(var a=wr(t),o=0,s=a;o<s.length;o++){var f=s[o];if(!(f[0]==="_"&&(!i||i.indexOf(f)===-1))&&!f.endsWith("Observable")&&!(n&&n.indexOf(f)!==-1)){var u=t[f],c=typeof u;if(c!=="function")try{if(c==="object")if(u instanceof Array){if(r[f]=[],u.length>0)if(typeof u[0]=="object")for(var l=0;l<u.length;l++){var h=ot(u[l],r);r[f].indexOf(h)===-1&&r[f].push(h)}else r[f]=u.slice(0)}else r[f]=ot(u,r);else r[f]=u}catch(d){P.Warn(d.message)}}}},e}(),Pr=function(){function e(){}return e.Eval=function(t,r){return t.match(/\([^()]*\)/g)?t=t.replace(/\([^()]*\)/g,function(n){return n=n.slice(1,n.length-1),e._HandleParenthesisContent(n,r)}):t=e._HandleParenthesisContent(t,r),t==="true"?!0:t==="false"?!1:e.Eval(t,r)},e._HandleParenthesisContent=function(t,r){r=r||function(c){return c==="true"};var n,i=t.split("||");for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var o=e._SimplifyNegation(i[a].trim()),s=o.split("&&");if(s.length>1)for(var f=0;f<s.length;++f){var u=e._SimplifyNegation(s[f].trim());if(u!=="true"&&u!=="false"?u[0]==="!"?n=!r(u.substring(1)):n=r(u):n=u==="true",!n){o="false";break}}if(n||o==="true"){n=!0;break}o!=="true"&&o!=="false"?o[0]==="!"?n=!r(o.substring(1)):n=r(o):n=o==="true"}return n?"true":"false"},e._SimplifyNegation=function(t){return t=t.replace(/^[\s!]+/,function(r){return r=r.replace(/[\s]/g,function(){return""}),r.length%2?"!":""}),t=t.trim(),t==="!true"?t="false":t==="!false"&&(t="true"),t},e}(),ve=function(){function e(){}return e.EnableFor=function(t){t._tags=t._tags||{},t.hasTags=function(){return e.HasTags(t)},t.addTags=function(r){return e.AddTagsTo(t,r)},t.removeTags=function(r){return e.RemoveTagsFrom(t,r)},t.matchesTagsQuery=function(r){return e.MatchesQuery(t,r)}},e.DisableFor=function(t){delete t._tags,delete t.hasTags,delete t.addTags,delete t.removeTags,delete t.matchesTagsQuery},e.HasTags=function(t){if(!t._tags)return!1;var r=t._tags;for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n))return!0;return!1},e.GetTags=function(t,r){if(r===void 0&&(r=!0),!t._tags)return null;if(r){var n=[];for(var i in t._tags)Object.prototype.hasOwnProperty.call(t._tags,i)&&t._tags[i]===!0&&n.push(i);return n.join(" ")}else return t._tags},e.AddTagsTo=function(t,r){if(!!r&&typeof r=="string"){var n=r.split(" ");n.forEach(function(i){e._AddTagTo(t,i)})}},e._AddTagTo=function(t,r){r=r.trim(),!(r===""||r==="true"||r==="false")&&(r.match(/[\s]/)||r.match(/^([!]|([|]|[&]){2})/)||(e.EnableFor(t),t._tags[r]=!0))},e.RemoveTagsFrom=function(t,r){if(!!e.HasTags(t)){var n=r.split(" ");for(var i in n)e._RemoveTagFrom(t,n[i])}},e._RemoveTagFrom=function(t,r){delete t._tags[r]},e.MatchesQuery=function(t,r){return r===void 0?!0:r===""?e.HasTags(t):Pr.Eval(r,function(n){return e.HasTags(t)&&t._tags[n]})},e}();function $(e){return"".concat(e," needs to be imported before as it contains a side-effect required by your code.")}var Pe={},we={},st=function(e,t,r){var n=e();ve&&ve.AddTagsTo(n,t.tags);var i=Ve(n);for(var a in i){var o=i[a],s=t[a],f=o.type;if(s!=null&&(a!=="uniqueId"||Rr.AllowLoadingUniqueId))switch(f){case 0:case 6:case 11:n[a]=s;break;case 1:n[a]=r||s.isRenderTarget?s:s.clone();break;case 2:case 3:case 4:case 5:case 7:case 10:case 12:n[a]=r?s:s.clone();break}}return n};function Tr(e){var t=e.getClassName();return Pe[t]||(Pe[t]={}),Pe[t]}function Ve(e){var t=e.getClassName();if(we[t])return we[t];we[t]={};for(var r=we[t],n=e,i=t;i;){var a=Pe[i];for(var o in a)r[o]=a[o];var s=void 0,f=!1;do{if(s=Object.getPrototypeOf(n),!s.getClassName){f=!0;break}if(s.getClassName()!==i)break;n=s}while(s);if(f)break;i=s.getClassName(),n=s}return r}function M(e,t){return function(r,n){var i=Tr(r);i[n]||(i[n]={type:e,sourceName:t})}}function Er(e,t){return t===void 0&&(t=null),function(r,n){var i=t||"_"+n;Object.defineProperty(r,n,{get:function(){return this[i]},set:function(a){typeof this.equals=="function"&&this.equals(a)||this[i]!==a&&(this[i]=a,r[e].apply(this))},enumerable:!0,configurable:!0})}}function pi(e,t){return t===void 0&&(t=null),Er(e,t)}function mi(e){return M(0,e)}function Ai(e){return M(1,e)}function Ci(e){return M(2,e)}function _i(e){return M(3,e)}function bi(e){return M(4,e)}function wi(e){return M(5,e)}function yi(e){return M(6,e)}function Pi(e){return M(7,e)}function Ti(e){return M(8,e)}function Ei(e){return M(9,e)}function Ri(e){return M(10,e)}function Bi(e){return M(12,e)}function Di(e){return M(11,e)}var Rr=function(){function e(){}return e.AppendSerializedAnimations=function(t,r){if(t.animations){r.animations=[];for(var n=0;n<t.animations.length;n++){var i=t.animations[n];r.animations.push(i.serialize())}}},e.Serialize=function(t,r){r||(r={}),ve&&(r.tags=ve.GetTags(t));var n=Ve(t);for(var i in n){var a=n[i],o=a.sourceName||i,s=a.type,f=t[i];if(f!=null&&(i!=="uniqueId"||e.AllowLoadingUniqueId))switch(s){case 0:r[o]=f;break;case 1:r[o]=f.serialize();break;case 2:r[o]=f.asArray();break;case 3:r[o]=f.serialize();break;case 4:r[o]=f.asArray();break;case 5:r[o]=f.asArray();break;case 6:r[o]=f.id;break;case 7:r[o]=f.serialize();break;case 8:r[o]=f.asArray();break;case 9:r[o]=f.serialize();break;case 10:r[o]=f.asArray();break;case 11:r[o]=f.id;break;case 12:r[o]=f.asArray();break}}return r},e.Parse=function(t,r,n,i){i===void 0&&(i=null);var a=t();i||(i=""),ve&&ve.AddTagsTo(a,r.tags);var o=Ve(a);for(var s in o){var f=o[s],u=r[f.sourceName||s],c=f.type;if(u!=null&&(s!=="uniqueId"||e.AllowLoadingUniqueId)){var l=a;switch(c){case 0:l[s]=u;break;case 1:n&&(l[s]=e._TextureParser(u,n,i));break;case 2:l[s]=Qt.FromArray(u);break;case 3:l[s]=e._FresnelParametersParser(u);break;case 4:l[s]=ne.FromArray(u);break;case 5:l[s]=C.FromArray(u);break;case 6:n&&(l[s]=n.getLastMeshById(u));break;case 7:l[s]=e._ColorCurvesParser(u);break;case 8:l[s]=Ht.FromArray(u);break;case 9:l[s]=e._ImageProcessingConfigurationParser(u);break;case 10:l[s]=fr.FromArray(u);break;case 11:n&&(l[s]=n.getCameraById(u));break;case 12:l[s]=Te.FromArray(u);break}}}return a},e.Clone=function(t,r){return st(t,r,!1)},e.Instanciate=function(t,r){return st(t,r,!0)},e.AllowLoadingUniqueId=!1,e._ImageProcessingConfigurationParser=function(t){throw $("ImageProcessingConfiguration")},e._FresnelParametersParser=function(t){throw $("FresnelParameters")},e._ColorCurvesParser=function(t){throw $("ColorCurves")},e._TextureParser=function(t,r,n){throw $("Texture")},e}();function ut(e,t,r,n){var i=r.value;r.value=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var s=i;if(typeof _native!="undefined"&&_native[t]){var f=_native[t];n?s=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return n.apply(void 0,u)?f.apply(void 0,u):i.apply(void 0,u)}:s=f}return e[t]=s,s.apply(void 0,a)}}ut.filter=function(e){return function(t,r,n){return ut(t,r,n,e)}};function Br(){return typeof _native!="undefined"&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest}var Ee=function(){function e(){this._xhr=Br(),this._requestURL=""}return e.prototype._injectCustomRequestHeaders=function(){if(!this._shouldSkipRequestModifications(this._requestURL))for(var t in e.CustomRequestHeaders){var r=e.CustomRequestHeaders[t];r&&this._xhr.setRequestHeader(t,r)}},e.prototype._shouldSkipRequestModifications=function(t){return e.SkipRequestModificationForBabylonCDN&&(t.includes("preview.babylonjs.com")||t.includes("cdn.babylonjs.com"))},Object.defineProperty(e.prototype,"onprogress",{get:function(){return this._xhr.onprogress},set:function(t){this._xhr.onprogress=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._xhr.readyState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._xhr.status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusText",{get:function(){return this._xhr.statusText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"response",{get:function(){return this._xhr.response},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseURL",{get:function(){return this._xhr.responseURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseText",{get:function(){return this._xhr.responseText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseType",{get:function(){return this._xhr.responseType},set:function(t){this._xhr.responseType=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeout",{get:function(){return this._xhr.timeout},set:function(t){this._xhr.timeout=t},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(t,r,n){this._xhr.addEventListener(t,r,n)},e.prototype.removeEventListener=function(t,r,n){this._xhr.removeEventListener(t,r,n)},e.prototype.abort=function(){this._xhr.abort()},e.prototype.send=function(t){e.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(t)},e.prototype.open=function(t,r){for(var n=0,i=e.CustomRequestModifiers;n<i.length;n++){var a=i[n];if(this._shouldSkipRequestModifications(r))return;a(this._xhr,r)}return r=r.replace("file:http:","http:"),r=r.replace("file:https:","https:"),this._requestURL=r,this._xhr.open(t,r,!0)},e.prototype.setRequestHeader=function(t,r){this._xhr.setRequestHeader(t,r)},e.prototype.getResponseHeader=function(t){return this._xhr.getResponseHeader(t)},e.CustomRequestHeaders={},e.CustomRequestModifiers=new Array,e.SkipRequestModificationForBabylonCDN=!0,e}();function ee(){return typeof window!="undefined"}function Xt(){return typeof navigator!="undefined"}function Dr(){return typeof document!="undefined"}function Vt(e){for(var t="",r=e.firstChild;r;)r.nodeType===3&&(t+=r.textContent),r=r.nextSibling;return t}var Fr={IsWindowObjectExist:ee,IsNavigatorAvailable:Xt,IsDocumentAvailable:Dr,GetDOMTextContent:Vt},X=function(){function e(){}return Object.defineProperty(e,"Now",{get:function(){return Fr.IsWindowObjectExist()&&window.performance&&window.performance.now?window.performance.now():Date.now()},enumerable:!1,configurable:!0}),e}(),Ae=function(){function e(){}return e.FilesToLoad={},e}(),Lr=function(){function e(){}return e.ExponentialBackoff=function(t,r){return t===void 0&&(t=3),r===void 0&&(r=500),function(n,i,a){return i.status!==0||a>=t||n.indexOf("file:")!==-1?-1:Math.pow(2,a)*r}},e}(),be=function(e){R(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t._setPrototypeOf=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},t}(Error),We={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002},Ze=function(e){R(t,e);function t(r,n,i){var a=e.call(this,r)||this;return a.errorCode=n,a.innerError=i,a.name="RuntimeError",be._setPrototypeOf(a,t.prototype),a}return t}(be),Or=function(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);for(var t="",r=0;r<e.byteLength;r++)t+=String.fromCharCode(e[r]);return t},Sr=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",n,i,a,o,s,f,u,c=0,l=ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e);c<l.length;)n=l[c++],i=c<l.length?l[c++]:Number.NaN,a=c<l.length?l[c++]:Number.NaN,o=n>>2,s=(n&3)<<4|i>>4,f=(i&15)<<2|a>>6,u=a&63,isNaN(i)?f=u=64:isNaN(a)&&(u=64),r+=t.charAt(o)+t.charAt(s)+t.charAt(f)+t.charAt(u);return r},Yt=function(e){return atob(e)},Ur=function(e){for(var t=Yt(e),r=t.length,n=new Uint8Array(new ArrayBuffer(r)),i=0;i<r;i++)n[i]=t.charCodeAt(i);return n.buffer},qt=function(){function e(){}return e.SetImmediate=function(t){ee()&&window.setImmediate?window.setImmediate(t):setTimeout(t,1)},e}(),Mr=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i),ft=function(e){R(t,e);function t(r,n){var i=e.call(this,r,We.LoadFileError)||this;return i.name="LoadFileError",be._setPrototypeOf(i,t.prototype),n instanceof Ee?i.request=n:i.file=n,i}return t}(Ze),ct=function(e){R(t,e);function t(r,n){var i=e.call(this,r,We.RequestFileError)||this;return i.request=n,i.name="RequestFileError",be._setPrototypeOf(i,t.prototype),i}return t}(Ze),xr=function(e){R(t,e);function t(r,n){var i=e.call(this,r,We.ReadFileError)||this;return i.file=n,i.name="ReadFileError",be._setPrototypeOf(i,t.prototype),i}return t}(Ze),F={DefaultRetryStrategy:Lr.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:function(e){return e}},Jt=function(e){return e=e.replace(/#/gm,"%23"),e},$e=function(e,t){if(!(e&&e.indexOf("data:")===0)&&F.CorsBehavior)if(typeof F.CorsBehavior=="string"||F.CorsBehavior instanceof String)t.crossOrigin=F.CorsBehavior;else{var r=F.CorsBehavior(e);r&&(t.crossOrigin=r)}},et=function(e,t,r,n,i,a){var o;i===void 0&&(i="");var s,f=!1;e instanceof ArrayBuffer||ArrayBuffer.isView(e)?typeof Blob!="undefined"&&typeof URL!="undefined"?(s=URL.createObjectURL(new Blob([e],{type:i})),f=!0):s="data:".concat(i,";base64,")+Sr(e):e instanceof Blob?(s=URL.createObjectURL(e),f=!0):(s=Jt(e),s=F.PreprocessUrl(e));var u=oe.LastCreatedEngine,c=function(A){if(r){var _=s||e.toString();r("Error while trying to load image: ".concat(_.indexOf("http")===0||_.length<=128?_:_.slice(0,128)+"..."),A)}};if(typeof Image=="undefined"||((o=u==null?void 0:u._features.forceBitmapOverHTMLImageElement)!==null&&o!==void 0?o:!1))return ue(s,function(A){u.createImageBitmap(new Blob([A],{type:i}),se({premultiplyAlpha:"none"},a)).then(function(_){t(_),f&&URL.revokeObjectURL(s)}).catch(function(_){r&&r("Error while trying to load image: "+e,_)})},void 0,n||void 0,!0,function(A,_){c(_)}),null;var l=new Image;$e(s,l);var h=function(){l.removeEventListener("load",h),l.removeEventListener("error",d),t(l),f&&l.src&&URL.revokeObjectURL(l.src)},d=function(A){l.removeEventListener("load",h),l.removeEventListener("error",d),c(A),f&&l.src&&URL.revokeObjectURL(l.src)};l.addEventListener("load",h),l.addEventListener("error",d);var v=function(){ue(s,function(A){var _=new Blob([A]),b=URL.createObjectURL(_);l.src=b},void 0,n||void 0,!0,function(A,_){c(_)})},g=function(){n&&n.loadImage(s,l)};if(s.substr(0,5)!=="blob:"&&s.substr(0,5)!=="data:"&&n&&n.enableTexturesOffline)n.open(g,v);else{if(s.indexOf("file:")!==-1){var p=decodeURIComponent(s.substring(5).toLowerCase());if(Ae.FilesToLoad[p]&&typeof URL!="undefined"){try{var m=void 0;try{m=URL.createObjectURL(Ae.FilesToLoad[p])}catch{m=URL.createObjectURL(Ae.FilesToLoad[p])}l.src=m,f=!0}catch{l.src=""}return l}}v()}return l},Re=function(e,t,r,n,i){var a=new FileReader,o={onCompleteObservable:new O,abort:function(){return a.abort()}};return a.onloadend=function(){return o.onCompleteObservable.notifyObservers(o)},i&&(a.onerror=function(){i(new xr("Unable to read ".concat(e.name),e))}),a.onload=function(s){t(s.target.result)},r&&(a.onprogress=r),n?a.readAsArrayBuffer(e):a.readAsText(e),o},ue=function(e,t,r,n,i,a,o){if(e.name)return Re(e,t,r,i,a?function(l){a(void 0,l)}:void 0);var s=e;if(s.indexOf("file:")!==-1){var f=decodeURIComponent(s.substring(5).toLowerCase());f.indexOf("./")===0&&(f=f.substring(2));var u=Ae.FilesToLoad[f];if(u)return Re(u,t,r,i,a?function(l){return a(void 0,new ft(l.message,l.file))}:void 0)}if(tt(s)){var c={onCompleteObservable:new O,abort:function(){return function(){}}};try{t(i?rt(s):$t(s))}catch(l){a?a(void 0,l):P.Error(l.message||"Failed to parse the Data URL")}return qt.SetImmediate(function(){c.onCompleteObservable.notifyObservers(c)}),c}return Wt(s,function(l,h){t(l,h?h.responseURL:void 0)},r,n,i,a?function(l){a(l.request,new ft(l.message,l.request))}:void 0,o)},Wt=function(e,t,r,n,i,a,o){e=Jt(e),e=F.PreprocessUrl(e);var s=F.BaseUrl+e,f=!1,u={onCompleteObservable:new O,abort:function(){return f=!0}},c=function(){var d=new Ee,v=null,g,p=function(){!d||(r&&d.removeEventListener("progress",r),g&&d.removeEventListener("readystatechange",g),d.removeEventListener("loadend",m))},m=function(){p(),u.onCompleteObservable.notifyObservers(u),u.onCompleteObservable.clear(),r=void 0,g=null,m=null,a=void 0,o=void 0,t=void 0};u.abort=function(){f=!0,m&&m(),d&&d.readyState!==(XMLHttpRequest.DONE||4)&&d.abort(),v!==null&&(clearTimeout(v),v=null),d=null};var A=function(b){var w=b.message||"Unknown error";a&&d?a(new ct(w,d)):P.Error(w)},_=function(b){if(!!d){if(d.open("GET",s),o)try{o(d)}catch(w){A(w);return}i&&(d.responseType="arraybuffer"),r&&d.addEventListener("progress",r),m&&d.addEventListener("loadend",m),g=function(){if(!(f||!d)&&d.readyState===(XMLHttpRequest.DONE||4)){if(g&&d.removeEventListener("readystatechange",g),d.status>=200&&d.status<300||d.status===0&&(!ee()||Zt())){try{t&&t(i?d.response:d.responseText,d)}catch(T){A(T)}return}var w=F.DefaultRetryStrategy;if(w){var E=w(s,d,b);if(E!==-1){p(),d=new Ee,v=setTimeout(function(){return _(b+1)},E);return}}var y=new ct("Error status: "+d.status+" "+d.statusText+" - Unable to load "+s,d);a&&a(y)}},d.addEventListener("readystatechange",g),d.send()}};_(0)};if(n&&n.enableSceneOffline){var l=function(d){d&&d.status>400?a&&a(d):c()},h=function(){n&&n.loadFile(F.BaseUrl+e,function(d){!f&&t&&t(d),u.onCompleteObservable.notifyObservers(u)},r?function(d){!f&&r&&r(d)}:void 0,l,i)};n.open(h,l)}else c();return u},Zt=function(){return typeof location!="undefined"&&location.protocol==="file:"},tt=function(e){return Mr.test(e)};function rt(e){return Ur(e.split(",")[1])}var $t=function(e){return Yt(e.split(",")[1])},Ir=function(){Xe._FileToolsLoadImage=et,Xe._FileToolsLoadFile=ue,Ar._FileToolsLoadFile=ue};Ir();var pe,kr=function(e,t,r,n,i,a,o,s,f,u){pe={DecodeBase64UrlToBinary:e,DecodeBase64UrlToString:t,DefaultRetryStrategy:r.DefaultRetryStrategy,BaseUrl:r.BaseUrl,CorsBehavior:r.CorsBehavior,PreprocessUrl:r.PreprocessUrl,IsBase64DataUrl:n,IsFileURL:i,LoadFile:a,LoadImage:o,ReadFile:s,RequestFile:f,SetCorsBehavior:u},Object.defineProperty(pe,"DefaultRetryStrategy",{get:function(){return r.DefaultRetryStrategy},set:function(c){r.DefaultRetryStrategy=c}}),Object.defineProperty(pe,"BaseUrl",{get:function(){return r.BaseUrl},set:function(c){r.BaseUrl=c}}),Object.defineProperty(pe,"PreprocessUrl",{get:function(){return r.PreprocessUrl},set:function(c){r.PreprocessUrl=c}}),Object.defineProperty(pe,"CorsBehavior",{get:function(){return r.CorsBehavior},set:function(c){r.CorsBehavior=c}})};kr(rt,$t,F,tt,Zt,ue,et,Re,Wt,$e);var Se=function(){function e(){}return e.Instantiate=function(t){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[t])return this.RegisteredExternalClasses[t];var r=br(t);if(r)return r;P.Warn(t+" not found, you may have missed an import.");for(var n=t.split("."),i=window||this,a=0,o=n.length;a<o;a++)i=i[n[a]];return typeof i!="function"?null:i},e.RegisteredExternalClasses={},e}();function Kr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,r=e==="x"?t:t&3|8;return r.toString(16)})}var D=function(){function e(){}return Object.defineProperty(e,"BaseUrl",{get:function(){return F.BaseUrl},set:function(t){F.BaseUrl=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DefaultRetryStrategy",{get:function(){return F.DefaultRetryStrategy},set:function(t){F.DefaultRetryStrategy=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"CorsBehavior",{get:function(){return F.CorsBehavior},set:function(t){F.CorsBehavior=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"UseFallbackTexture",{get:function(){return oe.UseFallbackTexture},set:function(t){oe.UseFallbackTexture=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"RegisteredExternalClasses",{get:function(){return Se.RegisteredExternalClasses},set:function(t){Se.RegisteredExternalClasses=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"fallbackTexture",{get:function(){return oe.FallbackTexture},set:function(t){oe.FallbackTexture=t},enumerable:!1,configurable:!0}),e.FetchToRef=function(t,r,n,i,a,o){var s=Math.abs(t)*n%n|0,f=Math.abs(r)*i%i|0,u=(s+f*n)*4;o.r=a[u]/255,o.g=a[u+1]/255,o.b=a[u+2]/255,o.a=a[u+3]/255},e.Mix=function(t,r,n){return t*(1-n)+r*n},e.Instantiate=function(t){return Se.Instantiate(t)},e.SetImmediate=function(t){qt.SetImmediate(t)},e.IsExponentOfTwo=function(t){var r=1;do r*=2;while(r<t);return r===t},e.FloatRound=function(t){return Math.fround?Math.fround(t):(e._TmpFloatArray[0]=t,e._TmpFloatArray[0])},e.GetFilename=function(t){var r=t.lastIndexOf("/");return r<0?t:t.substring(r+1)},e.GetFolderPath=function(t,r){r===void 0&&(r=!1);var n=t.lastIndexOf("/");return n<0?r?t:"":t.substring(0,n+1)},e.ToDegrees=function(t){return t*180/Math.PI},e.ToRadians=function(t){return t*Math.PI/180},e.MakeArray=function(t,r){return r!==!0&&(t===void 0||t==null)?null:Array.isArray(t)?t:[t]},e.GetPointerPrefix=function(t){var r="pointer";return ee()&&!window.PointerEvent&&(r="mouse"),t._badDesktopOS&&!t._badOS&&!(document&&"ontouchend"in document)&&(r="mouse"),r},e.SetCorsBehavior=function(t,r){$e(t,r)},e.SetReferrerPolicyBehavior=function(t,r){r.referrerPolicy=t},e.CleanUrl=function(t){return t=t.replace(/#/gm,"%23"),t},Object.defineProperty(e,"PreprocessUrl",{get:function(){return F.PreprocessUrl},set:function(t){F.PreprocessUrl=t},enumerable:!1,configurable:!0}),e.LoadImage=function(t,r,n,i,a,o){return et(t,r,n,i,a,o)},e.LoadFile=function(t,r,n,i,a,o){return ue(t,r,n,i,a,o)},e.LoadFileAsync=function(t,r){return r===void 0&&(r=!0),new Promise(function(n,i){ue(t,function(a){n(a)},void 0,void 0,r,function(a,o){i(o)})})},e.LoadScript=function(t,r,n,i){if(typeof self.importScripts=="function"){try{self.importScripts(t),r()}catch(s){n==null||n("Unable to load script '".concat(t,"' in worker"),s)}return}else if(!ee()){n==null||n("Cannot load script '".concat(t,"' outside of a window or a worker"));return}var a=document.getElementsByTagName("head")[0],o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",t),i&&(o.id=i),o.onload=function(){r&&r()},o.onerror=function(s){n&&n("Unable to load script '".concat(t,"'"),s)},a.appendChild(o)},e.LoadScriptAsync=function(t){var r=this;return new Promise(function(n,i){r.LoadScript(t,function(){n()},function(a,o){i(o)})})},e.ReadFileAsDataURL=function(t,r,n){var i=new FileReader,a={onCompleteObservable:new O,abort:function(){return i.abort()}};return i.onloadend=function(){a.onCompleteObservable.notifyObservers(a)},i.onload=function(o){r(o.target.result)},i.onprogress=n,i.readAsDataURL(t),a},e.ReadFile=function(t,r,n,i,a){return Re(t,r,n,i,a)},e.FileAsURL=function(t){var r=new Blob([t]),n=window.URL||window.webkitURL,i=n.createObjectURL(r);return i},e.Format=function(t,r){return r===void 0&&(r=2),t.toFixed(r)},e.DeepCopy=function(t,r,n,i){yr.DeepCopy(t,r,n,i)},e.IsEmpty=function(t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))return!1;return!0},e.RegisterTopRootEvents=function(t,r){for(var n=0;n<r.length;n++){var i=r[n];t.addEventListener(i.name,i.handler,!1);try{window.parent&&window.parent.addEventListener(i.name,i.handler,!1)}catch{}}},e.UnregisterTopRootEvents=function(t,r){for(var n=0;n<r.length;n++){var i=r[n];t.removeEventListener(i.name,i.handler);try{t.parent&&t.parent.removeEventListener(i.name,i.handler)}catch{}}},e.DumpFramebuffer=function(t,r,n,i,a,o){return a===void 0&&(a="image/png"),Kt(this,void 0,void 0,function(){var s,f;return Gt(this,function(u){switch(u.label){case 0:return[4,n.readPixels(0,0,t,r)];case 1:return s=u.sent(),f=new Uint8Array(s.buffer),e.DumpData(t,r,f,i,a,o,!0),[2]}})})},e.DumpData=function(t,r,n,i,a,o,s,f,u){a===void 0&&(a="image/png"),s===void 0&&(s=!1),f===void 0&&(f=!1),e._ScreenshotCanvas||(e._ScreenshotCanvas=document.createElement("canvas")),e._ScreenshotCanvas.width=t,e._ScreenshotCanvas.height=r;var c=e._ScreenshotCanvas.getContext("2d");if(c){if(n instanceof Float32Array){for(var l=new Uint8Array(n.length),h=n.length;h--;){var d=n[h];l[h]=d<0?0:d>1?1:Math.round(d*255)}n=l}var v=c.createImageData(t,r),g=v.data;g.set(n),c.putImageData(v,0,0);var p=e._ScreenshotCanvas;if(s){var m=document.createElement("canvas");m.width=t,m.height=r;var A=m.getContext("2d");if(!A)return;A.translate(0,r),A.scale(1,-1),A.drawImage(e._ScreenshotCanvas,0,0),p=m}f?e.ToBlob(p,function(_){var b=new FileReader;b.onload=function(w){var E=w.target.result;i&&i(E)},b.readAsArrayBuffer(_)},a,u):e.EncodeScreenshotCanvasData(i,a,o,p,u)}},e.DumpDataAsync=function(t,r,n,i,a,o,s,f){return i===void 0&&(i="image/png"),o===void 0&&(o=!1),s===void 0&&(s=!1),new Promise(function(u){e.DumpData(t,r,n,function(c){return u(c)},i,a,o,s,f)})},e.ToBlob=function(t,r,n,i){n===void 0&&(n="image/png"),t.toBlob||(t.toBlob=function(a,o,s){var f=this;setTimeout(function(){for(var u=atob(f.toDataURL(o,s).split(",")[1]),c=u.length,l=new Uint8Array(c),h=0;h<c;h++)l[h]=u.charCodeAt(h);a(new Blob([l]))})}),t.toBlob(function(a){r(a)},n,i)},e.DownloadBlob=function(t,r){if("download"in document.createElement("a")){if(!r){var n=new Date,i=(n.getFullYear()+"-"+(n.getMonth()+1)).slice(2)+"-"+n.getDate()+"_"+n.getHours()+"-"+("0"+n.getMinutes()).slice(-2);r="screenshot_"+i+".png"}e.Download(t,r)}else if(t&&typeof URL!="undefined"){var a=URL.createObjectURL(t),o=window.open("");if(!o)return;var s=o.document.createElement("img");s.onload=function(){URL.revokeObjectURL(a)},s.src=a,o.document.body.appendChild(s)}},e.EncodeScreenshotCanvasData=function(t,r,n,i,a){if(r===void 0&&(r="image/png"),t){var o=(i!=null?i:e._ScreenshotCanvas).toDataURL(r,a);t(o)}else this.ToBlob(i!=null?i:e._ScreenshotCanvas,function(s){s&&e.DownloadBlob(s,n)},r,a)},e.Download=function(t,r){if(navigator&&navigator.msSaveBlob){navigator.msSaveBlob(t,r);return}if(typeof URL!="undefined"){var n=window.URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.style.display="none",i.href=n,i.download=r,i.addEventListener("click",function(){i.parentElement&&i.parentElement.removeChild(i)}),i.click(),window.URL.revokeObjectURL(n)}},e.BackCompatCameraNoPreventDefault=function(t){return typeof t[0]=="boolean"?t[0]:typeof t[1]=="boolean"?t[1]:!1},e.CreateScreenshot=function(t,r,n,i,a){throw $("ScreenshotTools")},e.CreateScreenshotAsync=function(t,r,n,i){throw $("ScreenshotTools")},e.CreateScreenshotUsingRenderTarget=function(t,r,n,i,a,o,s,f){throw $("ScreenshotTools")},e.CreateScreenshotUsingRenderTargetAsync=function(t,r,n,i,a,o,s){throw $("ScreenshotTools")},e.RandomId=function(){return Kr()},e.IsBase64=function(t){return tt(t)},e.DecodeBase64=function(t){return rt(t)},Object.defineProperty(e,"errorsCount",{get:function(){return P.errorsCount},enumerable:!1,configurable:!0}),e.Log=function(t){P.Log(t)},e.Warn=function(t){P.Warn(t)},e.Error=function(t){P.Error(t)},Object.defineProperty(e,"LogCache",{get:function(){return P.LogCache},enumerable:!1,configurable:!0}),e.ClearLogCache=function(){P.ClearLogCache()},Object.defineProperty(e,"LogLevels",{set:function(t){P.LogLevels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"PerformanceLogLevel",{set:function(t){if((t&e.PerformanceUserMarkLogLevel)===e.PerformanceUserMarkLogLevel){e.StartPerformanceCounter=e._StartUserMark,e.EndPerformanceCounter=e._EndUserMark;return}if((t&e.PerformanceConsoleLogLevel)===e.PerformanceConsoleLogLevel){e.StartPerformanceCounter=e._StartPerformanceConsole,e.EndPerformanceCounter=e._EndPerformanceConsole;return}e.StartPerformanceCounter=e._StartPerformanceCounterDisabled,e.EndPerformanceCounter=e._EndPerformanceCounterDisabled},enumerable:!1,configurable:!0}),e._StartPerformanceCounterDisabled=function(t,r){},e._EndPerformanceCounterDisabled=function(t,r){},e._StartUserMark=function(t,r){if(r===void 0&&(r=!0),!e._Performance){if(!ee())return;e._Performance=window.performance}!r||!e._Performance.mark||e._Performance.mark(t+"-Begin")},e._EndUserMark=function(t,r){r===void 0&&(r=!0),!(!r||!e._Performance.mark)&&(e._Performance.mark(t+"-End"),e._Performance.measure(t,t+"-Begin",t+"-End"))},e._StartPerformanceConsole=function(t,r){r===void 0&&(r=!0),r&&(e._StartUserMark(t,r),console.time&&console.time(t))},e._EndPerformanceConsole=function(t,r){r===void 0&&(r=!0),r&&(e._EndUserMark(t,r),console.timeEnd(t))},Object.defineProperty(e,"Now",{get:function(){return X.Now},enumerable:!1,configurable:!0}),e.GetClassName=function(t,r){r===void 0&&(r=!1);var n=null;if(!r&&t.getClassName)n=t.getClassName();else{if(t instanceof Object){var i=r?t:Object.getPrototypeOf(t);n=i.constructor.__bjsclassName__}n||(n=typeof t)}return n},e.First=function(t,r){for(var n=0,i=t;n<i.length;n++){var a=i[n];if(r(a))return a}return null},e.getFullClassName=function(t,r){r===void 0&&(r=!1);var n=null,i=null;if(!r&&t.getClassName)n=t.getClassName();else{if(t instanceof Object){var a=r?t:Object.getPrototypeOf(t);n=a.constructor.__bjsclassName__,i=a.constructor.__bjsmoduleName__}n||(n=typeof t)}return n?(i!=null?i+".":"")+n:null},e.DelayAsync=function(t){return new Promise(function(r){setTimeout(function(){r()},t)})},e.IsSafari=function(){return Xt()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1},e.UseCustomRequestHeaders=!1,e.CustomRequestHeaders=Ee.CustomRequestHeaders,e._TmpFloatArray=new Float32Array(1),e.GetDOMTextContent=Vt,e.GetAbsoluteUrl=typeof document=="object"?function(t){var r=document.createElement("a");return r.href=t,r.href}:typeof URL=="function"&&typeof location=="object"?function(t){return new URL(t,location.origin).href}:function(){throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},e.NoneLogLevel=P.NoneLogLevel,e.MessageLogLevel=P.MessageLogLevel,e.WarningLogLevel=P.WarningLogLevel,e.ErrorLogLevel=P.ErrorLogLevel,e.AllLogLevel=P.AllLogLevel,e.IsWindowObjectExist=ee,e.PerformanceNoneLogLevel=0,e.PerformanceUserMarkLogLevel=1,e.PerformanceConsoleLogLevel=2,e.StartPerformanceCounter=e._StartPerformanceCounterDisabled,e.EndPerformanceCounter=e._EndPerformanceCounterDisabled,e}(),Fi=function(){function e(t,r,n,i){i===void 0&&(i=0),this.iterations=t,this.index=i-1,this._done=!1,this._fn=r,this._successCallback=n}return e.prototype.executeNext=function(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())},e.prototype.breakLoop=function(){this._done=!0,this._successCallback()},e.Run=function(t,r,n,i){i===void 0&&(i=0);var a=new e(t,r,n,i);return a.executeNext(),a},e.SyncAsyncForLoop=function(t,r,n,i,a,o){return o===void 0&&(o=0),e.Run(Math.ceil(t/r),function(s){a&&a()?s.breakLoop():setTimeout(function(){for(var f=0;f<r;++f){var u=s.index*r+f;if(u>=t)break;if(n(u),a&&a()){s.breakLoop();break}}s.executeNext()},o)},i)},e}();oe.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z";var Gr=function(){function e(t){this.length=0,this.data=new Array(t),this._id=e._GlobalId++}return e.prototype.push=function(t){this.data[this.length++]=t,this.length>this.data.length&&(this.data.length*=2)},e.prototype.forEach=function(t){for(var r=0;r<this.length;r++)t(this.data[r])},e.prototype.sort=function(t){this.data.sort(t)},e.prototype.reset=function(){this.length=0},e.prototype.dispose=function(){this.reset(),this.data&&(this.data.length=0)},e.prototype.concat=function(t){if(t.length!==0){this.length+t.length>this.data.length&&(this.data.length=(this.length+t.length)*2);for(var r=0;r<t.length;r++)this.data[this.length++]=(t.data||t)[r]}},e.prototype.indexOf=function(t){var r=this.data.indexOf(t);return r>=this.length?-1:r},e.prototype.contains=function(t){return this.indexOf(t)!==-1},e._GlobalId=0,e}(),Li=function(e){R(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._duplicateId=0,r}return t.prototype.push=function(r){e.prototype.push.call(this,r),r.__smartArrayFlags||(r.__smartArrayFlags={}),r.__smartArrayFlags[this._id]=this._duplicateId},t.prototype.pushNoDuplicate=function(r){return r.__smartArrayFlags&&r.__smartArrayFlags[this._id]===this._duplicateId?!1:(this.push(r),!0)},t.prototype.reset=function(){e.prototype.reset.call(this),this._duplicateId++},t.prototype.concatWithNoDuplicate=function(r){if(r.length!==0){this.length+r.length>this.data.length&&(this.data.length=(this.length+r.length)*2);for(var n=0;n<r.length;n++){var i=(r.data||r)[n];this.pushNoDuplicate(i)}}},t}(Gr),Hr=function(){function e(){this._count=0,this._data={}}return e.prototype.copyFrom=function(t){var r=this;this.clear(),t.forEach(function(n,i){return r.add(n,i)})},e.prototype.get=function(t){var r=this._data[t];if(r!==void 0)return r},e.prototype.getOrAddWithFactory=function(t,r){var n=this.get(t);return n!==void 0||(n=r(t),n&&this.add(t,n)),n},e.prototype.getOrAdd=function(t,r){var n=this.get(t);return n!==void 0?n:(this.add(t,r),r)},e.prototype.contains=function(t){return this._data[t]!==void 0},e.prototype.add=function(t,r){return this._data[t]!==void 0?!1:(this._data[t]=r,++this._count,!0)},e.prototype.set=function(t,r){return this._data[t]===void 0?!1:(this._data[t]=r,!0)},e.prototype.getAndRemove=function(t){var r=this.get(t);return r!==void 0?(delete this._data[t],--this._count,r):null},e.prototype.remove=function(t){return this.contains(t)?(delete this._data[t],--this._count,!0):!1},e.prototype.clear=function(){this._data={},this._count=0},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){for(var r in this._data){var n=this._data[r];t(r,n)}},e.prototype.first=function(t){for(var r in this._data){var n=this._data[r],i=t(r,n);if(i)return i}return null},e}(),Oi=function(){function e(){this._startMonitoringTime=0,this._min=0,this._max=0,this._average=0,this._lastSecAverage=0,this._current=0,this._totalValueCount=0,this._totalAccumulated=0,this._lastSecAccumulated=0,this._lastSecTime=0,this._lastSecValueCount=0}return Object.defineProperty(e.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"average",{get:function(){return this._average},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastSecAverage",{get:function(){return this._lastSecAverage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"total",{get:function(){return this._totalAccumulated},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._totalValueCount},enumerable:!1,configurable:!0}),e.prototype.fetchNewFrame=function(){this._totalValueCount++,this._current=0,this._lastSecValueCount++},e.prototype.addCount=function(t,r){!e.Enabled||(this._current+=t,r&&this._fetchResult())},e.prototype.beginMonitoring=function(){!e.Enabled||(this._startMonitoringTime=X.Now)},e.prototype.endMonitoring=function(t){if(t===void 0&&(t=!0),!!e.Enabled){t&&this.fetchNewFrame();var r=X.Now;this._current=r-this._startMonitoringTime,t&&this._fetchResult()}},e.prototype._fetchResult=function(){this._totalAccumulated+=this._current,this._lastSecAccumulated+=this._current,this._min=Math.min(this._min,this._current),this._max=Math.max(this._max,this._current),this._average=this._totalAccumulated/this._totalValueCount;var t=X.Now;t-this._lastSecTime>1e3&&(this._lastSecAverage=this._lastSecAccumulated/this._lastSecValueCount,this._lastSecTime=t,this._lastSecAccumulated=0,this._lastSecValueCount=0)},e.Enabled=!0,e}(),Si=function(){function e(){}return Object.defineProperty(e,"UniqueId",{get:function(){var t=this._UniqueIdCounter;return this._UniqueIdCounter++,t},enumerable:!1,configurable:!0}),e._UniqueIdCounter=1,e}(),Ui=function(){function e(t,r){e.IsAvailable&&(this._observer=new window.ComputePressureObserver(t,r))}return Object.defineProperty(e,"IsAvailable",{get:function(){var t,r;return ee()&&"ComputePressureObserver"in window&&((r=(t=window.ComputePressureObserver)===null||t===void 0?void 0:t.supportedSources)===null||r===void 0?void 0:r.includes("cpu"))},enumerable:!1,configurable:!0}),e.prototype.observe=function(t){var r,n;!((r=this._observer)===null||r===void 0)&&r.observe&&((n=this._observer)===null||n===void 0||n.observe(t).catch(function(){}))},e.prototype.unobserve=function(t){var r,n;try{!((r=this._observer)===null||r===void 0)&&r.unobserve&&((n=this._observer)===null||n===void 0||n.unobserve(t))}catch{}},e}();function Be(e,t,r){try{var n=e.next();n.done?t(n):n.value?n.value.then(function(){n.value=void 0,t(n)},r):t(n)}catch(i){r(i)}}function Mi(e){e===void 0&&(e=25);var t;return function(r,n,i){var a=performance.now();t===void 0||a-t>e?(t=a,setTimeout(function(){Be(r,n,i)},0)):Be(r,n,i)}}function er(e,t,r,n,i){var a=function(){var o,s=function(f){f.done?r(f.value):o===void 0?o=!0:a()};do o=void 0,!i||!i.aborted?t(e,s,n):n(new Error("Aborted")),o===void 0&&(o=!1);while(o)};a()}function Qr(e,t){var r;return er(e,Be,function(n){return r=n},function(n){throw n},t),r}function jr(e,t,r){return new Promise(function(n,i){er(e,t,n,i,r)})}function xi(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return Qr(e.apply(void 0,r),t)}}var Ii=function(){function e(t){t===void 0&&(t=30),this._enabled=!0,this._rollingFrameTime=new Nr(t)}return e.prototype.sampleFrame=function(t){if(t===void 0&&(t=X.Now),!!this._enabled){if(this._lastFrameTimeMs!=null){var r=t-this._lastFrameTimeMs;this._rollingFrameTime.add(r)}this._lastFrameTimeMs=t}},Object.defineProperty(e.prototype,"averageFrameTime",{get:function(){return this._rollingFrameTime.average},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"averageFrameTimeVariance",{get:function(){return this._rollingFrameTime.variance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instantaneousFrameTime",{get:function(){return this._rollingFrameTime.history(0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"averageFPS",{get:function(){return 1e3/this._rollingFrameTime.average},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instantaneousFPS",{get:function(){var t=this._rollingFrameTime.history(0);return t===0?0:1e3/t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSaturated",{get:function(){return this._rollingFrameTime.isSaturated()},enumerable:!1,configurable:!0}),e.prototype.enable=function(){this._enabled=!0},e.prototype.disable=function(){this._enabled=!1,this._lastFrameTimeMs=null},Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this._lastFrameTimeMs=null,this._rollingFrameTime.reset()},e}(),Nr=function(){function e(t){this._samples=new Array(t),this.reset()}return e.prototype.add=function(t){var r;if(this.isSaturated()){var n=this._samples[this._pos];r=n-this.average,this.average-=r/(this._sampleCount-1),this._m2-=r*(n-this.average)}else this._sampleCount++;r=t-this.average,this.average+=r/this._sampleCount,this._m2+=r*(t-this.average),this.variance=this._m2/(this._sampleCount-1),this._samples[this._pos]=t,this._pos++,this._pos%=this._samples.length},e.prototype.history=function(t){if(t>=this._sampleCount||t>=this._samples.length)return 0;var r=this._wrapPosition(this._pos-1);return this._samples[this._wrapPosition(r-t)]},e.prototype.isSaturated=function(){return this._sampleCount>=this._samples.length},e.prototype.reset=function(){this.average=0,this.variance=0,this._sampleCount=0,this._pos=0,this._m2=0},e.prototype._wrapPosition=function(t){var r=this._samples.length;return(t%r+r)%r},e}();function tr(e,t,r){r===void 0&&(r=!1);var n=t.width,i=t.height;if(e instanceof Float32Array){for(var a=e.byteLength/e.BYTES_PER_ELEMENT,o=new Uint8Array(a);--a>=0;){var s=e[a];s<0?s=0:s>1&&(s=1),o[a]=s*255}e=o}var f=document.createElement("canvas");f.width=n,f.height=i;var u=f.getContext("2d");if(!u)return null;var c=u.createImageData(n,i),l=c.data;if(l.set(e),u.putImageData(c,0,0),r){var h=document.createElement("canvas");h.width=n,h.height=i;var d=h.getContext("2d");return d?(d.translate(0,i),d.scale(1,-1),d.drawImage(f,0,0),h.toDataURL("image/png")):null}return f.toDataURL("image/png")}function ki(e,t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=e.getInternalTexture();if(!n)return null;var i=e._readPixelsSync(t,r);return i?tr(i,e.getSize(),n.invertY):null}function Ki(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=0),Kt(this,void 0,void 0,function(){var n,i;return Gt(this,function(a){switch(a.label){case 0:return n=e.getInternalTexture(),n?[4,e.readPixels(t,r)]:[2,null];case 1:return i=a.sent(),i?[2,tr(i,e.getSize(),n.invertY)]:[2,null]}})})}var Gi=function(){function e(){}return e._RemoveAndStorePivotPoint=function(t){t&&e._PivotCached===0&&(t.getPivotPointToRef(e._OldPivotPoint),e._PivotPostMultiplyPivotMatrix=t._postMultiplyPivotMatrix,e._OldPivotPoint.equalsToFloats(0,0,0)||(t.setPivotMatrix(Te.IdentityReadOnly),e._OldPivotPoint.subtractToRef(t.getPivotPoint(),e._PivotTranslation),e._PivotTmpVector.copyFromFloats(1,1,1),e._PivotTmpVector.subtractInPlace(t.scaling),e._PivotTmpVector.multiplyInPlace(e._PivotTranslation),t.position.addInPlace(e._PivotTmpVector))),e._PivotCached++},e._RestorePivotPoint=function(t){t&&!e._OldPivotPoint.equalsToFloats(0,0,0)&&e._PivotCached===1&&(t.setPivotPoint(e._OldPivotPoint),t._postMultiplyPivotMatrix=e._PivotPostMultiplyPivotMatrix,e._PivotTmpVector.copyFromFloats(1,1,1),e._PivotTmpVector.subtractInPlace(t.scaling),e._PivotTmpVector.multiplyInPlace(e._PivotTranslation),t.position.subtractInPlace(e._PivotTmpVector)),this._PivotCached--},e._PivotCached=0,e._OldPivotPoint=new C,e._PivotTranslation=new C,e._PivotTmpVector=new C,e._PivotPostMultiplyPivotMatrix=!1,e}(),L;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(L||(L={}));var Hi=function(){function e(t,r){var n=this,i=se(se({},e._GetDefaultOptions()),r);if(t?this._leftJoystick=!0:this._leftJoystick=!1,e._GlobalJoystickIndex++,this._axisTargetedByLeftAndRight=L.X,this._axisTargetedByUpAndDown=L.Y,this.reverseLeftRight=!1,this.reverseUpDown=!1,this._touches=new Hr,this.deltaPosition=C.Zero(),this._joystickSensibility=25,this._inversedSensibility=1/(this._joystickSensibility/1e3),this._onResize=function(){e._VJCanvasWidth=window.innerWidth,e._VJCanvasHeight=window.innerHeight,e.Canvas&&(e.Canvas.width=e._VJCanvasWidth,e.Canvas.height=e._VJCanvasHeight),e._HalfWidth=e._VJCanvasWidth/2},!e.Canvas){window.addEventListener("resize",this._onResize,!1),e.Canvas=document.createElement("canvas"),e._VJCanvasWidth=window.innerWidth,e._VJCanvasHeight=window.innerHeight,e.Canvas.width=window.innerWidth,e.Canvas.height=window.innerHeight,e.Canvas.style.width="100%",e.Canvas.style.height="100%",e.Canvas.style.position="absolute",e.Canvas.style.backgroundColor="transparent",e.Canvas.style.top="0px",e.Canvas.style.left="0px",e.Canvas.style.zIndex="5",e.Canvas.style.msTouchAction="none",e.Canvas.style.touchAction="none",e.Canvas.setAttribute("touch-action","none");var a=e.Canvas.getContext("2d");if(!a)throw new Error("Unable to create canvas for virtual joystick");e._VJCanvasContext=a,e._VJCanvasContext.strokeStyle="#ffffff",e._VJCanvasContext.lineWidth=2,document.body.appendChild(e.Canvas)}e._HalfWidth=e.Canvas.width/2,this.pressed=!1,this.limitToContainer=i.limitToContainer,this._joystickColor=i.color,this.containerSize=i.containerSize,this.puckSize=i.puckSize,i.position&&this.setPosition(i.position.x,i.position.y),i.puckImage&&this.setPuckImage(i.puckImage),i.containerImage&&this.setContainerImage(i.containerImage),i.alwaysVisible&&e._AlwaysVisibleSticks++,this.alwaysVisible=i.alwaysVisible,this._joystickPointerId=-1,this._joystickPointerPos=new ne(0,0),this._joystickPreviousPointerPos=new ne(0,0),this._joystickPointerStartPos=new ne(0,0),this._deltaJoystickVector=new ne(0,0),this._onPointerDownHandlerRef=function(o){n._onPointerDown(o)},this._onPointerMoveHandlerRef=function(o){n._onPointerMove(o)},this._onPointerUpHandlerRef=function(o){n._onPointerUp(o)},e.Canvas.addEventListener("pointerdown",this._onPointerDownHandlerRef,!1),e.Canvas.addEventListener("pointermove",this._onPointerMoveHandlerRef,!1),e.Canvas.addEventListener("pointerup",this._onPointerUpHandlerRef,!1),e.Canvas.addEventListener("pointerout",this._onPointerUpHandlerRef,!1),e.Canvas.addEventListener("contextmenu",function(o){o.preventDefault()},!1),requestAnimationFrame(function(){n._drawVirtualJoystick()})}return e._GetDefaultOptions=function(){return{puckSize:40,containerSize:60,color:"cyan",puckImage:void 0,containerImage:void 0,position:void 0,alwaysVisible:!1,limitToContainer:!1}},e.prototype.setJoystickSensibility=function(t){this._joystickSensibility=t,this._inversedSensibility=1/(this._joystickSensibility/1e3)},e.prototype._onPointerDown=function(t){var r;t.preventDefault(),this._leftJoystick===!0?r=t.clientX<e._HalfWidth:r=t.clientX>e._HalfWidth,r&&this._joystickPointerId<0?(this._joystickPointerId=t.pointerId,this._joystickPosition?(this._joystickPointerStartPos=this._joystickPosition.clone(),this._joystickPointerPos=this._joystickPosition.clone(),this._joystickPreviousPointerPos=this._joystickPosition.clone(),this._onPointerMove(t)):(this._joystickPointerStartPos.x=t.clientX,this._joystickPointerStartPos.y=t.clientY,this._joystickPointerPos=this._joystickPointerStartPos.clone(),this._joystickPreviousPointerPos=this._joystickPointerStartPos.clone()),this._deltaJoystickVector.x=0,this._deltaJoystickVector.y=0,this.pressed=!0,this._touches.add(t.pointerId.toString(),t)):e._GlobalJoystickIndex<2&&this._action&&(this._action(),this._touches.add(t.pointerId.toString(),{x:t.clientX,y:t.clientY,prevX:t.clientX,prevY:t.clientY}))},e.prototype._onPointerMove=function(t){if(this._joystickPointerId==t.pointerId){if(this.limitToContainer){var r=new ne(t.clientX-this._joystickPointerStartPos.x,t.clientY-this._joystickPointerStartPos.y),n=r.length();n>this.containerSize&&r.scaleInPlace(this.containerSize/n),this._joystickPointerPos.x=this._joystickPointerStartPos.x+r.x,this._joystickPointerPos.y=this._joystickPointerStartPos.y+r.y}else this._joystickPointerPos.x=t.clientX,this._joystickPointerPos.y=t.clientY;this._deltaJoystickVector=this._joystickPointerPos.clone(),this._deltaJoystickVector=this._deltaJoystickVector.subtract(this._joystickPointerStartPos),0<e._AlwaysVisibleSticks&&(this._leftJoystick?this._joystickPointerPos.x=Math.min(e._HalfWidth,this._joystickPointerPos.x):this._joystickPointerPos.x=Math.max(e._HalfWidth,this._joystickPointerPos.x));var i=this.reverseLeftRight?-1:1,a=i*this._deltaJoystickVector.x/this._inversedSensibility;switch(this._axisTargetedByLeftAndRight){case L.X:this.deltaPosition.x=Math.min(1,Math.max(-1,a));break;case L.Y:this.deltaPosition.y=Math.min(1,Math.max(-1,a));break;case L.Z:this.deltaPosition.z=Math.min(1,Math.max(-1,a));break}var o=this.reverseUpDown?1:-1,s=o*this._deltaJoystickVector.y/this._inversedSensibility;switch(this._axisTargetedByUpAndDown){case L.X:this.deltaPosition.x=Math.min(1,Math.max(-1,s));break;case L.Y:this.deltaPosition.y=Math.min(1,Math.max(-1,s));break;case L.Z:this.deltaPosition.z=Math.min(1,Math.max(-1,s));break}}else{var f=this._touches.get(t.pointerId.toString());f&&(f.x=t.clientX,f.y=t.clientY)}},e.prototype._onPointerUp=function(t){if(this._joystickPointerId==t.pointerId)this._clearPreviousDraw(),this._joystickPointerId=-1,this.pressed=!1;else{var r=this._touches.get(t.pointerId.toString());r&&e._VJCanvasContext.clearRect(r.prevX-44,r.prevY-44,88,88)}this._deltaJoystickVector.x=0,this._deltaJoystickVector.y=0,this._touches.remove(t.pointerId.toString())},e.prototype.setJoystickColor=function(t){this._joystickColor=t},Object.defineProperty(e.prototype,"containerSize",{get:function(){return this._joystickContainerSize},set:function(t){this._joystickContainerSize=t,this._clearContainerSize=~~(this._joystickContainerSize*2.1),this._clearContainerSizeOffset=~~(this._clearContainerSize/2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"puckSize",{get:function(){return this._joystickPuckSize},set:function(t){this._joystickPuckSize=t,this._clearPuckSize=~~(this._joystickPuckSize*2.1),this._clearPuckSizeOffset=~~(this._clearPuckSize/2)},enumerable:!1,configurable:!0}),e.prototype.clearPosition=function(){this.alwaysVisible=!1,this._joystickPosition=null},Object.defineProperty(e.prototype,"alwaysVisible",{get:function(){return this._alwaysVisible},set:function(t){this._alwaysVisible!==t&&(t&&this._joystickPosition?(e._AlwaysVisibleSticks++,this._alwaysVisible=!0):(e._AlwaysVisibleSticks--,this._alwaysVisible=!1))},enumerable:!1,configurable:!0}),e.prototype.setPosition=function(t,r){this._joystickPointerStartPos&&this._clearPreviousDraw(),this._joystickPosition=new ne(t,r)},e.prototype.setActionOnTouch=function(t){this._action=t},e.prototype.setAxisForLeftRight=function(t){switch(t){case L.X:case L.Y:case L.Z:this._axisTargetedByLeftAndRight=t;break;default:this._axisTargetedByLeftAndRight=L.X;break}},e.prototype.setAxisForUpDown=function(t){switch(t){case L.X:case L.Y:case L.Z:this._axisTargetedByUpAndDown=t;break;default:this._axisTargetedByUpAndDown=L.Y;break}},e.prototype._clearPreviousDraw=function(){var t=this._joystickPosition||this._joystickPointerStartPos;e._VJCanvasContext.clearRect(t.x-this._clearContainerSizeOffset,t.y-this._clearContainerSizeOffset,this._clearContainerSize,this._clearContainerSize),e._VJCanvasContext.clearRect(this._joystickPreviousPointerPos.x-this._clearPuckSizeOffset,this._joystickPreviousPointerPos.y-this._clearPuckSizeOffset,this._clearPuckSize,this._clearPuckSize)},e.prototype.setContainerImage=function(t){var r=this,n=new Image;n.src=t,n.onload=function(){return r._containerImage=n}},e.prototype.setPuckImage=function(t){var r=this,n=new Image;n.src=t,n.onload=function(){return r._puckImage=n}},e.prototype._drawContainer=function(){var t=this._joystickPosition||this._joystickPointerStartPos;this._clearPreviousDraw(),this._containerImage?e._VJCanvasContext.drawImage(this._containerImage,t.x-this.containerSize,t.y-this.containerSize,this.containerSize*2,this.containerSize*2):(e._VJCanvasContext.beginPath(),e._VJCanvasContext.strokeStyle=this._joystickColor,e._VJCanvasContext.lineWidth=2,e._VJCanvasContext.arc(t.x,t.y,this.containerSize,0,Math.PI*2,!0),e._VJCanvasContext.stroke(),e._VJCanvasContext.closePath(),e._VJCanvasContext.beginPath(),e._VJCanvasContext.lineWidth=6,e._VJCanvasContext.strokeStyle=this._joystickColor,e._VJCanvasContext.arc(t.x,t.y,this.puckSize,0,Math.PI*2,!0),e._VJCanvasContext.stroke(),e._VJCanvasContext.closePath())},e.prototype._drawPuck=function(){this._puckImage?e._VJCanvasContext.drawImage(this._puckImage,this._joystickPointerPos.x-this.puckSize,this._joystickPointerPos.y-this.puckSize,this.puckSize*2,this.puckSize*2):(e._VJCanvasContext.beginPath(),e._VJCanvasContext.strokeStyle=this._joystickColor,e._VJCanvasContext.lineWidth=2,e._VJCanvasContext.arc(this._joystickPointerPos.x,this._joystickPointerPos.y,this.puckSize,0,Math.PI*2,!0),e._VJCanvasContext.stroke(),e._VJCanvasContext.closePath())},e.prototype._drawVirtualJoystick=function(){var t=this;this.alwaysVisible&&this._drawContainer(),this.pressed&&this._touches.forEach(function(r,n){n.pointerId===t._joystickPointerId?(t.alwaysVisible||t._drawContainer(),t._drawPuck(),t._joystickPreviousPointerPos=t._joystickPointerPos.clone()):(e._VJCanvasContext.clearRect(n.prevX-44,n.prevY-44,88,88),e._VJCanvasContext.beginPath(),e._VJCanvasContext.fillStyle="white",e._VJCanvasContext.beginPath(),e._VJCanvasContext.strokeStyle="red",e._VJCanvasContext.lineWidth=6,e._VJCanvasContext.arc(n.x,n.y,40,0,Math.PI*2,!0),e._VJCanvasContext.stroke(),e._VJCanvasContext.closePath(),n.prevX=n.x,n.prevY=n.y)}),requestAnimationFrame(function(){t._drawVirtualJoystick()})},e.prototype.releaseCanvas=function(){e.Canvas&&(e.Canvas.removeEventListener("pointerdown",this._onPointerDownHandlerRef),e.Canvas.removeEventListener("pointermove",this._onPointerMoveHandlerRef),e.Canvas.removeEventListener("pointerup",this._onPointerUpHandlerRef),e.Canvas.removeEventListener("pointerout",this._onPointerUpHandlerRef),window.removeEventListener("resize",this._onResize),document.body.removeChild(e.Canvas),e.Canvas=null)},e._GlobalJoystickIndex=0,e._AlwaysVisibleSticks=0,e}();function zr(e,t,r,n,i,a){var o=t.getEngine();return t.isReady=!1,i=i!=null?i:t.samplingMode,n=n!=null?n:t.type,a=a!=null?a:t.format,n===-1&&(n=0),new Promise(function(s){var f=new _e("postprocess",e,null,null,1,null,i,o,!1,void 0,n,void 0,null,!1,a);f.externalTextureSamplerBinding=!0;var u=o.createRenderTargetTexture({width:t.width,height:t.height},{generateDepthBuffer:!1,generateMipMaps:!1,generateStencilBuffer:!1,samplingMode:i,type:n,format:a});f.getEffect().executeWhenCompiled(function(){f.onApply=function(c){c._bindTexture("textureSampler",t),c.setFloat2("scale",1,1)},r.postProcessManager.directRender([f],u,!0),o.restoreDefaultFramebuffer(),o._releaseTexture(t),f&&f.dispose(),u._swapAndDie(t),t.type=n,t.format=5,t.isReady=!0,s(t)})})}var ye,lt;function he(e){ye||(ye=new Float32Array(1),lt=new Int32Array(ye.buffer)),ye[0]=e;var t=lt[0],r=t>>16&32768,n=t>>12&2047,i=t>>23&255;return i<103?r:i>142?(r|=31744,r|=(i==255?0:1)&&t&8388607,r):i<113?(n|=2048,r|=(n>>114-i)+(n>>113-i&1),r):(r|=i-112<<10|n>>1,r+=n&1,r)}function J(e){var t=(e&32768)>>15,r=(e&31744)>>10,n=e&1023;return r===0?(t?-1:1)*Math.pow(2,-14)*(n/Math.pow(2,10)):r==31?n?NaN:(t?-1:1)*(1/0):(t?-1:1)*Math.pow(2,r-15)*(1+n/Math.pow(2,10))}var ht=function(){function e(){}return e.ExpandRGBDTexture=function(t){var r=t._texture;if(!(!r||!t.isRGBD)){var n=r.getEngine(),i=n.getCaps(),a=r.isReady,o=!1;i.textureHalfFloatRender&&i.textureHalfFloatLinearFiltering?(o=!0,r.type=2):i.textureFloatRender&&i.textureFloatLinearFiltering&&(o=!0,r.type=1),o&&(r.isReady=!1,r._isRGBD=!1,r.invertY=!1);var s=function(){if(o){var f=new _e("rgbdDecode","rgbdDecode",null,null,1,null,3,n,!1,void 0,r.type,void 0,null,!1);f.externalTextureSamplerBinding=!0;var u=n.createRenderTargetTexture(r.width,{generateDepthBuffer:!1,generateMipMaps:!1,generateStencilBuffer:!1,samplingMode:r.samplingMode,type:r.type,format:5});f.getEffect().executeWhenCompiled(function(){f.onApply=function(c){c._bindTexture("textureSampler",r),c.setFloat2("scale",1,1)},t.getScene().postProcessManager.directRender([f],u,!0),n.restoreDefaultFramebuffer(),n._releaseTexture(r),f&&f.dispose(),u._swapAndDie(r),r.isReady=!0})}};a?s():t.onLoadObservable.addOnce(s)}},e.EncodeTextureToRGBD=function(t,r,n){return n===void 0&&(n=0),zr("rgbdEncode",t,r,n,1,5)},e}(),de=function(){function e(t,r,n,i){this.name=t,this.worldAxisForNormal=r,this.worldAxisForFileX=n,this.worldAxisForFileY=i}return e}(),Xr=function(){function e(){}return e.ConvertCubeMapTextureToSphericalPolynomial=function(t){var r=this,n;if(!t.isCube)return null;(n=t.getScene())===null||n===void 0||n.getEngine().flushFramebuffer();var i=t.getSize().width,a=t.readPixels(0,void 0,void 0,!1),o=t.readPixels(1,void 0,void 0,!1),s,f;t.isRenderTarget?(s=t.readPixels(3,void 0,void 0,!1),f=t.readPixels(2,void 0,void 0,!1)):(s=t.readPixels(2,void 0,void 0,!1),f=t.readPixels(3,void 0,void 0,!1));var u=t.readPixels(4,void 0,void 0,!1),c=t.readPixels(5,void 0,void 0,!1),l=t.gammaSpace,h=5,d=0;return(t.textureType==1||t.textureType==2)&&(d=1),new Promise(function(v){Promise.all([o,a,s,f,u,c]).then(function(g){var p=g[0],m=g[1],A=g[2],_=g[3],b=g[4],w=g[5],E={size:i,right:m,left:p,up:A,down:_,front:b,back:w,format:h,type:d,gammaSpace:l};v(r.ConvertCubeMapToSphericalPolynomial(E))})})},e._AreaElement=function(t,r){return Math.atan2(t*r,Math.sqrt(t*t+r*r+1))},e.ConvertCubeMapToSphericalPolynomial=function(t){for(var r=new cr,n=0,i=2/t.size,a=i,o=.5*i,s=o-1,f=0;f<6;f++)for(var u=this._FileFaces[f],c=t[u.name],l=s,h=t.format===5?4:3,d=0;d<t.size;d++){for(var v=s,g=0;g<t.size;g++){var p=u.worldAxisForFileX.scale(v).add(u.worldAxisForFileY.scale(l)).add(u.worldAxisForNormal);p.normalize();var m=this._AreaElement(v-o,l-o)-this._AreaElement(v-o,l+o)-this._AreaElement(v+o,l-o)+this._AreaElement(v+o,l+o),A=c[d*t.size*h+g*h+0],_=c[d*t.size*h+g*h+1],b=c[d*t.size*h+g*h+2];isNaN(A)&&(A=0),isNaN(_)&&(_=0),isNaN(b)&&(b=0),t.type===0&&(A/=255,_/=255,b/=255),t.gammaSpace&&(A=Math.pow(B.Clamp(A),Oe),_=Math.pow(B.Clamp(_),Oe),b=Math.pow(B.Clamp(b),Oe));var w=4096;A=B.Clamp(A,0,w),_=B.Clamp(_,0,w),b=B.Clamp(b,0,w);var E=new Qt(A,_,b);r.addLight(p,E,m),n+=m,v+=i}l+=a}var y=4*Math.PI,T=6,U=y*T/6,Q=U/n;return r.scaleInPlace(Q),r.convertIncidentRadianceToIrradiance(),r.convertIrradianceToLambertianRadiance(),qe.FromHarmonics(r)},e._FileFaces=[new de("right",new C(1,0,0),new C(0,0,-1),new C(0,-1,0)),new de("left",new C(-1,0,0),new C(0,0,1),new C(0,-1,0)),new de("up",new C(0,1,0),new C(1,0,0),new C(0,0,1)),new de("down",new C(0,-1,0),new C(1,0,0),new C(0,0,-1)),new de("front",new C(0,0,1),new C(1,0,0),new C(0,-1,0)),new de("back",new C(0,0,-1),new C(-1,0,0),new C(0,-1,0))],e}(),rr="image/png",dt=2,vt=[134,22,135,150,246,214,150,54];function Qi(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=0,n=0;n<vt.length;n++)if(t.getUint8(r++)!==vt[n])return P.Error("Not a babylon environment map"),null;for(var i="",a=0;a=t.getUint8(r++);)i+=String.fromCharCode(a);var o=JSON.parse(i);return o=De(o),o.specular&&(o.specular.specularDataPosition=r,o.specular.lodGenerationScale=o.specular.lodGenerationScale||.8),o}function De(e){if(e.version>dt)throw new Error('Unsupported babylon environment map version "'.concat(e.version,'". Latest supported version is "').concat(dt,'".'));return e.version===2||(e=se(se({},e),{version:2,imageType:rr})),e}function Vr(e,t){t=De(t);var r=t.specular,n=B.Log2(t.width);if(n=Math.round(n)+1,r.mipmaps.length!==6*n)throw new Error('Unsupported specular mipmaps number "'.concat(r.mipmaps.length,'"'));for(var i=new Array(n),a=0;a<n;a++){i[a]=new Array(6);for(var o=0;o<6;o++){var s=r.mipmaps[a*6+o];i[a][o]=new Uint8Array(e.buffer,e.byteOffset+r.specularDataPosition+s.position,s.length)}}return i}function ji(e,t,r){r=De(r);var n=r.specular;if(!n)return Promise.resolve();e._lodGenerationScale=n.lodGenerationScale;var i=Vr(t,r);return Ye(e,i,r.imageType)}function gt(e,t,r,n,i,a,o,s,f,u,c){return new Promise(function(l,h){if(r){var d=t.createTexture(null,!0,!0,null,1,null,function(g){h(g)},e);n.getEffect().executeWhenCompiled(function(){n.externalTextureSamplerBinding=!0,n.onApply=function(g){g._bindTexture("textureSampler",d),g.setFloat2("scale",1,t._features.needsInvertingBitmap&&e instanceof ImageBitmap?-1:1)},t.scenes.length&&(t.scenes[0].postProcessManager.directRender([n],u,!0,a,o),t.restoreDefaultFramebuffer(),d.dispose(),URL.revokeObjectURL(i),l())})}else{if(t._uploadImageToTexture(c,e,a,o),s){var v=f[o];v&&t._uploadImageToTexture(v._texture,e,a,0)}l()}})}function Ye(e,t,r){if(r===void 0&&(r=rr),!D.IsExponentOfTwo(e.width))throw new Error("Texture size must be a power of two");var n=B.ILog2(e.width)+1,i=e.getEngine(),a=!1,o=!1,s=null,f=null,u=null,c=i.getCaps();if(e.format=5,e.type=0,e.generateMipMaps=!0,e._cachedAnisotropicFilteringLevel=null,i.updateTextureSamplingMode(3,e),c.textureLOD?i._features.supportRenderAndCopyToLodForFloatTextures?c.textureHalfFloatRender&&c.textureHalfFloatLinearFiltering?(a=!0,e.type=2):c.textureFloatRender&&c.textureFloatLinearFiltering&&(a=!0,e.type=1):a=!1:(a=!1,o=!0,u={}),a)s=new _e("rgbdDecode","rgbdDecode",null,null,1,null,3,i,!1,void 0,e.type,void 0,null,!1),e._isRGBD=!1,e.invertY=!1,f=i.createRenderTargetCubeTexture(e.width,{generateDepthBuffer:!1,generateMipMaps:!0,generateStencilBuffer:!1,samplingMode:3,type:e.type,format:5});else if(e._isRGBD=!0,e.invertY=!0,o)for(var l=3,h=e._lodGenerationScale,d=e._lodGenerationOffset,v=0;v<l;v++){var g=v/(l-1),p=1-g,m=d,A=(n-1)*h+d,_=m+(A-m)*p,b=Math.round(Math.min(Math.max(_,0),A)),w=new Je(i,Ce.Temp);w.isCube=!0,w.invertY=!0,w.generateMipMaps=!1,i.updateTextureSamplingMode(2,w);var E=new jt(null);switch(E.isCube=!0,E._texture=w,u[b]=E,v){case 0:e._lodTextureLow=E;break;case 1:e._lodTextureMid=E;break;case 2:e._lodTextureHigh=E;break}}for(var y=[],T=function(ge){for(var Le=function(x){var S=t[ge][x],j=new Blob([S],{type:r}),ce=URL.createObjectURL(j),le=void 0;if(typeof Image=="undefined"||i._features.forceBitmapOverHTMLImageElement)le=i.createImageBitmap(j,{premultiplyAlpha:"none"}).then(function(I){return gt(I,i,a,s,ce,x,ge,o,u,f,e)});else{var q=new Image;q.src=ce,le=new Promise(function(I,k){q.onload=function(){gt(q,i,a,s,ce,x,ge,o,u,f,e).then(function(){return I()}).catch(function(re){k(re)})},q.onerror=function(re){k(re)}})}y.push(le)},G=0;G<6;G++)Le(G)},v=0;v<t.length;v++)T(v);if(t.length<n){var U=void 0,Q=Math.pow(2,n-1-t.length),K=Q*Q*4;switch(e.type){case 0:{U=new Uint8Array(K);break}case 2:{U=new Uint16Array(K);break}case 1:{U=new Float32Array(K);break}}for(var v=t.length;v<n;v++)for(var fe=0;fe<6;fe++)i._uploadArrayBufferViewToTexture(e,U,fe,v)}return Promise.all(y).then(function(){f&&(i._releaseTexture(e),f._swapAndDie(e)),s&&s.dispose(),o&&(e._lodTextureHigh&&e._lodTextureHigh._texture&&(e._lodTextureHigh._texture.isReady=!0),e._lodTextureMid&&e._lodTextureMid._texture&&(e._lodTextureMid._texture.isReady=!0),e._lodTextureLow&&e._lodTextureLow._texture&&(e._lodTextureLow._texture.isReady=!0))})}function Ni(e,t){t=De(t);var r=t.irradiance;if(!!r){var n=new qe;C.FromArrayToRef(r.x,0,n.x),C.FromArrayToRef(r.y,0,n.y),C.FromArrayToRef(r.z,0,n.z),C.FromArrayToRef(r.xx,0,n.xx),C.FromArrayToRef(r.yy,0,n.yy),C.FromArrayToRef(r.zz,0,n.zz),C.FromArrayToRef(r.yz,0,n.yz),C.FromArrayToRef(r.zx,0,n.zx),C.FromArrayToRef(r.xy,0,n.xy),e._sphericalPolynomial=n}}function zi(e,t,r,n,i){var a=e.getEngine().createRawCubeTexture(null,e.width,e.format,e.type,e.generateMipMaps,e.invertY,e.samplingMode,e._compression),o=Ye(a,t).then(function(){return e});return e.onRebuildCallback=function(s){return{proxy:o,isReady:!0,isAsync:!0}},e._source=Ce.CubeRawRGBD,e._bufferViewArrayArray=t,e._lodGenerationScale=n,e._lodGenerationOffset=i,e._sphericalPolynomial=r,Ye(e,t).then(function(){return e.isReady=!0,e})}function Xi(e,t,r,n){for(var i=n,a=0,o="";i<r.length;){var s=r.charAt(i);if(o)s===o?o==='"'||o==="'"?r.charAt(i-1)!=="\\"&&(o=""):o="":o==="*/"&&s==="*"&&i+1<r.length&&(r.charAt(i+1)==="/"&&(o=""),o===""&&i++);else switch(s){case e:a++;break;case t:a--;break;case'"':case"'":case"`":o=s;break;case"/":if(i+1<r.length){var f=r.charAt(i+1);f==="/"?o=`
`:f==="*"&&(o="*/")}break}if(i++,a===0)break}return a===0?i-1:-1}function Vi(e,t){for(;t<e.length;){var r=e[t];if(r!==" "&&r!==`
`&&r!=="\r"&&r!=="	"&&r!==`
`&&r!=="\xA0")break;t++}return t}function Yi(e){var t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||t==95}function qi(e){for(var t=0,r="",n=!1,i=[];t<e.length;){var a=e.charAt(t);if(r)a===r?r==='"'||r==="'"?(e.charAt(t-1)!=="\\"&&(r=""),i.push(a)):(r="",n=!1):r==="*/"&&a==="*"&&t+1<e.length?(e.charAt(t+1)==="/"&&(r=""),r===""&&(n=!1,t++)):n||i.push(a);else{switch(a){case'"':case"'":case"`":r=a;break;case"/":if(t+1<e.length){var o=e.charAt(t+1);o==="/"?(r=`
`,n=!0):o==="*"&&(r="*/",n=!0)}break}n||i.push(a)}t++}return i.join("")}function Ji(e,t,r){for(;t>=0&&e.charAt(t)!==r;)t--;return t}function Wi(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var Yr="data:image/png;base64,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",qr=0,Zi=function(e){if(!e.environmentBRDFTexture){var t=e.useDelayedTextureLoading;e.useDelayedTextureLoading=!1;var r=e._blockEntityCollection;e._blockEntityCollection=!1;var n=z.CreateFromBase64String(Yr,"EnvironmentBRDFTexture"+qr++,e,!0,!1,z.BILINEAR_SAMPLINGMODE);e._blockEntityCollection=r;var i=e.getEngine().getLoadedTexturesCache(),a=i.indexOf(n.getInternalTexture());a!==-1&&i.splice(a,1),n.isRGBD=!0,n.wrapU=z.CLAMP_ADDRESSMODE,n.wrapV=z.CLAMP_ADDRESSMODE,e.environmentBRDFTexture=n,e.useDelayedTextureLoading=t,ht.ExpandRGBDTexture(n);var o=e.getEngine().onContextRestoredObservable.add(function(){n.isRGBD=!0;var s=function(){n.isReady()?ht.ExpandRGBDTexture(n):D.SetImmediate(s)};s()});e.onDisposeObservable.add(function(){e.getEngine().onContextRestoredObservable.remove(o)})}return e.environmentBRDFTexture},Jr=542327876,pt=131072,mt=512,At=4,Ct=64,_t=131072;function Fe(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function Wr(e){return String.fromCharCode(e&255,e>>8&255,e>>16&255,e>>24&255)}var bt=Fe("DXT1"),wt=Fe("DXT3"),yt=Fe("DXT5"),Ue=Fe("DX10"),Pt=113,Tt=116,Et=2,Rt=10,Zr=88,Me=31,$r=0,en=1,Bt=2,Dt=3,xe=4,Ft=7,Ie=20,Lt=21,tn=22,rn=23,nn=24,an=25,on=26,sn=28,un=32,fn=function(){function e(){}return e.GetDDSInfo=function(t){var r=new Int32Array(t.buffer,t.byteOffset,Me),n=new Int32Array(t.buffer,t.byteOffset,Me+4),i=1;r[Bt]&pt&&(i=Math.max(1,r[Ft]));var a=r[Lt],o=a===Ue?n[un]:0,s=0;switch(a){case Pt:s=2;break;case Tt:s=1;break;case Ue:if(o===Rt){s=2;break}if(o===Et){s=1;break}}return{width:r[xe],height:r[Dt],mipmapCount:i,isFourCC:(r[Ie]&At)===At,isRGB:(r[Ie]&Ct)===Ct,isLuminance:(r[Ie]&_t)===_t,isCube:(r[sn]&mt)===mt,isCompressed:a===bt||a===wt||a===yt,dxgiFormat:o,textureType:s}},e._GetHalfFloatAsFloatRGBAArrayBuffer=function(t,r,n,i,a,o){for(var s=new Float32Array(i),f=new Uint16Array(a,n),u=0,c=0;c<r;c++)for(var l=0;l<t;l++){var h=(l+c*t)*4;s[u]=J(f[h]),s[u+1]=J(f[h+1]),s[u+2]=J(f[h+2]),e.StoreLODInAlphaChannel?s[u+3]=o:s[u+3]=J(f[h+3]),u+=4}return s},e._GetHalfFloatRGBAArrayBuffer=function(t,r,n,i,a,o){if(e.StoreLODInAlphaChannel){for(var s=new Uint16Array(i),f=new Uint16Array(a,n),u=0,c=0;c<r;c++)for(var l=0;l<t;l++){var h=(l+c*t)*4;s[u]=f[h],s[u+1]=f[h+1],s[u+2]=f[h+2],s[u+3]=he(o),u+=4}return s}return new Uint16Array(a,n,i)},e._GetFloatRGBAArrayBuffer=function(t,r,n,i,a,o){if(e.StoreLODInAlphaChannel){for(var s=new Float32Array(i),f=new Float32Array(a,n),u=0,c=0;c<r;c++)for(var l=0;l<t;l++){var h=(l+c*t)*4;s[u]=f[h],s[u+1]=f[h+1],s[u+2]=f[h+2],s[u+3]=o,u+=4}return s}return new Float32Array(a,n,i)},e._GetFloatAsHalfFloatRGBAArrayBuffer=function(t,r,n,i,a,o){for(var s=new Uint16Array(i),f=new Float32Array(a,n),u=0,c=0;c<r;c++)for(var l=0;l<t;l++)s[u]=he(f[u]),s[u+1]=he(f[u+1]),s[u+2]=he(f[u+2]),e.StoreLODInAlphaChannel?s[u+3]=he(o):s[u+3]=he(f[u+3]),u+=4;return s},e._GetFloatAsUIntRGBAArrayBuffer=function(t,r,n,i,a,o){for(var s=new Uint8Array(i),f=new Float32Array(a,n),u=0,c=0;c<r;c++)for(var l=0;l<t;l++){var h=(l+c*t)*4;s[u]=B.Clamp(f[h])*255,s[u+1]=B.Clamp(f[h+1])*255,s[u+2]=B.Clamp(f[h+2])*255,e.StoreLODInAlphaChannel?s[u+3]=o:s[u+3]=B.Clamp(f[h+3])*255,u+=4}return s},e._GetHalfFloatAsUIntRGBAArrayBuffer=function(t,r,n,i,a,o){for(var s=new Uint8Array(i),f=new Uint16Array(a,n),u=0,c=0;c<r;c++)for(var l=0;l<t;l++){var h=(l+c*t)*4;s[u]=B.Clamp(J(f[h]))*255,s[u+1]=B.Clamp(J(f[h+1]))*255,s[u+2]=B.Clamp(J(f[h+2]))*255,e.StoreLODInAlphaChannel?s[u+3]=o:s[u+3]=B.Clamp(J(f[h+3]))*255,u+=4}return s},e._GetRGBAArrayBuffer=function(t,r,n,i,a,o,s,f,u){for(var c=new Uint8Array(i),l=new Uint8Array(a,n),h=0,d=0;d<r;d++)for(var v=0;v<t;v++){var g=(v+d*t)*4;c[h]=l[g+o],c[h+1]=l[g+s],c[h+2]=l[g+f],c[h+3]=l[g+u],h+=4}return c},e._ExtractLongWordOrder=function(t){return t===0||t===255||t===-16777216?0:1+e._ExtractLongWordOrder(t>>8)},e._GetRGBArrayBuffer=function(t,r,n,i,a,o,s,f){for(var u=new Uint8Array(i),c=new Uint8Array(a,n),l=0,h=0;h<r;h++)for(var d=0;d<t;d++){var v=(d+h*t)*3;u[l]=c[v+o],u[l+1]=c[v+s],u[l+2]=c[v+f],l+=3}return u},e._GetLuminanceArrayBuffer=function(t,r,n,i,a){for(var o=new Uint8Array(i),s=new Uint8Array(a,n),f=0,u=0;u<r;u++)for(var c=0;c<t;c++){var l=c+u*t;o[f]=s[l],f++}return o},e.UploadDDSLevels=function(t,r,n,i,a,o,s,f,u){s===void 0&&(s=-1),u===void 0&&(u=!0);var c=null;i.sphericalPolynomial&&(c=new Array);var l=!!t.getCaps().s3tc;r.generateMipMaps=a;var h=new Int32Array(n.buffer,n.byteOffset,Me),d,v,g,p=0,m,A,_,b,w=0,E=1;if(h[$r]!==Jr){P.Error("Invalid magic number in DDS header");return}if(!i.isFourCC&&!i.isRGB&&!i.isLuminance){P.Error("Unsupported format, must contain a FourCC, RGB or LUMINANCE code");return}if(i.isCompressed&&!l){P.Error("Compressed textures are not supported on this platform.");return}var y=h[tn];m=h[en]+4;var T=!1;if(i.isFourCC)switch(d=h[Lt],d){case bt:E=8,w=33777;break;case wt:E=16,w=33778;break;case yt:E=16,w=33779;break;case Pt:T=!0,y=64;break;case Tt:T=!0,y=128;break;case Ue:{m+=5*4;var U=!1;switch(i.dxgiFormat){case Rt:T=!0,y=64,U=!0;break;case Et:T=!0,y=128,U=!0;break;case Zr:i.isRGB=!0,i.isFourCC=!1,y=32,U=!0;break}if(U)break}default:console.error("Unsupported FourCC code:",Wr(d));return}var Q=e._ExtractLongWordOrder(h[rn]),K=e._ExtractLongWordOrder(h[nn]),fe=e._ExtractLongWordOrder(h[an]),ge=e._ExtractLongWordOrder(h[on]);T&&(w=t._getRGBABufferInternalSizedFormat(i.textureType)),_=1,h[Bt]&pt&&a!==!1&&(_=Math.max(1,h[Ft]));for(var Le=f||0,G=t.getCaps(),x=Le;x<o;x++){for(v=h[xe],g=h[Dt],b=0;b<_;++b){if(s===-1||s===b){var S=s===-1?b:0;if(!i.isCompressed&&i.isFourCC){r.format=5,p=v*g*4;var j=null;if(t._badOS||t._badDesktopOS||!G.textureHalfFloat&&!G.textureFloat)y===128?(j=e._GetFloatAsUIntRGBAArrayBuffer(v,g,n.byteOffset+m,p,n.buffer,S),c&&S==0&&c.push(e._GetFloatRGBAArrayBuffer(v,g,n.byteOffset+m,p,n.buffer,S))):y===64&&(j=e._GetHalfFloatAsUIntRGBAArrayBuffer(v,g,n.byteOffset+m,p,n.buffer,S),c&&S==0&&c.push(e._GetHalfFloatAsFloatRGBAArrayBuffer(v,g,n.byteOffset+m,p,n.buffer,S))),r.type=0;else{var ce=G.textureFloat&&(u&&G.textureFloatLinearFiltering||!u),le=G.textureHalfFloat&&(u&&G.textureHalfFloatLinearFiltering||!u),q=(y===128||y===64&&!le)&&ce?1:(y===64||y===128&&!ce)&&le?2:0,I=void 0,k=null;switch(y){case 128:{switch(q){case 1:I=e._GetFloatRGBAArrayBuffer,k=null;break;case 2:I=e._GetFloatAsHalfFloatRGBAArrayBuffer,k=e._GetFloatRGBAArrayBuffer;break;case 0:I=e._GetFloatAsUIntRGBAArrayBuffer,k=e._GetFloatRGBAArrayBuffer;break}break}default:{switch(q){case 1:I=e._GetHalfFloatAsFloatRGBAArrayBuffer,k=null;break;case 2:I=e._GetHalfFloatRGBAArrayBuffer,k=e._GetHalfFloatAsFloatRGBAArrayBuffer;break;case 0:I=e._GetHalfFloatAsUIntRGBAArrayBuffer,k=e._GetHalfFloatAsFloatRGBAArrayBuffer;break}break}}r.type=q,j=I(v,g,n.byteOffset+m,p,n.buffer,S),c&&S==0&&c.push(k?k(v,g,n.byteOffset+m,p,n.buffer,S):j)}j&&t._uploadDataToTextureDirectly(r,j,x,S)}else if(i.isRGB)r.type=0,y===24?(r.format=4,p=v*g*3,A=e._GetRGBArrayBuffer(v,g,n.byteOffset+m,p,n.buffer,Q,K,fe),t._uploadDataToTextureDirectly(r,A,x,S)):(r.format=5,p=v*g*4,A=e._GetRGBAArrayBuffer(v,g,n.byteOffset+m,p,n.buffer,Q,K,fe,ge),t._uploadDataToTextureDirectly(r,A,x,S));else if(i.isLuminance){var re=t._getUnpackAlignement(),or=v,sr=Math.floor((v+re-1)/re)*re;p=sr*(g-1)+or,A=e._GetLuminanceArrayBuffer(v,g,n.byteOffset+m,p,n.buffer),r.format=1,r.type=0,t._uploadDataToTextureDirectly(r,A,x,S)}else p=Math.max(4,v)/4*Math.max(4,g)/4*E,A=new Uint8Array(n.buffer,n.byteOffset+m,p),r.type=0,t._uploadCompressedDataToTextureDirectly(r,w,v,g,A,x,S)}m+=y?v*g*(y/8):p,v*=.5,g*=.5,v=Math.max(1,v),g=Math.max(1,g)}if(f!==void 0)break}c&&c.length>0?i.sphericalPolynomial=Xr.ConvertCubeMapToSphericalPolynomial({size:h[xe],right:c[0],left:c[1],up:c[2],down:c[3],front:c[4],back:c[5],format:5,type:1,gammaSpace:!1}):i.sphericalPolynomial=void 0},e.StoreLODInAlphaChannel=!1,e}();Xe.prototype.createPrefilteredCubeTexture=function(e,t,r,n,i,a,o,s,f){var u=this;i===void 0&&(i=null),a===void 0&&(a=null),s===void 0&&(s=null),f===void 0&&(f=!0);var c=function(l){if(!l){i&&i(null);return}var h=l.texture;if(f?l.info.sphericalPolynomial&&(h._sphericalPolynomial=l.info.sphericalPolynomial):h._sphericalPolynomial=new qe,h._source=Ce.CubePrefiltered,u.getCaps().textureLOD){i&&i(h);return}var d=3,v=u._gl,g=l.width;if(!!g){for(var p=[],m=0;m<d;m++){var A=m/(d-1),_=1-A,b=n,w=B.Log2(g)*r+n,E=b+(w-b)*_,y=Math.round(Math.min(Math.max(E,0),w)),T=new Je(u,Ce.Temp);if(T.type=h.type,T.format=h.format,T.width=Math.pow(2,Math.max(B.Log2(g)-y,0)),T.height=T.width,T.isCube=!0,T._cachedWrapU=0,T._cachedWrapV=0,u._bindTextureDirectly(v.TEXTURE_CUBE_MAP,T,!0),T.samplingMode=2,v.texParameteri(v.TEXTURE_CUBE_MAP,v.TEXTURE_MAG_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_CUBE_MAP,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_CUBE_MAP,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_CUBE_MAP,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),l.isDDS){var U=l.info,Q=l.data;u._unpackFlipY(U.isCompressed),fn.UploadDDSLevels(u,T,Q,U,!0,6,y)}else P.Warn("DDS is the only prefiltered cube map supported so far.");u._bindTextureDirectly(v.TEXTURE_CUBE_MAP,null);var K=new jt(t);K.isCube=!0,K._texture=T,T.isReady=!0,p.push(K)}h._lodTextureHigh=p[2],h._lodTextureMid=p[1],h._lodTextureLow=p[0],i&&i(h)}};return this.createCubeTexture(e,t,null,!1,c,a,o,s,f,r,n)};var $i=function(){function e(t,r){if(this.data=t,this.isInvalid=!1,!e.IsValid(t)){this.isInvalid=!0,P.Error("texture missing KTX identifier");return}var n=Uint32Array.BYTES_PER_ELEMENT,i=new DataView(this.data.buffer,this.data.byteOffset+12,13*n),a=i.getUint32(0,!0),o=a===67305985;if(this.glType=i.getUint32(1*n,o),this.glTypeSize=i.getUint32(2*n,o),this.glFormat=i.getUint32(3*n,o),this.glInternalFormat=i.getUint32(4*n,o),this.glBaseInternalFormat=i.getUint32(5*n,o),this.pixelWidth=i.getUint32(6*n,o),this.pixelHeight=i.getUint32(7*n,o),this.pixelDepth=i.getUint32(8*n,o),this.numberOfArrayElements=i.getUint32(9*n,o),this.numberOfFaces=i.getUint32(10*n,o),this.numberOfMipmapLevels=i.getUint32(11*n,o),this.bytesOfKeyValueData=i.getUint32(12*n,o),this.glType!==0){P.Error("only compressed formats currently supported");return}else this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels);if(this.pixelHeight===0||this.pixelDepth!==0){P.Error("only 2D textures currently supported");return}if(this.numberOfArrayElements!==0){P.Error("texture arrays not currently supported");return}if(this.numberOfFaces!==r){P.Error("number of faces expected"+r+", but found "+this.numberOfFaces);return}this.loadType=e.COMPRESSED_2D}return e.prototype.uploadLevels=function(t,r){switch(this.loadType){case e.COMPRESSED_2D:this._upload2DCompressedLevels(t,r);break;case e.TEX_2D:case e.COMPRESSED_3D:case e.TEX_3D:}},e.prototype._upload2DCompressedLevels=function(t,r){for(var n=e.HEADER_LEN+this.bytesOfKeyValueData,i=this.pixelWidth,a=this.pixelHeight,o=r?this.numberOfMipmapLevels:1,s=0;s<o;s++){var f=new Int32Array(this.data.buffer,this.data.byteOffset+n,1)[0];n+=4;for(var u=0;u<this.numberOfFaces;u++){var c=new Uint8Array(this.data.buffer,this.data.byteOffset+n,f),l=t.getEngine();l._uploadCompressedDataToTextureDirectly(t,t.format,i,a,c,u,s),n+=f,n+=3-(f+3)%4}i=Math.max(1,i*.5),a=Math.max(1,a*.5)}},e.IsValid=function(t){if(t.byteLength>=12){var r=new Uint8Array(t.buffer,t.byteOffset,12);if(r[0]===171&&r[1]===75&&r[2]===84&&r[3]===88&&r[4]===32&&r[5]===49&&r[6]===49&&r[7]===187&&r[8]===13&&r[9]===10&&r[10]===26&&r[11]===10)return!0}return!1},e.HEADER_LEN=12+13*4,e.COMPRESSED_2D=0,e.COMPRESSED_3D=1,e.TEX_2D=2,e.TEX_3D=3,e}(),cn=function(){function e(t){this._pendingActions=new Array,this._workerInfos=t.map(function(r){return{workerPromise:Promise.resolve(r),idle:!0}})}return e.prototype.dispose=function(){for(var t=0,r=this._workerInfos;t<r.length;t++){var n=r[t];n.workerPromise.then(function(i){i.terminate()})}this._workerInfos.length=0,this._pendingActions.length=0},e.prototype.push=function(t){this._executeOnIdleWorker(t)||this._pendingActions.push(t)},e.prototype._executeOnIdleWorker=function(t){for(var r=0,n=this._workerInfos;r<n.length;r++){var i=n[r];if(i.idle)return this._execute(i,t),!0}return!1},e.prototype._execute=function(t,r){var n=this;t.idle=!1,t.workerPromise.then(function(i){r(i,function(){var a=n._pendingActions.shift();a?n._execute(t,a):t.idle=!0})})},e}(),ln=function(e){R(t,e);function t(r,n,i){i===void 0&&(i=t.DefaultOptions);var a=e.call(this,[])||this;return a._maxWorkers=r,a._createWorkerAsync=n,a._options=i,a}return t.prototype.push=function(r){if(!this._executeOnIdleWorker(r))if(this._workerInfos.length<this._maxWorkers){var n={workerPromise:this._createWorkerAsync(),idle:!1};this._workerInfos.push(n),this._execute(n,r)}else this._pendingActions.push(r)},t.prototype._execute=function(r,n){var i=this;r.timeoutId&&(clearTimeout(r.timeoutId),delete r.timeoutId),e.prototype._execute.call(this,r,function(a,o){n(a,function(){o(),r.idle&&(r.timeoutId=setTimeout(function(){r.workerPromise.then(function(f){f.terminate()});var s=i._workerInfos.indexOf(r);s!==-1&&i._workerInfos.splice(s,1)},i._options.idleTimeElapsedBeforeRelease))})})},t.DefaultOptions={idleTimeElapsedBeforeRelease:1e3},t}(cn),ea=function(){function e(t,r){r===void 0&&(r=e.DefaultNumWorkers),this._engine=t,e._Initialize(r)}return e.GetDefaultNumWorkers=function(){return typeof navigator!="object"||!navigator.hardwareConcurrency?1:Math.min(Math.floor(navigator.hardwareConcurrency*.5),4)},e._Initialize=function(t){e._WorkerPoolPromise||e._DecoderModulePromise||(t&&typeof Worker=="function"&&typeof URL!="undefined"?e._WorkerPoolPromise=new Promise(function(r){var n="(".concat(hn,")()"),i=URL.createObjectURL(new Blob([n],{type:"application/javascript"}));r(new ln(t,function(){return new Promise(function(a,o){var s=new Worker(i),f=function(c){s.removeEventListener("error",f),s.removeEventListener("message",u),o(c)},u=function(c){c.data.action==="init"&&(s.removeEventListener("error",f),s.removeEventListener("message",u),a(s))};s.addEventListener("error",f),s.addEventListener("message",u),s.postMessage({action:"init",urls:e.URLConfig})})}))}):typeof KTX2DECODER=="undefined"?e._DecoderModulePromise=D.LoadScriptAsync(e.URLConfig.jsDecoderModule).then(function(){KTX2DECODER.MSCTranscoder.UseFromWorkerThread=!1,KTX2DECODER.WASMMemoryManager.LoadBinariesFromCurrentThread=!0;var r=e.URLConfig;return r.wasmUASTCToASTC!==null&&(KTX2DECODER.LiteTranscoder_UASTC_ASTC.WasmModuleURL=r.wasmUASTCToASTC),r.wasmUASTCToBC7!==null&&(KTX2DECODER.LiteTranscoder_UASTC_BC7.WasmModuleURL=r.wasmUASTCToBC7),r.wasmUASTCToRGBA_UNORM!==null&&(KTX2DECODER.LiteTranscoder_UASTC_RGBA_UNORM.WasmModuleURL=r.wasmUASTCToRGBA_UNORM),r.wasmUASTCToRGBA_SRGB!==null&&(KTX2DECODER.LiteTranscoder_UASTC_RGBA_SRGB.WasmModuleURL=r.wasmUASTCToRGBA_SRGB),r.jsMSCTranscoder!==null&&(KTX2DECODER.MSCTranscoder.JSModuleURL=r.jsMSCTranscoder),r.wasmMSCTranscoder!==null&&(KTX2DECODER.MSCTranscoder.WasmModuleURL=r.wasmMSCTranscoder),r.wasmZSTDDecoder!==null&&(KTX2DECODER.ZSTDDecoder.WasmModuleURL=r.wasmZSTDDecoder),new KTX2DECODER.KTX2Decoder}):(KTX2DECODER.MSCTranscoder.UseFromWorkerThread=!1,KTX2DECODER.WASMMemoryManager.LoadBinariesFromCurrentThread=!0,e._DecoderModulePromise=Promise.resolve(new KTX2DECODER.KTX2Decoder)))},e.prototype.uploadAsync=function(t,r,n){var i=this,a=this._engine.getCaps(),o={astc:!!a.astc,bptc:!!a.bptc,s3tc:!!a.s3tc,pvrtc:!!a.pvrtc,etc2:!!a.etc2,etc1:!!a.etc1};if(e._WorkerPoolPromise)return e._WorkerPoolPromise.then(function(s){return new Promise(function(f,u){s.push(function(c,l){var h=function(g){c.removeEventListener("error",h),c.removeEventListener("message",d),u(g),l()},d=function(g){if(g.data.action==="decoded"){if(c.removeEventListener("error",h),c.removeEventListener("message",d),!g.data.success)u({message:g.data.msg});else try{i._createTexture(g.data.decodedData,r,n),f()}catch(p){u({message:p})}l()}};c.addEventListener("error",h),c.addEventListener("message",d);var v=new Uint8Array(t.byteLength);v.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),c.postMessage({action:"decode",data:v,caps:o,options:n},[v.buffer])})})});if(e._DecoderModulePromise)return e._DecoderModulePromise.then(function(s){return new Promise(function(f,u){s.decode(t,a).then(function(c){i._createTexture(c,r),f()}).catch(function(c){u({message:c})})})});throw new Error("KTX2 decoder module is not available")},e.prototype._createTexture=function(t,r,n){var i=3553;if(this._engine._bindTextureDirectly(i,r),n&&(n.transcodedFormat=t.transcodedFormat,n.isInGammaSpace=t.isInGammaSpace,n.hasAlpha=t.hasAlpha,n.transcoderName=t.transcoderName),t.transcodedFormat===32856?(r.type=0,r.format=5):r.format=t.transcodedFormat,r._gammaSpace=t.isInGammaSpace,r.generateMipMaps=t.mipmaps.length>1,t.errors)throw new Error("KTX2 container - could not transcode the data. "+t.errors);for(var a=0;a<t.mipmaps.length;++a){var o=t.mipmaps[a];if(!o||!o.data)throw new Error("KTX2 container - could not transcode one of the image");t.transcodedFormat===32856?(r.width=o.width,r.height=o.height,this._engine._uploadDataToTextureDirectly(r,o.data,0,a,void 0,!0)):this._engine._uploadCompressedDataToTextureDirectly(r,t.transcodedFormat,o.width,o.height,o.data,0,a)}r._extension=".ktx2",r.width=t.mipmaps[0].width,r.height=t.mipmaps[0].height,r.isReady=!0,this._engine._bindTextureDirectly(i,null)},e.IsValid=function(t){if(t.byteLength>=12){var r=new Uint8Array(t.buffer,t.byteOffset,12);if(r[0]===171&&r[1]===75&&r[2]===84&&r[3]===88&&r[4]===32&&r[5]===50&&r[6]===48&&r[7]===187&&r[8]===13&&r[9]===10&&r[10]===26&&r[11]===10)return!0}return!1},e.URLConfig={jsDecoderModule:"https://preview.babylonjs.com/babylon.ktx2Decoder.js",wasmUASTCToASTC:null,wasmUASTCToBC7:null,wasmUASTCToRGBA_UNORM:null,wasmUASTCToRGBA_SRGB:null,jsMSCTranscoder:null,wasmMSCTranscoder:null,wasmZSTDDecoder:null},e.DefaultNumWorkers=e.GetDefaultNumWorkers(),e}();function hn(){var e;onmessage=function(t){if(!!t.data)switch(t.data.action){case"init":{var r=t.data.urls;importScripts(r.jsDecoderModule),r.wasmUASTCToASTC!==null&&(KTX2DECODER.LiteTranscoder_UASTC_ASTC.WasmModuleURL=r.wasmUASTCToASTC),r.wasmUASTCToBC7!==null&&(KTX2DECODER.LiteTranscoder_UASTC_BC7.WasmModuleURL=r.wasmUASTCToBC7),r.wasmUASTCToRGBA_UNORM!==null&&(KTX2DECODER.LiteTranscoder_UASTC_RGBA_UNORM.WasmModuleURL=r.wasmUASTCToRGBA_UNORM),r.wasmUASTCToRGBA_SRGB!==null&&(KTX2DECODER.LiteTranscoder_UASTC_RGBA_SRGB.WasmModuleURL=r.wasmUASTCToRGBA_SRGB),r.jsMSCTranscoder!==null&&(KTX2DECODER.MSCTranscoder.JSModuleURL=r.jsMSCTranscoder),r.wasmMSCTranscoder!==null&&(KTX2DECODER.MSCTranscoder.WasmModuleURL=r.wasmMSCTranscoder),r.wasmZSTDDecoder!==null&&(KTX2DECODER.ZSTDDecoder.WasmModuleURL=r.wasmZSTDDecoder),e=new KTX2DECODER.KTX2Decoder,postMessage({action:"init"});break}case"decode":e.decode(t.data.data,t.data.caps,t.data.options).then(function(n){for(var i=[],a=0;a<n.mipmaps.length;++a){var o=n.mipmaps[a];o&&o.data&&i.push(o.data.buffer)}postMessage({action:"decoded",success:!0,decodedData:n},i)}).catch(function(n){postMessage({action:"decoded",success:!1,msg:n})});break}}}var ie;(function(e){e[e.INIT=0]="INIT",e[e.STARTED=1]="STARTED",e[e.ENDED=2]="ENDED"})(ie||(ie={}));function ta(e){var t,r=0,n=Date.now();e.observableParameters=(t=e.observableParameters)!==null&&t!==void 0?t:{};var i=e.contextObservable.add(function(a){var o=Date.now();r=o-n;var s={startTime:n,currentTime:o,deltaTime:r,completeRate:r/e.timeout,payload:a};e.onTick&&e.onTick(s),e.breakCondition&&e.breakCondition()&&(e.contextObservable.remove(i),e.onAborted&&e.onAborted(s)),r>=e.timeout&&(e.contextObservable.remove(i),e.onEnded&&e.onEnded(s))},e.observableParameters.mask,e.observableParameters.insertFirst,e.observableParameters.scope);return i}(function(){function e(t){var r=this,n,i;this.onEachCountObservable=new O,this.onTimerAbortedObservable=new O,this.onTimerEndedObservable=new O,this.onStateChangedObservable=new O,this._observer=null,this._breakOnNextTick=!1,this._tick=function(a){var o=Date.now();r._timer=o-r._startTime;var s={startTime:r._startTime,currentTime:o,deltaTime:r._timer,completeRate:r._timer/r._timeToEnd,payload:a},f=r._breakOnNextTick||r._breakCondition(s);f||r._timer>=r._timeToEnd?r._stop(s,f):r.onEachCountObservable.notifyObservers(s)},this._setState(ie.INIT),this._contextObservable=t.contextObservable,this._observableParameters=(n=t.observableParameters)!==null&&n!==void 0?n:{},this._breakCondition=(i=t.breakCondition)!==null&&i!==void 0?i:function(){return!1},this._timeToEnd=t.timeout,t.onEnded&&this.onTimerEndedObservable.add(t.onEnded),t.onTick&&this.onEachCountObservable.add(t.onTick),t.onAborted&&this.onTimerAbortedObservable.add(t.onAborted)}return Object.defineProperty(e.prototype,"breakCondition",{set:function(t){this._breakCondition=t},enumerable:!1,configurable:!0}),e.prototype.clearObservables=function(){this.onEachCountObservable.clear(),this.onTimerAbortedObservable.clear(),this.onTimerEndedObservable.clear(),this.onStateChangedObservable.clear()},e.prototype.start=function(t){if(t===void 0&&(t=this._timeToEnd),this._state===ie.STARTED)throw new Error("Timer already started. Please stop it before starting again");this._timeToEnd=t,this._startTime=Date.now(),this._timer=0,this._observer=this._contextObservable.add(this._tick,this._observableParameters.mask,this._observableParameters.insertFirst,this._observableParameters.scope),this._setState(ie.STARTED)},e.prototype.stop=function(){this._state===ie.STARTED&&(this._breakOnNextTick=!0)},e.prototype.dispose=function(){this._observer&&this._contextObservable.remove(this._observer),this.clearObservables()},e.prototype._setState=function(t){this._state=t,this.onStateChangedObservable.notifyObservers(this._state)},e.prototype._stop=function(t,r){r===void 0&&(r=!1),this._contextObservable.remove(this._observer),this._setState(ie.ENDED),r?this.onTimerAbortedObservable.notifyObservers(t):this.onTimerEndedObservable.notifyObservers(t)},e})();var dn=function(){function e(t){var r=this;this.onAfterReductionPerformed=new O,this._forceFullscreenViewport=!0,this._activated=!1,this._camera=t,this._postProcessManager=new pr(t.getScene()),this._onContextRestoredObserver=t.getEngine().onContextRestoredObservable.add(function(){r._postProcessManager._rebuild()})}return Object.defineProperty(e.prototype,"sourceTexture",{get:function(){return this._sourceTexture},enumerable:!1,configurable:!0}),e.prototype.setSourceTexture=function(t,r,n,i){var a=this;if(n===void 0&&(n=2),i===void 0&&(i=!0),t!==this._sourceTexture){this.dispose(!1),this._sourceTexture=t,this._reductionSteps=[],this._forceFullscreenViewport=i;var o=this._camera.getScene(),s=new _e("Initial reduction phase","minmaxRedux",["texSize"],["sourceTexture"],1,null,1,o.getEngine(),!1,"#define INITIAL"+(r?`
#define DEPTH_REDUX`:""),n,void 0,void 0,void 0,7);s.autoClear=!1,s.forceFullscreenViewport=i;var f=this._sourceTexture.getRenderWidth(),u=this._sourceTexture.getRenderHeight();s.onApply=function(d,v){return function(g){g.setTexture("sourceTexture",a._sourceTexture),g.setFloat2("texSize",d,v)}}(f,u),this._reductionSteps.push(s);for(var c=1;f>1||u>1;){f=Math.max(Math.round(f/2),1),u=Math.max(Math.round(u/2),1);var l=new _e("Reduction phase "+c,"minmaxRedux",["texSize"],null,{width:f,height:u},null,1,o.getEngine(),!1,"#define "+(f==1&&u==1?"LAST":f==1||u==1?"ONEBEFORELAST":"MAIN"),n,void 0,void 0,void 0,7);if(l.autoClear=!1,l.forceFullscreenViewport=i,l.onApply=function(d,v){return function(g){d==1||v==1?g.setInt2("texSize",d,v):g.setFloat2("texSize",d,v)}}(f,u),this._reductionSteps.push(l),c++,f==1&&u==1){var h=function(d,v,g){var p=new Float32Array(4*d*v),m={min:0,max:0};return function(){o.getEngine()._readTexturePixels(g.inputTexture.texture,d,v,-1,0,p,!1),m.min=p[0],m.max=p[1],a.onAfterReductionPerformed.notifyObservers(m)}};l.onAfterRenderObservable.add(h(f,u,l))}}}},Object.defineProperty(e.prototype,"refreshRate",{get:function(){return this._sourceTexture?this._sourceTexture.refreshRate:-1},set:function(t){this._sourceTexture&&(this._sourceTexture.refreshRate=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activated",{get:function(){return this._activated},enumerable:!1,configurable:!0}),e.prototype.activate=function(){var t=this;this._onAfterUnbindObserver||!this._sourceTexture||(this._onAfterUnbindObserver=this._sourceTexture.onAfterUnbindObservable.add(function(){var r,n,i=t._camera.getScene().getEngine();(r=i._debugPushGroup)===null||r===void 0||r.call(i,"min max reduction",1),t._reductionSteps[0].activate(t._camera),t._postProcessManager.directRender(t._reductionSteps,t._reductionSteps[0].inputTexture,t._forceFullscreenViewport),i.unBindFramebuffer(t._reductionSteps[0].inputTexture,!1),(n=i._debugPopGroup)===null||n===void 0||n.call(i,1)}),this._activated=!0)},e.prototype.deactivate=function(){!this._onAfterUnbindObserver||!this._sourceTexture||(this._sourceTexture.onAfterUnbindObservable.remove(this._onAfterUnbindObserver),this._onAfterUnbindObserver=null,this._activated=!1)},e.prototype.dispose=function(t){if(t===void 0&&(t=!0),t&&(this.onAfterReductionPerformed.clear(),this._onContextRestoredObserver&&(this._camera.getEngine().onContextRestoredObservable.remove(this._onContextRestoredObserver),this._onContextRestoredObserver=null)),this.deactivate(),this._reductionSteps){for(var r=0;r<this._reductionSteps.length;++r)this._reductionSteps[r].dispose();this._reductionSteps=null}this._postProcessManager&&t&&this._postProcessManager.dispose(),this._sourceTexture=null},e}(),ra=function(e){R(t,e);function t(r){return e.call(this,r)||this}return Object.defineProperty(t.prototype,"depthRenderer",{get:function(){return this._depthRenderer},enumerable:!1,configurable:!0}),t.prototype.setDepthRenderer=function(r,n,i){r===void 0&&(r=null),n===void 0&&(n=2),i===void 0&&(i=!0);var a=this._camera.getScene();this._depthRenderer&&(delete a._depthRenderer[this._depthRendererId],this._depthRenderer.dispose(),this._depthRenderer=null),r===null&&(a._depthRenderer||(a._depthRenderer={}),r=this._depthRenderer=new Cr(a,n,this._camera,!1,1),r.enabled=!1,this._depthRendererId="minmax"+this._camera.id,a._depthRenderer[this._depthRendererId]=r),e.prototype.setSourceTexture.call(this,r.getDepthMap(),!0,n,i)},t.prototype.setSourceTexture=function(r,n,i,a){i===void 0&&(i=2),a===void 0&&(a=!0),e.prototype.setSourceTexture.call(this,r,n,i,a)},t.prototype.activate=function(){this._depthRenderer&&(this._depthRenderer.enabled=!0),e.prototype.activate.call(this)},t.prototype.deactivate=function(){e.prototype.deactivate.call(this),this._depthRenderer&&(this._depthRenderer.enabled=!1)},t.prototype.dispose=function(r){if(r===void 0&&(r=!0),e.prototype.dispose.call(this,r),this._depthRenderer&&r){var n=this._depthRenderer.getDepthMap().getScene();n&&delete n._depthRenderer[this._depthRendererId],this._depthRenderer.dispose(),this._depthRenderer=null}},t}(dn),vn=function(){function e(){}return e.ConvertPanoramaToCubemap=function(t,r,n,i){if(!t)throw"ConvertPanoramaToCubemap: input cannot be null";if(t.length!=r*n*3)throw"ConvertPanoramaToCubemap: input size is wrong";var a=this.CreateCubemapTexture(i,this.FACE_FRONT,t,r,n),o=this.CreateCubemapTexture(i,this.FACE_BACK,t,r,n),s=this.CreateCubemapTexture(i,this.FACE_LEFT,t,r,n),f=this.CreateCubemapTexture(i,this.FACE_RIGHT,t,r,n),u=this.CreateCubemapTexture(i,this.FACE_UP,t,r,n),c=this.CreateCubemapTexture(i,this.FACE_DOWN,t,r,n);return{front:a,back:o,left:s,right:f,up:u,down:c,size:i,type:1,format:4,gammaSpace:!1}},e.CreateCubemapTexture=function(t,r,n,i,a){for(var o=new ArrayBuffer(t*t*4*3),s=new Float32Array(o),f=r[1].subtract(r[0]).scale(1/t),u=r[3].subtract(r[2]).scale(1/t),c=1/t,l=0,h=0;h<t;h++){for(var d=r[0],v=r[2],g=0;g<t;g++){var p=v.subtract(d).scale(l).add(d);p.normalize();var m=this.CalcProjectionSpherical(p,n,i,a);s[h*t*3+g*3+0]=m.r,s[h*t*3+g*3+1]=m.g,s[h*t*3+g*3+2]=m.b,d=d.add(f),v=v.add(u)}l+=c}return s},e.CalcProjectionSpherical=function(t,r,n,i){for(var a=Math.atan2(t.z,t.x),o=Math.acos(t.y);a<-Math.PI;)a+=2*Math.PI;for(;a>Math.PI;)a-=2*Math.PI;var s=a/Math.PI,f=o/Math.PI;s=s*.5+.5;var u=Math.round(s*n);u<0?u=0:u>=n&&(u=n-1);var c=Math.round(f*i);c<0?c=0:c>=i&&(c=i-1);var l=i-c-1,h=r[l*n*3+u*3+0],d=r[l*n*3+u*3+1],v=r[l*n*3+u*3+2];return{r:h,g:d,b:v}},e.FACE_LEFT=[new C(-1,-1,-1),new C(1,-1,-1),new C(-1,1,-1),new C(1,1,-1)],e.FACE_RIGHT=[new C(1,-1,1),new C(-1,-1,1),new C(1,1,1),new C(-1,1,1)],e.FACE_FRONT=[new C(1,-1,-1),new C(1,-1,1),new C(1,1,-1),new C(1,1,1)],e.FACE_BACK=[new C(-1,-1,1),new C(-1,-1,-1),new C(-1,1,1),new C(-1,1,-1)],e.FACE_DOWN=[new C(1,1,-1),new C(1,1,1),new C(-1,1,-1),new C(-1,1,1)],e.FACE_UP=[new C(-1,-1,-1),new C(-1,-1,1),new C(1,-1,-1),new C(1,-1,1)],e}(),na=function(){function e(){}return e._Ldexp=function(t,r){return r>1023?t*Math.pow(2,1023)*Math.pow(2,r-1023):r<-1074?t*Math.pow(2,-1074)*Math.pow(2,r+1074):t*Math.pow(2,r)},e._Rgbe2float=function(t,r,n,i,a,o){a>0?(a=this._Ldexp(1,a-(128+8)),t[o+0]=r*a,t[o+1]=n*a,t[o+2]=i*a):(t[o+0]=0,t[o+1]=0,t[o+2]=0)},e._ReadStringLine=function(t,r){for(var n="",i="",a=r;a<t.length-r&&(i=String.fromCharCode(t[a]),i!=`
`);a++)n+=i;return n},e.RGBE_ReadHeader=function(t){var r=0,n=0,i=this._ReadStringLine(t,0);if(i[0]!="#"||i[1]!="?")throw"Bad HDR Format.";var a=!1,o=!1,s=0;do s+=i.length+1,i=this._ReadStringLine(t,s),i=="FORMAT=32-bit_rle_rgbe"?o=!0:i.length==0&&(a=!0);while(!a);if(!o)throw"HDR Bad header format, unsupported FORMAT";s+=i.length+1,i=this._ReadStringLine(t,s);var f=/^-Y (.*) \+X (.*)$/g,u=f.exec(i);if(!u||u.length<3)throw"HDR Bad header format, no size";if(n=parseInt(u[2]),r=parseInt(u[1]),n<8||n>32767)throw"HDR Bad header format, unsupported size";return s+=i.length+1,{height:r,width:n,dataPosition:s}},e.GetCubeMapTextureData=function(t,r){var n=new Uint8Array(t),i=this.RGBE_ReadHeader(n),a=this.RGBE_ReadPixels(n,i),o=vn.ConvertPanoramaToCubemap(a,i.width,i.height,r);return o},e.RGBE_ReadPixels=function(t,r){return this._RGBEReadPixelsRLE(t,r)},e._RGBEReadPixelsRLE=function(t,r){for(var n=r.height,i=r.width,a,o,s,f,u,c=r.dataPosition,l=0,h=0,d=0,v=new ArrayBuffer(i*4),g=new Uint8Array(v),p=new ArrayBuffer(r.width*r.height*4*3),m=new Float32Array(p);n>0;){if(a=t[c++],o=t[c++],s=t[c++],f=t[c++],a!=2||o!=2||s&128||r.width<8||r.width>32767)return this._RGBEReadPixelsNOTRLE(t,r);if((s<<8|f)!=i)throw"HDR Bad header format, wrong scan line width";for(l=0,d=0;d<4;d++)for(h=(d+1)*i;l<h;)if(a=t[c++],o=t[c++],a>128){if(u=a-128,u==0||u>h-l)throw"HDR Bad Format, bad scanline data (run)";for(;u-- >0;)g[l++]=o}else{if(u=a,u==0||u>h-l)throw"HDR Bad Format, bad scanline data (non-run)";if(g[l++]=o,--u>0)for(var A=0;A<u;A++)g[l++]=t[c++]}for(d=0;d<i;d++)a=g[d],o=g[d+i],s=g[d+2*i],f=g[d+3*i],this._Rgbe2float(m,a,o,s,f,(r.height-n)*i*3+d*3);n--}return m},e._RGBEReadPixelsNOTRLE=function(t,r){for(var n=r.height,i=r.width,a,o,s,f,u,c=r.dataPosition,l=new ArrayBuffer(r.width*r.height*4*3),h=new Float32Array(l);n>0;){for(u=0;u<r.width;u++)a=t[c++],o=t[c++],s=t[c++],f=t[c++],this._Rgbe2float(h,a,o,s,f,(r.height-n)*i*3+u*3);n--}return h},e}(),gn=1,pn=2,mn=3,An=9,Cn=10,_n=11,bn=48,wn=4,yn=0,Pn=1,Tn=2,En=3;function nr(e){var t=0,r={id_length:e[t++],colormap_type:e[t++],image_type:e[t++],colormap_index:e[t++]|e[t++]<<8,colormap_length:e[t++]|e[t++]<<8,colormap_size:e[t++],origin:[e[t++]|e[t++]<<8,e[t++]|e[t++]<<8],width:e[t++]|e[t++]<<8,height:e[t++]|e[t++]<<8,pixel_size:e[t++],flags:e[t++]};return r}function Rn(e,t){if(t.length<19){P.Error("Unable to load TGA file - Not enough data to contain header");return}var r=18,n=nr(t);if(n.id_length+r>t.length){P.Error("Unable to load TGA file - Not enough data");return}r+=n.id_length;var i=!1,a=!1,o=!1;switch(n.image_type){case An:i=!0;case gn:a=!0;break;case Cn:i=!0;case pn:break;case _n:i=!0;case mn:o=!0;break}var s,f=n.pixel_size>>3,u=n.width*n.height*f,c;if(a&&(c=t.subarray(r,r+=n.colormap_length*(n.colormap_size>>3))),i){s=new Uint8Array(u);for(var l=void 0,h=void 0,d=void 0,v=0,g=new Uint8Array(f);r<u&&v<u;)if(l=t[r++],h=(l&127)+1,l&128){for(d=0;d<f;++d)g[d]=t[r++];for(d=0;d<h;++d)s.set(g,v+d*f);v+=f*h}else{for(h*=f,d=0;d<h;++d)s[v+d]=t[r++];v+=h}}else s=t.subarray(r,r+=a?n.width*n.height:u);var p,m,A,_,b,w;switch((n.flags&bn)>>wn){default:case Tn:p=0,A=1,w=n.width,m=0,_=1,b=n.height;break;case yn:p=0,A=1,w=n.width,m=n.height-1,_=-1,b=-1;break;case En:p=n.width-1,A=-1,w=-1,m=0,_=1,b=n.height;break;case Pn:p=n.width-1,A=-1,w=-1,m=n.height-1,_=-1,b=-1;break}var E="_getImageData"+(o?"Grey":"")+n.pixel_size+"bits",y=Un[E](n,c,s,m,_,b,p,A,w),T=e.getEngine();T._uploadDataToTextureDirectly(e,y)}function Bn(e,t,r,n,i,a,o,s,f){var u=r,c=t,l=e.width,h=e.height,d,v=0,g,p,m=new Uint8Array(l*h*4);for(p=n;p!==a;p+=i)for(g=o;g!==f;g+=s,v++)d=u[v],m[(g+l*p)*4+3]=255,m[(g+l*p)*4+2]=c[d*3+0],m[(g+l*p)*4+1]=c[d*3+1],m[(g+l*p)*4+0]=c[d*3+2];return m}function Dn(e,t,r,n,i,a,o,s,f){var u=r,c=e.width,l=e.height,h,d=0,v,g,p=new Uint8Array(c*l*4);for(g=n;g!==a;g+=i)for(v=o;v!==f;v+=s,d+=2){h=u[d+0]+(u[d+1]<<8);var m=((h&31744)>>10)*255/31|0,A=((h&992)>>5)*255/31|0,_=(h&31)*255/31|0;p[(v+c*g)*4+0]=m,p[(v+c*g)*4+1]=A,p[(v+c*g)*4+2]=_,p[(v+c*g)*4+3]=h&32768?0:255}return p}function Fn(e,t,r,n,i,a,o,s,f){var u=r,c=e.width,l=e.height,h=0,d,v,g=new Uint8Array(c*l*4);for(v=n;v!==a;v+=i)for(d=o;d!==f;d+=s,h+=3)g[(d+c*v)*4+3]=255,g[(d+c*v)*4+2]=u[h+0],g[(d+c*v)*4+1]=u[h+1],g[(d+c*v)*4+0]=u[h+2];return g}function Ln(e,t,r,n,i,a,o,s,f){var u=r,c=e.width,l=e.height,h=0,d,v,g=new Uint8Array(c*l*4);for(v=n;v!==a;v+=i)for(d=o;d!==f;d+=s,h+=4)g[(d+c*v)*4+2]=u[h+0],g[(d+c*v)*4+1]=u[h+1],g[(d+c*v)*4+0]=u[h+2],g[(d+c*v)*4+3]=u[h+3];return g}function On(e,t,r,n,i,a,o,s,f){var u=r,c=e.width,l=e.height,h,d=0,v,g,p=new Uint8Array(c*l*4);for(g=n;g!==a;g+=i)for(v=o;v!==f;v+=s,d++)h=u[d],p[(v+c*g)*4+0]=h,p[(v+c*g)*4+1]=h,p[(v+c*g)*4+2]=h,p[(v+c*g)*4+3]=255;return p}function Sn(e,t,r,n,i,a,o,s,f){var u=r,c=e.width,l=e.height,h=0,d,v,g=new Uint8Array(c*l*4);for(v=n;v!==a;v+=i)for(d=o;d!==f;d+=s,h+=2)g[(d+c*v)*4+0]=u[h+0],g[(d+c*v)*4+1]=u[h+0],g[(d+c*v)*4+2]=u[h+0],g[(d+c*v)*4+3]=u[h+1];return g}var Un={GetTGAHeader:nr,UploadContent:Rn,_getImageData8bits:Bn,_getImageData16bits:Dn,_getImageData24bits:Fn,_getImageData32bits:Ln,_getImageDataGrey8bits:On,_getImageDataGrey16bits:Sn},N;(function(e){e[e.cTFETC1=0]="cTFETC1",e[e.cTFETC2=1]="cTFETC2",e[e.cTFBC1=2]="cTFBC1",e[e.cTFBC3=3]="cTFBC3",e[e.cTFBC4=4]="cTFBC4",e[e.cTFBC5=5]="cTFBC5",e[e.cTFBC7=6]="cTFBC7",e[e.cTFPVRTC1_4_RGB=8]="cTFPVRTC1_4_RGB",e[e.cTFPVRTC1_4_RGBA=9]="cTFPVRTC1_4_RGBA",e[e.cTFASTC_4x4=10]="cTFASTC_4x4",e[e.cTFATC_RGB=11]="cTFATC_RGB",e[e.cTFATC_RGBA_INTERPOLATED_ALPHA=12]="cTFATC_RGBA_INTERPOLATED_ALPHA",e[e.cTFRGBA32=13]="cTFRGBA32",e[e.cTFRGB565=14]="cTFRGB565",e[e.cTFBGR565=15]="cTFBGR565",e[e.cTFRGBA4444=16]="cTFRGBA4444",e[e.cTFFXT1_RGB=17]="cTFFXT1_RGB",e[e.cTFPVRTC2_4_RGB=18]="cTFPVRTC2_4_RGB",e[e.cTFPVRTC2_4_RGBA=19]="cTFPVRTC2_4_RGBA",e[e.cTFETC2_EAC_R11=20]="cTFETC2_EAC_R11",e[e.cTFETC2_EAC_RG11=21]="cTFETC2_EAC_RG11"})(N||(N={}));var te={JSModuleURL:"https://cdn.babylonjs.com/basisTranscoder/1/basis_transcoder.js",WasmModuleURL:"https://cdn.babylonjs.com/basisTranscoder/1/basis_transcoder.wasm"},Mn=function(e,t){var r;switch(e){case N.cTFETC1:r=36196;break;case N.cTFBC1:r=33776;break;case N.cTFBC4:r=33779;break;case N.cTFASTC_4x4:r=37808;break;case N.cTFETC2:r=37496;break;case N.cTFBC7:r=36492;break}if(r===void 0)throw"The chosen Basis transcoder format is not currently supported";return r},ke=null,H=null,xn=0,In=!1,kn=function(){return ke||(ke=new Promise(function(e,t){H?e(H):D.LoadFileAsync(te.WasmModuleURL).then(function(r){if(typeof URL!="function")return t("Basis transcoder requires an environment with a URL constructor");var n=URL.createObjectURL(new Blob(["(".concat(Hn,")()")],{type:"application/javascript"}));H=new Worker(n);var i=function(a){a.data.action==="init"?(H.removeEventListener("message",i),e(H)):a.data.action==="error"&&t(a.data.error||"error initializing worker")};H.addEventListener("message",i),H.postMessage({action:"init",url:te.JSModuleURL,wasmBinary:r})}).catch(t)})),ke},Kn=function(e,t){var r=e instanceof ArrayBuffer?new Uint8Array(e):e;return new Promise(function(n,i){kn().then(function(){var a=xn++,o=function(f){f.data.action==="transcode"&&f.data.id===a&&(H.removeEventListener("message",o),f.data.success?n(f.data):i("Transcode is not supported on this device"))};H.addEventListener("message",o);var s=new Uint8Array(r.byteLength);s.set(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)),H.postMessage({action:"transcode",id:a,imageData:s,config:t,ignoreSupportedFormats:In},[s.buffer])},function(a){i(a)})})},Gn=function(e,t){for(var r=e.getEngine(),n=function(a){var o=t.fileInfo.images[a].levels[0];if(e._invertVScale=e.invertY,t.format===-1||t.format===N.cTFRGB565)if(e.type=10,e.format=4,r._features.basisNeedsPOT&&(B.Log2(o.width)%1!==0||B.Log2(o.height)%1!==0)){var s=new Je(r,Ce.Temp);e._invertVScale=e.invertY,s.type=10,s.format=4,s.width=o.width+3&-4,s.height=o.height+3&-4,r._bindTextureDirectly(r._gl.TEXTURE_2D,s,!0),r._uploadDataToTextureDirectly(s,new Uint16Array(o.transcodedPixels.buffer),a,0,4,!0),r._rescaleTexture(s,e,r.scenes[0],r._getInternalFormat(4),function(){r._releaseTexture(s),r._bindTextureDirectly(r._gl.TEXTURE_2D,e,!0)})}else e._invertVScale=!e.invertY,e.width=o.width+3&-4,e.height=o.height+3&-4,e.samplingMode=2,r._uploadDataToTextureDirectly(e,new Uint16Array(o.transcodedPixels.buffer),a,0,4,!0);else{e.width=o.width,e.height=o.height,e.generateMipMaps=t.fileInfo.images[a].levels.length>1;var f=nt.GetInternalFormatFromBasisFormat(t.format,r);e.format=f,t.fileInfo.images[a].levels.forEach(function(u,c){r._uploadCompressedDataToTextureDirectly(e,f,u.width,u.height,u.transcodedPixels,a,c)}),r._features.basisNeedsPOT&&(B.Log2(e.width)%1!==0||B.Log2(e.height)%1!==0)&&(D.Warn("Loaded .basis texture width and height are not a power of two. Texture wrapping will be set to Texture.CLAMP_ADDRESSMODE as other modes are not supported with non power of two dimensions in webGL 1."),e._cachedWrapU=z.CLAMP_ADDRESSMODE,e._cachedWrapV=z.CLAMP_ADDRESSMODE)}},i=0;i<t.fileInfo.images.length;i++)n(i)},nt={JSModuleURL:te.JSModuleURL,WasmModuleURL:te.WasmModuleURL,GetInternalFormatFromBasisFormat:Mn,TranscodeAsync:Kn,LoadTextureFromTranscodeResult:Gn};function Hn(){var e={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7:6,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16,cTFFXT1_RGB:17,cTFPVRTC2_4_RGB:18,cTFPVRTC2_4_RGBA:19,cTFETC2_EAC_R11:20,cTFETC2_EAC_RG11:21},t=null;onmessage=function(o){if(o.data.action==="init"){if(!t){try{importScripts(o.data.url)}catch(w){postMessage({action:"error",error:w})}t=BASIS({wasmBinary:o.data.wasmBinary})}t!==null&&t.then(function(w){BASIS=w,w.initializeBasis(),postMessage({action:"init"})})}else if(o.data.action==="transcode"){var s=o.data.config,f=o.data.imageData,u=new BASIS.BasisFile(f),c=n(u),l=o.data.ignoreSupportedFormats?null:r(o.data.config,c),h=!1;l===null&&(h=!0,l=c.hasAlpha?e.cTFBC3:e.cTFBC1);var d=!0;u.startTranscoding()||(d=!1);for(var v=[],g=0;g<c.images.length&&d;g++){var p=c.images[g];if(s.loadSingleImage===void 0||s.loadSingleImage===g){var m=p.levels.length;s.loadMipmapLevels===!1&&(m=1);for(var A=0;A<m;A++){var _=p.levels[A],b=i(u,g,A,l,h);if(!b){d=!1;break}_.transcodedPixels=b,v.push(_.transcodedPixels.buffer)}}}u.close(),u.delete(),h&&(l=-1),d?postMessage({action:"transcode",success:d,id:o.data.id,fileInfo:c,format:l},v):postMessage({action:"transcode",success:d,id:o.data.id})}};function r(o,s){var f=null;return o.supportedCompressionFormats&&(o.supportedCompressionFormats.astc?f=e.cTFASTC_4x4:o.supportedCompressionFormats.bc7?f=e.cTFBC7:o.supportedCompressionFormats.s3tc?f=s.hasAlpha?e.cTFBC3:e.cTFBC1:o.supportedCompressionFormats.pvrtc?f=s.hasAlpha?e.cTFPVRTC1_4_RGBA:e.cTFPVRTC1_4_RGB:o.supportedCompressionFormats.etc2?f=e.cTFETC2:o.supportedCompressionFormats.etc1?f=e.cTFETC1:f=e.cTFRGB565),f}function n(o){for(var s=o.getHasAlpha(),f=o.getNumImages(),u=[],c=0;c<f;c++){for(var l={levels:[]},h=o.getNumLevels(c),d=0;d<h;d++){var v={width:o.getImageWidth(c,d),height:o.getImageHeight(c,d)};l.levels.push(v)}u.push(l)}var g={hasAlpha:s,images:u};return g}function i(o,s,f,u,c){var l=o.getImageTranscodedSizeInBytes(s,f,u),h=new Uint8Array(l);if(!o.transcodeImage(h,s,f,u,1,0))return null;if(c){var d=o.getImageWidth(s,f)+3&-4,v=o.getImageHeight(s,f)+3&-4;h=a(h,0,d,v)}return h}function a(o,s,f,u){for(var c=new Uint16Array(4),l=new Uint16Array(f*u),h=f/4,d=u/4,v=0;v<d;v++)for(var g=0;g<h;g++){var p=s+8*(v*h+g);c[0]=o[p]|o[p+1]<<8,c[1]=o[p+2]|o[p+3]<<8,c[2]=(2*(c[0]&31)+1*(c[1]&31))/3|(2*(c[0]&2016)+1*(c[1]&2016))/3&2016|(2*(c[0]&63488)+1*(c[1]&63488))/3&63488,c[3]=(2*(c[1]&31)+1*(c[0]&31))/3|(2*(c[1]&2016)+1*(c[0]&2016))/3&2016|(2*(c[1]&63488)+1*(c[0]&63488))/3&63488;for(var m=0;m<4;m++){var A=o[p+4+m],_=(v*4+m)*f+g*4;l[_++]=c[A&3],l[_++]=c[A>>2&3],l[_++]=c[A>>4&3],l[_++]=c[A>>6&3]}}return l}}Object.defineProperty(nt,"JSModuleURL",{get:function(){return te.JSModuleURL},set:function(e){te.JSModuleURL=e}});Object.defineProperty(nt,"WasmModuleURL",{get:function(){return te.WasmModuleURL},set:function(e){te.WasmModuleURL=e}});var ia=function(){function e(t,r,n){this.gradient=t,this.color1=r,this.color2=n}return e.prototype.getColorToRef=function(t){if(!this.color2){t.copyFrom(this.color1);return}Ht.LerpToRef(this.color1,this.color2,Math.random(),t)},e}(),aa=function(){function e(t,r){this.gradient=t,this.color=r}return e}(),oa=function(){function e(t,r,n){this.gradient=t,this.factor1=r,this.factor2=n}return e.prototype.getFactor=function(){return this.factor2===void 0||this.factor2===this.factor1?this.factor1:this.factor1+(this.factor2-this.factor1)*Math.random()},e}(),sa=function(){function e(){}return e.GetCurrentGradient=function(t,r,n){if(r[0].gradient>t){n(r[0],r[0],1);return}for(var i=0;i<r.length-1;i++){var a=r[i],o=r[i+1];if(t>=a.gradient&&t<=o.gradient){var s=(t-a.gradient)/(o.gradient-a.gradient);n(a,o,s);return}}var f=r.length-1;n(r[f],r[f],1)},e}(),ae;(function(e){e[e.INIT=0]="INIT",e[e.RUNNING=1]="RUNNING",e[e.DONE=2]="DONE",e[e.ERROR=3]="ERROR"})(ae||(ae={}));var V=function(){function e(t){this.name=t,this._isCompleted=!1,this._taskState=ae.INIT}return Object.defineProperty(e.prototype,"isCompleted",{get:function(){return this._isCompleted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"taskState",{get:function(){return this._taskState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorObject",{get:function(){return this._errorObject},enumerable:!1,configurable:!0}),e.prototype._setErrorObject=function(t,r){this._errorObject||(this._errorObject={message:t,exception:r})},e.prototype.run=function(t,r,n){var i=this;this._taskState=ae.RUNNING,this.runTask(t,function(){i._onDoneCallback(r,n)},function(a,o){i._onErrorCallback(n,a,o)})},e.prototype.runTask=function(t,r,n){throw new Error("runTask is not implemented")},e.prototype.reset=function(){this._taskState=ae.INIT},e.prototype._onErrorCallback=function(t,r,n){this._taskState=ae.ERROR,this._errorObject={message:r,exception:n},this.onError&&this.onError(this,r,n),t()},e.prototype._onDoneCallback=function(t,r){try{this._taskState=ae.DONE,this._isCompleted=!0,this.onSuccess&&this.onSuccess(this),t()}catch(n){this._onErrorCallback(r,"Task is done, error executing success callback(s)",n)}},e}();(function(e){R(t,e);function t(r,n,i,a){var o=e.call(this,r)||this;return o.name=r,o.meshesNames=n,o.rootUrl=i,o.sceneFilename=a,o}return t.prototype.runTask=function(r,n,i){var a=this;me.LoadAssetContainer(this.rootUrl,this.sceneFilename,r,function(o){a.loadedContainer=o,a.loadedMeshes=o.meshes,a.loadedTransformNodes=o.transformNodes,a.loadedParticleSystems=o.particleSystems,a.loadedSkeletons=o.skeletons,a.loadedAnimationGroups=o.animationGroups,n()},null,function(o,s,f){i(s,f)})},t})(V);(function(e){R(t,e);function t(r,n,i,a){var o=e.call(this,r)||this;return o.name=r,o.meshesNames=n,o.rootUrl=i,o.sceneFilename=a,o}return t.prototype.runTask=function(r,n,i){var a=this;me.ImportMesh(this.meshesNames,this.rootUrl,this.sceneFilename,r,function(o,s,f,u,c){a.loadedMeshes=o,a.loadedTransformNodes=c,a.loadedParticleSystems=s,a.loadedSkeletons=f,a.loadedAnimationGroups=u,n()},null,function(o,s,f){i(s,f)})},t})(V);(function(e){R(t,e);function t(r,n){var i=e.call(this,r)||this;return i.name=r,i.url=n,i}return t.prototype.runTask=function(r,n,i){var a=this;r._loadFile(this.url,function(o){a.text=o,n()},void 0,!1,!1,function(o,s){o&&i(o.status+" "+o.statusText,s)})},t})(V);(function(e){R(t,e);function t(r,n){var i=e.call(this,r)||this;return i.name=r,i.url=n,i}return t.prototype.runTask=function(r,n,i){var a=this;r._loadFile(this.url,function(o){a.data=o,n()},void 0,!0,!0,function(o,s){o&&i(o.status+" "+o.statusText,s)})},t})(V);(function(e){R(t,e);function t(r,n){var i=e.call(this,r)||this;return i.name=r,i.url=n,i}return t.prototype.runTask=function(r,n,i){var a=this,o=new Image;D.SetCorsBehavior(this.url,o),o.onload=function(){a.image=o,n()},o.onerror=function(s){i("Error loading image",s)},o.src=this.url},t})(V);(function(e){R(t,e);function t(r,n,i,a,o){a===void 0&&(a=!0),o===void 0&&(o=z.TRILINEAR_SAMPLINGMODE);var s=e.call(this,r)||this;return s.name=r,s.url=n,s.noMipmap=i,s.invertY=a,s.samplingMode=o,s}return t.prototype.runTask=function(r,n,i){var a=function(){n()},o=function(s,f){i(s,f)};this.texture=new z(this.url,r,this.noMipmap,this.invertY,this.samplingMode,a,o)},t})(V);(function(e){R(t,e);function t(r,n,i,a,o,s){var f=e.call(this,r)||this;return f.name=r,f.url=n,f.extensions=i,f.noMipmap=a,f.files=o,f.prefiltered=s,f}return t.prototype.runTask=function(r,n,i){var a=function(){n()},o=function(s,f){i(s,f)};this.texture=new lr(this.url,r,this.extensions,this.noMipmap,this.files,a,o,void 0,this.prefiltered)},t})(V);(function(e){R(t,e);function t(r,n,i,a,o,s,f){a===void 0&&(a=!1),o===void 0&&(o=!0),s===void 0&&(s=!1),f===void 0&&(f=!1);var u=e.call(this,r)||this;return u.name=r,u.url=n,u.size=i,u.noMipmap=a,u.generateHarmonics=o,u.gammaSpace=s,u.reserved=f,u}return t.prototype.runTask=function(r,n,i){var a=function(){n()},o=function(s,f){i(s,f)};this.texture=new hr(this.url,r,this.size,this.noMipmap,this.generateHarmonics,this.gammaSpace,this.reserved,a,o)},t})(V);(function(e){R(t,e);function t(r,n,i,a,o){a===void 0&&(a=!1),o===void 0&&(o=!0);var s=e.call(this,r)||this;return s.name=r,s.url=n,s.size=i,s.noMipmap=a,s.gammaSpace=o,s}return t.prototype.runTask=function(r,n,i){var a=function(){n()},o=function(s,f){i(s,f)};this.texture=new dr(this.url,r,this.size,this.noMipmap,this.gammaSpace,a,o)},t})(V);var ua=function(){function e(){var t=this;this.promise=new Promise(function(r,n){t._resolve=r,t._reject=n})}return Object.defineProperty(e.prototype,"resolve",{get:function(){return this._resolve},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reject",{get:function(){return this._reject},enumerable:!1,configurable:!0}),e}();(function(){function e(t,r,n,i,a,o,s,f,u){var c=this;this.onProcessFileCallback=function(){return!0},this.loadAsync=function(l,h){return me.LoadAsync("file:",l,c._engine,h)},this._engine=t,this._currentScene=r,this._sceneLoadedCallback=n,this._progressCallback=i,this._additionalRenderLoopLogicCallback=a,this._textureLoadingCallback=o,this._startingProcessingFilesCallback=s,this._onReloadCallback=f,this._errorCallback=u}return Object.defineProperty(e,"FilesToLoad",{get:function(){return Ae.FilesToLoad},enumerable:!1,configurable:!0}),e.prototype.monitorElementForDragNDrop=function(t){var r=this;t&&(this._elementToMonitor=t,this._dragEnterHandler=function(n){r._drag(n)},this._dragOverHandler=function(n){r._drag(n)},this._dropHandler=function(n){r._drop(n)},this._elementToMonitor.addEventListener("dragenter",this._dragEnterHandler,!1),this._elementToMonitor.addEventListener("dragover",this._dragOverHandler,!1),this._elementToMonitor.addEventListener("drop",this._dropHandler,!1))},Object.defineProperty(e.prototype,"filesToLoad",{get:function(){return this._filesToLoad},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){!this._elementToMonitor||(this._elementToMonitor.removeEventListener("dragenter",this._dragEnterHandler),this._elementToMonitor.removeEventListener("dragover",this._dragOverHandler),this._elementToMonitor.removeEventListener("drop",this._dropHandler))},e.prototype._renderFunction=function(){if(this._additionalRenderLoopLogicCallback&&this._additionalRenderLoopLogicCallback(),this._currentScene){if(this._textureLoadingCallback){var t=this._currentScene.getWaitingItemsCount();t>0&&this._textureLoadingCallback(t)}this._currentScene.render()}},e.prototype._drag=function(t){t.stopPropagation(),t.preventDefault()},e.prototype._drop=function(t){t.stopPropagation(),t.preventDefault(),this.loadFiles(t)},e.prototype._traverseFolder=function(t,r,n,i){var a=this,o=t.createReader(),s=t.fullPath.replace(/^\//,"").replace(/(.+?)\/?$/,"$1/");o.readEntries(function(f){n.count+=f.length;for(var u=0,c=f;u<c.length;u++){var l=c[u];l.isFile?l.file(function(h){h.correctName=s+h.name,r.push(h),--n.count===0&&i()}):l.isDirectory&&a._traverseFolder(l,r,n,i)}--n.count===0&&i()})},e.prototype._processFiles=function(t){for(var r=this,n=0;n<t.length;n++){var i=t[n].correctName.toLowerCase(),a=i.split(".").pop();!this.onProcessFileCallback(t[n],i,a,function(o){return r._sceneFileToLoad=o})||(me.IsPluginForExtensionAvailable("."+a)&&(this._sceneFileToLoad=t[n]),e.FilesToLoad[i]=t[n])}},e.prototype.loadFiles=function(t){var r=this;if(t&&t.dataTransfer&&t.dataTransfer.files&&(this._filesToLoad=t.dataTransfer.files),t&&t.target&&t.target.files&&(this._filesToLoad=t.target.files),!(!this._filesToLoad||this._filesToLoad.length===0)&&(this._startingProcessingFilesCallback&&this._startingProcessingFilesCallback(this._filesToLoad),this._filesToLoad&&this._filesToLoad.length>0)){for(var n=new Array,i=[],a=t.dataTransfer?t.dataTransfer.items:null,o=0;o<this._filesToLoad.length;o++){var s=this._filesToLoad[o],f=s.name.toLowerCase(),u=void 0;if(s.correctName=f,a){var c=a[o];c.getAsEntry?u=c.getAsEntry():c.webkitGetAsEntry&&(u=c.webkitGetAsEntry())}u&&u.isDirectory?i.push(u):n.push(s)}if(i.length===0)this._processFiles(n),this._processReload();else for(var l={count:i.length},h=0,d=i;h<d.length;h++){var v=d[h];this._traverseFolder(v,n,l,function(){r._processFiles(n),l.count===0&&r._processReload()})}}},e.prototype._processReload=function(){this._onReloadCallback?this._onReloadCallback(this._sceneFileToLoad):this.reload()},e.prototype.reload=function(){var t=this;this._sceneFileToLoad?(this._currentScene&&(P.errorsCount>0&&P.ClearLogCache(),this._engine.stopRenderLoop()),me.ShowLoadingScreen=!1,this._engine.displayLoadingUI(),this.loadAsync(this._sceneFileToLoad,this._progressCallback).then(function(r){t._currentScene&&t._currentScene.dispose(),t._currentScene=r,t._sceneLoadedCallback&&t._sceneLoadedCallback(t._sceneFileToLoad,t._currentScene),t._currentScene.executeWhenReady(function(){t._engine.hideLoadingUI(),t._engine.runRenderLoop(function(){t._renderFunction()})})}).catch(function(r){t._engine.hideLoadingUI(),t._errorCallback&&t._errorCallback(t._sceneFileToLoad,t._currentScene,r.message)})):P.Error("Please provide a valid .babylon file.")},e})();var Y=function(){function e(t){t===void 0&&(t=0),this.priority=t}return e.prototype.getDescription=function(){return""},e.prototype.apply=function(t,r){return!0},e}(),Ke=function(e){R(t,e);function t(r,n,i){r===void 0&&(r=0),n===void 0&&(n=1024),i===void 0&&(i=.5);var a=e.call(this,r)||this;return a.priority=r,a.maximumSize=n,a.step=i,a}return t.prototype.getDescription=function(){return"Reducing render target texture size to "+this.maximumSize},t.prototype.apply=function(r,n){for(var i=!0,a=0;a<r.textures.length;a++){var o=r.textures[a];if(!(!o.canRescale||o.getContext)){var s=o.getSize(),f=Math.max(s.width,s.height);f>this.maximumSize&&(o.scale(this.step),i=!1)}}return i},t}(Y),Ot=function(e){R(t,e);function t(r,n,i){r===void 0&&(r=0),n===void 0&&(n=2),i===void 0&&(i=.25);var a=e.call(this,r)||this;return a.priority=r,a.maximumScale=n,a.step=i,a._currentScale=-1,a._directionOffset=1,a}return t.prototype.getDescription=function(){return"Setting hardware scaling level to "+this._currentScale},t.prototype.apply=function(r,n){return this._currentScale===-1&&(this._currentScale=r.getEngine().getHardwareScalingLevel(),this._currentScale>this.maximumScale&&(this._directionOffset=-1)),this._currentScale+=this._directionOffset*this.step,r.getEngine().setHardwareScalingLevel(this._currentScale),this._directionOffset===1?this._currentScale>=this.maximumScale:this._currentScale<=this.maximumScale},t}(Y),Ge=function(e){R(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDescription=function(){return"Turning shadows on/off"},t.prototype.apply=function(r,n){return r.shadowsEnabled=n.isInImprovementMode,!0},t}(Y),He=function(e){R(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDescription=function(){return"Turning post-processes on/off"},t.prototype.apply=function(r,n){return r.postProcessesEnabled=n.isInImprovementMode,!0},t}(Y),Qe=function(e){R(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDescription=function(){return"Turning lens flares on/off"},t.prototype.apply=function(r,n){return r.lensFlaresEnabled=n.isInImprovementMode,!0},t}(Y),Qn=function(e){R(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDescription=function(){return this.onGetDescription?this.onGetDescription():"Running user defined callback"},t.prototype.apply=function(r,n){return this.onApply?this.onApply(r,n):!0},t}(Y),je=function(e){R(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDescription=function(){return"Turning particles on/off"},t.prototype.apply=function(r,n){return r.particlesEnabled=n.isInImprovementMode,!0},t}(Y),St=function(e){R(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getDescription=function(){return"Turning render targets off"},t.prototype.apply=function(r,n){return r.renderTargetsEnabled=n.isInImprovementMode,!0},t}(Y),Ne=function(e){R(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._canBeMerged=function(n){if(!(n instanceof at))return!1;var i=n;return!(i.isDisposed()||!i.isVisible||!i.isEnabled()||i.instances.length>0||i.skeleton||i.hasLODLevels)},r}return Object.defineProperty(t,"UpdateSelectionTree",{get:function(){return t._UpdateSelectionTree},set:function(r){t._UpdateSelectionTree=r},enumerable:!1,configurable:!0}),t.prototype.getDescription=function(){return"Merging similar meshes together"},t.prototype.apply=function(r,n,i){for(var a=r.meshes.slice(0),o=a.length,s=0;s<o;s++){var f=new Array,u=a[s];if(!!this._canBeMerged(u)){f.push(u);for(var c=s+1;c<o;c++){var l=a[c];!this._canBeMerged(l)||l.material===u.material&&l.checkCollisions===u.checkCollisions&&(f.push(l),o--,a.splice(c,1),c--)}f.length<2||at.MergeMeshes(f,void 0,!0)}}var h=r;return h.createOrUpdateSelectionOctree&&(i!=null?i&&h.createOrUpdateSelectionOctree():t.UpdateSelectionTree&&h.createOrUpdateSelectionOctree()),!0},t._UpdateSelectionTree=!1,t}(Y),Ut=function(){function e(t,r){t===void 0&&(t=60),r===void 0&&(r=2e3),this.targetFrameRate=t,this.trackerDuration=r,this.optimizations=new Array}return e.prototype.addOptimization=function(t){return this.optimizations.push(t),this},e.prototype.addCustomOptimization=function(t,r,n){n===void 0&&(n=0);var i=new Qn(n);return i.onApply=t,i.onGetDescription=r,this.optimizations.push(i),this},e.LowDegradationAllowed=function(t){var r=new e(t),n=0;return r.addOptimization(new Ne(n)),r.addOptimization(new Ge(n)),r.addOptimization(new Qe(n)),n++,r.addOptimization(new He(n)),r.addOptimization(new je(n)),n++,r.addOptimization(new Ke(n,1024)),r},e.ModerateDegradationAllowed=function(t){var r=new e(t),n=0;return r.addOptimization(new Ne(n)),r.addOptimization(new Ge(n)),r.addOptimization(new Qe(n)),n++,r.addOptimization(new He(n)),r.addOptimization(new je(n)),n++,r.addOptimization(new Ke(n,512)),n++,r.addOptimization(new St(n)),n++,r.addOptimization(new Ot(n,2)),r},e.HighDegradationAllowed=function(t){var r=new e(t),n=0;return r.addOptimization(new Ne(n)),r.addOptimization(new Ge(n)),r.addOptimization(new Qe(n)),n++,r.addOptimization(new He(n)),r.addOptimization(new je(n)),n++,r.addOptimization(new Ke(n,256)),n++,r.addOptimization(new St(n)),n++,r.addOptimization(new Ot(n,4)),r},e}();(function(){function e(t,r,n,i){n===void 0&&(n=!0),i===void 0&&(i=!1);var a=this;if(this._isRunning=!1,this._currentPriorityLevel=0,this._targetFrameRate=60,this._trackerDuration=2e3,this._currentFrameRate=0,this._improvementMode=!1,this.onSuccessObservable=new O,this.onNewOptimizationAppliedObservable=new O,this.onFailureObservable=new O,r?this._options=r:this._options=new Ut,this._options.targetFrameRate&&(this._targetFrameRate=this._options.targetFrameRate),this._options.trackerDuration&&(this._trackerDuration=this._options.trackerDuration),n)for(var o=0,s=0,f=this._options.optimizations;s<f.length;s++){var u=f[s];u.priority=o++}this._improvementMode=i,this._scene=t||oe.LastCreatedScene,this._sceneDisposeObserver=this._scene.onDisposeObservable.add(function(){a._sceneDisposeObserver=null,a.dispose()})}return Object.defineProperty(e.prototype,"isInImprovementMode",{get:function(){return this._improvementMode},set:function(t){this._improvementMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentPriorityLevel",{get:function(){return this._currentPriorityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrameRate",{get:function(){return this._currentFrameRate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetFrameRate",{get:function(){return this._targetFrameRate},set:function(t){this._targetFrameRate=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackerDuration",{get:function(){return this._trackerDuration},set:function(t){this._trackerDuration=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optimizations",{get:function(){return this._options.optimizations},enumerable:!1,configurable:!0}),e.prototype.stop=function(){this._isRunning=!1},e.prototype.reset=function(){this._currentPriorityLevel=0},e.prototype.start=function(){var t=this;this._isRunning||(this._isRunning=!0,this._scene.executeWhenReady(function(){setTimeout(function(){t._checkCurrentState()},t._trackerDuration)}))},e.prototype._checkCurrentState=function(){var t=this;if(!!this._isRunning){var r=this._scene,n=this._options;if(this._currentFrameRate=Math.round(r.getEngine().getFps()),this._improvementMode&&this._currentFrameRate<=this._targetFrameRate||!this._improvementMode&&this._currentFrameRate>=this._targetFrameRate){this._isRunning=!1,this.onSuccessObservable.notifyObservers(this);return}for(var i=!0,a=!0,o=0;o<n.optimizations.length;o++){var s=n.optimizations[o];s.priority===this._currentPriorityLevel&&(a=!1,i=i&&s.apply(r,this),this.onNewOptimizationAppliedObservable.notifyObservers(s))}if(a){this._isRunning=!1,this.onFailureObservable.notifyObservers(this);return}i&&this._currentPriorityLevel++,r.executeWhenReady(function(){setTimeout(function(){t._checkCurrentState()},t._trackerDuration)})}},e.prototype.dispose=function(){this.stop(),this.onSuccessObservable.clear(),this.onFailureObservable.clear(),this.onNewOptimizationAppliedObservable.clear(),this._sceneDisposeObserver&&this._scene.onDisposeObservable.remove(this._sceneDisposeObserver)},e.OptimizeAsync=function(t,r,n,i){var a=new e(t,r||Ut.ModerateDegradationAllowed(),!1);return n&&a.onSuccessObservable.add(function(){n()}),i&&a.onFailureObservable.add(function(){i()}),a.start(),a},e})();(function(){function e(t,r){if(r===void 0&&(r={}),!e.IsSupported(t))throw"Your browser does not support recording so far.";var n=t.getRenderingCanvas();if(!n)throw"The babylon engine must have a canvas to be recorded";this._canvas=n,this._canvas.isRecording=!1,this._options=se(se({},e._DefaultOptions),r);var i=this._canvas.captureStream(this._options.fps);if(this._options.audioTracks)for(var a=0,o=this._options.audioTracks;a<o.length;a++){var s=o[a];i.addTrack(s)}this._mediaRecorder=new MediaRecorder(i,{mimeType:this._options.mimeType}),this._mediaRecorder.ondataavailable=this._handleDataAvailable.bind(this),this._mediaRecorder.onerror=this._handleError.bind(this),this._mediaRecorder.onstop=this._handleStop.bind(this)}return e.IsSupported=function(t){var r=t.getRenderingCanvas();return!!r&&typeof r.captureStream=="function"},Object.defineProperty(e.prototype,"isRecording",{get:function(){return!!this._canvas&&this._canvas.isRecording},enumerable:!1,configurable:!0}),e.prototype.stopRecording=function(){!this._canvas||!this._mediaRecorder||!this.isRecording||(this._canvas.isRecording=!1,this._mediaRecorder.stop())},e.prototype.startRecording=function(t,r){var n=this;if(t===void 0&&(t="babylonjs.webm"),r===void 0&&(r=7),!this._canvas||!this._mediaRecorder)throw"Recorder has already been disposed";if(this.isRecording)throw"Recording already in progress";return r>0&&setTimeout(function(){n.stopRecording()},r*1e3),this._fileName=t,this._recordedChunks=[],this._resolve=null,this._reject=null,this._canvas.isRecording=!0,this._mediaRecorder.start(this._options.recordChunckSize),new Promise(function(i,a){n._resolve=i,n._reject=a})},e.prototype.dispose=function(){this._canvas=null,this._mediaRecorder=null,this._recordedChunks=[],this._fileName=null,this._resolve=null,this._reject=null},e.prototype._handleDataAvailable=function(t){t.data.size>0&&this._recordedChunks.push(t.data)},e.prototype._handleError=function(t){if(this.stopRecording(),this._reject)this._reject(t.error);else throw new t.error},e.prototype._handleStop=function(){this.stopRecording();var t=new Blob(this._recordedChunks);this._resolve&&this._resolve(t),window.URL.createObjectURL(t),this._fileName&&D.Download(t,this._fileName)},e._DefaultOptions={mimeType:"video/webm",fps:25,recordChunckSize:3e3},e})();function ir(e,t,r,n,i,a){i===void 0&&(i="image/png"),a===void 0&&(a=!1);var o=ar(e,t,r),s=o.height,f=o.width;if(!(s&&f)){P.Error("Invalid 'size' parameter !");return}D._ScreenshotCanvas||(D._ScreenshotCanvas=document.createElement("canvas")),D._ScreenshotCanvas.width=f,D._ScreenshotCanvas.height=s;var u=D._ScreenshotCanvas.getContext("2d"),c=e.getRenderWidth()/e.getRenderHeight(),l=f,h=l/c;h>s&&(h=s,l=h*c);var d=Math.max(0,f-l)/2,v=Math.max(0,s-h)/2,g=t.getScene();g.activeCamera!==t?it(e,t,r,function(p){if(a){var m=new Blob([p]);D.DownloadBlob(m),n&&n("")}else n&&n(p)},i,1,e.getCreationOptions().antialias):e.onEndFrameObservable.addOnce(function(){var p=e.getRenderingCanvas();u&&p&&u.drawImage(p,d,v,l,h),a?(D.EncodeScreenshotCanvasData(void 0,i),n&&n("")):D.EncodeScreenshotCanvasData(n,i)})}function jn(e,t,r,n){return n===void 0&&(n="image/png"),new Promise(function(i,a){ir(e,t,r,function(o){typeof o!="undefined"?i(o):a(new Error("Data is undefined"))},n)})}function it(e,t,r,n,i,a,o,s,f,u){i===void 0&&(i="image/png"),a===void 0&&(a=1),o===void 0&&(o=!1),f===void 0&&(f=!1),u===void 0&&(u=!1);var c=ar(e,t,r),l=c.height,h=c.width,d={width:h,height:l};if(!(l&&h)){P.Error("Invalid 'size' parameter !");return}var v={width:e.getRenderWidth(),height:e.getRenderHeight()};e.setSize(h,l);var g=t.getScene(),p=null,m=g.activeCameras;g.activeCameras=null,g.activeCamera!==t&&(p=g.activeCamera,g.activeCamera=t),g.render();var A=new vr("screenShot",d,g,!1,!1,0,!1,z.NEAREST_SAMPLINGMODE,void 0,u,void 0,void 0,void 0,a);A.renderList=null,A.samples=a,A.renderSprites=f;var _=function(){e.onEndFrameObservable.addOnce(function(){A.readPixels(void 0,void 0,void 0,!1).then(function(w){D.DumpData(h,l,w,n,i,s,!0),A.dispose()})}),g.incrementRenderId(),g.resetCachedMaterial(),A.render(!0),g.incrementRenderId(),g.resetCachedMaterial(),p&&(g.activeCamera=p),g.activeCameras=m,e.setSize(v.width,v.height),t.getProjectionMatrix(!0),g.render()};if(o){var b=new mr("antialiasing",1,g.activeCamera);A.addPostProcess(b),b.getEffect().isReady()?_():b.getEffect().onCompiled=function(){_()}}else _()}function Nn(e,t,r,n,i,a,o,s){return n===void 0&&(n="image/png"),i===void 0&&(i=1),a===void 0&&(a=!1),s===void 0&&(s=!1),new Promise(function(f,u){it(e,t,r,function(c){typeof c!="undefined"?f(c):u(new Error("Data is undefined"))},n,i,a,o,s)})}function ar(e,t,r){var n=0,i=0;if(typeof r=="object"){var a=r.precision?Math.abs(r.precision):1;r.width&&r.height?(n=r.height*a,i=r.width*a):r.width&&!r.height?(i=r.width*a,n=Math.round(i/e.getAspectRatio(t))):r.height&&!r.width?(n=r.height*a,i=Math.round(n*e.getAspectRatio(t))):(i=Math.round(e.getRenderWidth()*a),n=Math.round(i/e.getAspectRatio(t)))}else isNaN(r)||(n=r,i=r);return i&&(i=Math.floor(i)),n&&(n=Math.floor(n)),{height:n|0,width:i|0}}var zn=function(){D.CreateScreenshot=ir,D.CreateScreenshotAsync=jn,D.CreateScreenshotUsingRenderTarget=it,D.CreateScreenshotUsingRenderTargetAsync=Nn};zn();var Mt;(function(e){e[e.Checkbox=0]="Checkbox",e[e.Slider=1]="Slider",e[e.Vector3=2]="Vector3",e[e.Quaternion=3]="Quaternion",e[e.Color3=4]="Color3",e[e.String=5]="String",e[e.Button=6]="Button",e[e.Options=7]="Options",e[e.Tab=8]="Tab",e[e.FileButton=9]="FileButton"})(Mt||(Mt={}));var fa=function(){function e(t){this.byteOffset=0,this.buffer=t}return e.prototype.loadAsync=function(t){var r=this;return this.buffer.readAsync(this.byteOffset,t).then(function(n){r._dataView=new DataView(n.buffer,n.byteOffset,n.byteLength),r._dataByteOffset=0})},e.prototype.readUint32=function(){var t=this._dataView.getUint32(this._dataByteOffset,!0);return this._dataByteOffset+=4,this.byteOffset+=4,t},e.prototype.readUint8Array=function(t){var r=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._dataByteOffset,t);return this._dataByteOffset+=t,this.byteOffset+=t,r},e.prototype.readString=function(t){return Or(this.readUint8Array(t))},e.prototype.skipBytes=function(t){this._dataByteOffset+=t,this.byteOffset+=t},e}();(function(){function e(){}return e._GetStorage=function(){try{return localStorage.setItem("test",""),localStorage.removeItem("test"),localStorage}catch{var t={};return{getItem:function(n){var i=t[n];return i===void 0?null:i},setItem:function(n,i){t[n]=i}}}},e.ReadString=function(t,r){var n=this._Storage.getItem(t);return n!==null?n:r},e.WriteString=function(t,r){this._Storage.setItem(t,r)},e.ReadBoolean=function(t,r){var n=this._Storage.getItem(t);return n!==null?n==="true":r},e.WriteBoolean=function(t,r){this._Storage.setItem(t,r?"true":"false")},e.ReadNumber=function(t,r){var n=this._Storage.getItem(t);return n!==null?parseFloat(n):r},e.WriteNumber=function(t,r){this._Storage.setItem(t,r.toString())},e._Storage=e._GetStorage(),e})();var xt;(function(e){var t=function(){function n(i,a,o,s){a===void 0&&(a=null),o===void 0&&(o=null),s===void 0&&(s=null),a=a!=null?a:function(){return 1},o=o!=null?o:function(){return 1},s=s!=null?s:function(l,h){return l===h?0:1},this._characterToIdx=new Map,this._insertionCosts=new Array(i.length),this._deletionCosts=new Array(i.length),this._substitutionCosts=new Array(i.length);for(var f,u=0;u<i.length;++u){f=i[u],this._characterToIdx.set(f,u),this._insertionCosts[u]=a(f),this._deletionCosts[u]=o(f),this._substitutionCosts[u]=new Array(i.length);for(var c=u;c<i.length;++c)this._substitutionCosts[u][c]=s(f,i[c])}}return n.prototype.serialize=function(){var i={},a=new Array(this._characterToIdx.size);return this._characterToIdx.forEach(function(o,s){a[o]=s}),i.characters=a,i.insertionCosts=this._insertionCosts,i.deletionCosts=this._deletionCosts,i.substitutionCosts=this._substitutionCosts,JSON.stringify(i)},n.Deserialize=function(i){var a=JSON.parse(i),o=new n(a.characters);return o._insertionCosts=a.insertionCosts,o._deletionCosts=a.deletionCosts,o._substitutionCosts=a.substitutionCosts,o},n.prototype.getCharacterIdx=function(i){return this._characterToIdx.get(i)},n.prototype.getInsertionCost=function(i){return this._insertionCosts[i]},n.prototype.getDeletionCost=function(i){return this._deletionCosts[i]},n.prototype.getSubstitutionCost=function(i,a){var o=Math.min(i,a),s=Math.max(i,a);return this._substitutionCosts[o][s]},n}();e.Alphabet=t;var r=function(){function n(i,a){var o=this;if(i.length>n._MAX_SEQUENCE_LENGTH)throw new Error("Sequences longer than "+n._MAX_SEQUENCE_LENGTH+" not supported.");this._alphabet=a,this._characters=i.map(function(s){return o._alphabet.getCharacterIdx(s)})}return n.prototype.serialize=function(){return JSON.stringify(this._characters)},n.Deserialize=function(i,a){var o=new n([],a);return o._characters=JSON.parse(i),o},n.prototype.distance=function(i){return n._Distance(this,i)},n._Distance=function(i,a){var o=i._alphabet;if(o!==a._alphabet)throw new Error("Cannot Levenshtein compare Sequences built from different alphabets.");var s=i._characters,f=a._characters,u=s.length,c=f.length,l=n._CostMatrix;l[0][0]=0;for(var h=0;h<u;++h)l[h+1][0]=l[h][0]+o.getInsertionCost(s[h]);for(var h=0;h<c;++h)l[0][h+1]=l[0][h]+o.getInsertionCost(f[h]);for(var d=0;d<u;++d)for(var v=0;v<c;++v)n._InsertionCost=l[d+1][v]+o.getInsertionCost(f[v]),n._DeletionCost=l[d][v+1]+o.getDeletionCost(s[d]),n._SubstitutionCost=l[d][v]+o.getSubstitutionCost(s[d],f[v]),l[d+1][v+1]=Math.min(n._InsertionCost,n._DeletionCost,n._SubstitutionCost);return l[u][c]},n._MAX_SEQUENCE_LENGTH=256,n._CostMatrix=ur([],Array(n._MAX_SEQUENCE_LENGTH+1),!0).map(function(){return new Array(n._MAX_SEQUENCE_LENGTH+1)}),n}();e.Sequence=r})(xt||(xt={}));(function(){function e(t){t===void 0&&(t=.01),this._points=[],this._segmentLength=t}return e.prototype.serialize=function(){return JSON.stringify(this)},e.Deserialize=function(t){var r=JSON.parse(t),n=new e(r._segmentLength);return n._points=r._points.map(function(i){return new C(i._x,i._y,i._z)}),n},e.prototype.getLength=function(){return this._points.length*this._segmentLength},e.prototype.add=function(t){var r=this,n=this._points.length;if(n===0)this._points.push(t.clone());else for(var i=function(){return r._segmentLength/C.Distance(r._points[n-1],t)},a=i();a<=1;a=i()){var o=this._points[n-1].scale(1-a);t.scaleAndAddToRef(a,o),this._points.push(o),++n}},e.prototype.resampleAtTargetResolution=function(t){var r=new e(this.getLength()/t);return this._points.forEach(function(n){r.add(n)}),r},e.prototype.tokenize=function(t){for(var r=[],n=new C,i=2;i<this._points.length;++i)e._TransformSegmentDirToRef(this._points[i-2],this._points[i-1],this._points[i],n)&&r.push(e._TokenizeSegment(n,t));return r},e._TransformSegmentDirToRef=function(t,r,n,i){var a=.98;return r.subtractToRef(t,e._ForwardDir),e._ForwardDir.normalize(),r.scaleToRef(-1,e._InverseFromVec),e._InverseFromVec.normalize(),Math.abs(C.Dot(e._ForwardDir,e._InverseFromVec))>a?!1:(C.CrossToRef(e._ForwardDir,e._InverseFromVec,e._UpDir),e._UpDir.normalize(),Te.LookAtLHToRef(t,r,e._UpDir,e._LookMatrix),n.subtractToRef(r,e._FromToVec),e._FromToVec.normalize(),C.TransformNormalToRef(e._FromToVec,e._LookMatrix,i),!0)},e._TokenizeSegment=function(t,r){e._BestMatch=0,e._Score=C.Dot(t,r[0]),e._BestScore=e._Score;for(var n=1;n<r.length;++n)e._Score=C.Dot(t,r[n]),e._Score>e._BestScore&&(e._BestMatch=n,e._BestScore=e._Score);return e._BestMatch},e._ForwardDir=new C,e._InverseFromVec=new C,e._UpDir=new C,e._FromToVec=new C,e._LookMatrix=new Te,e})();var Xn=1.5,W=function(){function e(t){this._view=new Float32Array(t),this._itemLength=0}return Object.defineProperty(e.prototype,"itemLength",{get:function(){return this._itemLength},enumerable:!1,configurable:!0}),e.prototype.at=function(t){return t<0||t>=this._itemLength?NaN:this._view[t]},e.prototype.subarray=function(t,r){return t>=r||t<0?new Float32Array(0):(r>this._itemLength&&(r=this._itemLength),this._view.subarray(t,r))},e.prototype.push=function(t){this._view[this._itemLength]=t,this._itemLength++,this._itemLength>=this._view.length&&this._growArray()},e.prototype._growArray=function(){var t=Math.floor(this._view.length*Xn),r=new Float32Array(t);r.set(this._view),this._view=r},e}(),Z=1800,Vn=24,Yn="0",It="timestamp",kt="numPoints",qn=/\r/g,ze="@",Jn=function(){function e(t,r){var n=this;this._scene=t,this._collectDataAtFrame=function(){var i=X.Now-n._startingTimestamp,a=n.datasets.ids.length,o=n.datasets.startingIndices.itemLength,s=0;if(o>0){var f=n.datasets.startingIndices.at(o-1);s=f+n.datasets.data.at(f+e.NumberOfPointsOffset)+e.SliceDataOffset}if(n.datasets.startingIndices.push(s),n.datasets.data.push(i),n.datasets.data.push(a),n.datasets.ids.forEach(function(l){var h=n._strategies.get(l);!h||n.datasets.data.push(h.getData())}),n.datasetObservable.hasObservers()){for(var u=[i,a],c=0;c<a;c++)u.push(n.datasets.data.at(s+e.SliceDataOffset+c));n.datasetObservable.notifyObservers(u)}},this.datasets={ids:[],data:new W(Z),startingIndices:new W(Z)},this._strategies=new Map,this._datasetMeta=new Map,this._eventRestoreSet=new Set,this._customEventObservable=new O,this.datasetObservable=new O,this.metadataObservable=new O(function(i){return i.callback(n._datasetMeta,new Nt(0))}),r&&this.addCollectionStrategies.apply(this,r)}return Object.defineProperty(e,"SliceDataOffset",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"NumberOfPointsOffset",{get:function(){return 1},enumerable:!1,configurable:!0}),e.prototype.registerEvent=function(t,r,n){var i=this,a;if(!(this._strategies.has(t)&&!r)){this._strategies.has(t)&&r&&((a=this._strategies.get(t))===null||a===void 0||a.dispose(),this._strategies.delete(t));var o=function(f){var u=0,c=0,l=f.onAfterRenderObservable.add(function(){c=u,u=0}),h=i._customEventObservable.add(function(d){t===d.name&&(d.value!==void 0?u=d.value:u++)});return{id:t,getData:function(){return c},dispose:function(){f.onAfterRenderObservable.remove(l),i._customEventObservable.remove(h)}}},s={name:t};return this._eventRestoreSet.add(t),this.addCollectionStrategies({strategyCallback:o,category:n}),s}},e.prototype.sendEvent=function(t){this._customEventObservable.notifyObservers(t)},e.prototype._restoreStringEvents=function(){var t=this;this._eventRestoreSet.size!==this._customEventObservable.observers.length&&this._eventRestoreSet.forEach(function(r){t.registerEvent(r,!0)})},e.prototype.addCollectionStrategies=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=0,i=t;n<i.length;n++){var a=i[n],o=a.strategyCallback,s=a.category,f=a.hidden,u=o(this._scene);if(this._strategies.has(u.id)){u.dispose();continue}this.datasets.ids.push(u.id),s&&(s=s.replace(new RegExp(ze,"g"),"")),this._datasetMeta.set(u.id,{color:this._getHexColorFromId(u.id),category:s,hidden:f}),this._strategies.set(u.id,u)}this.metadataObservable.notifyObservers(this._datasetMeta)},e.prototype._getHexColorFromId=function(t){for(var r=0,n=0;n<t.length;n++)r=t.charCodeAt(n)+((r<<5)-r);for(var i="#",n=0;n<Vn;n+=8){var a=r>>n&255;i+=(Yn+a.toString(16)).substr(-2)}return i},e.prototype.getCurrentSlice=function(){var t=this,r=X.Now-this._startingTimestamp,n=this.datasets.ids.length,i=[r,n];this.datasets.ids.forEach(function(a){var o=t._strategies.get(a);!o||t.datasetObservable.hasObservers()&&i.push(o.getData())}),this.datasetObservable.hasObservers()&&this.datasetObservable.notifyObservers(i)},e.prototype.updateMetadata=function(t,r,n){var i=this._datasetMeta.get(t);!i||(i[r]=n,this.metadataObservable.notifyObservers(this._datasetMeta))},e.prototype.clear=function(t){this.datasets.data=new W(Z),this.datasets.ids.length=0,this.datasets.startingIndices=new W(Z),this._datasetMeta.clear(),this._strategies.forEach(function(r){return r.dispose()}),this._strategies.clear(),t||this._eventRestoreSet.clear(),this._hasLoadedData=!1},Object.defineProperty(e.prototype,"hasLoadedData",{get:function(){return this._hasLoadedData},enumerable:!1,configurable:!0}),e.prototype.loadFromFileData=function(t,r){var n=t.replace(qn,"").split(`
`).map(function(y){return y.split(",").filter(function(T){return T.length>0})}).filter(function(y){return y.length>0}),i=0,a=e.NumberOfPointsOffset;if(n.length<2)return!1;var o={ids:[],data:new W(Z),startingIndices:new W(Z)},s=n[0],f=n.slice(1);if(s.length<2||s[i]!==It||s[a]!==kt)return!1;for(var u=new Map,c=e.SliceDataOffset;c<s.length;c++){var l=s[c].split(ze),h=l[0],d=l[1];o.ids.push(h),u.set(h,d)}for(var v=0,g=0,p=f;g<p.length;g++){var m=p[g];if(m.length<2)return!1;var A=parseFloat(m[i]),_=parseInt(m[a]);if(isNaN(_)||isNaN(A)||(o.data.push(A),o.data.push(_),_+e.SliceDataOffset!==m.length))return!1;for(var c=e.SliceDataOffset;c<m.length;c++){var b=parseFloat(m[c]);if(isNaN(b))return!1;o.data.push(b)}o.startingIndices.push(v),v+=m.length}if(this.datasets.ids=o.ids,this.datasets.data=o.data,this.datasets.startingIndices=o.startingIndices,r||this._datasetMeta.clear(),this._strategies.forEach(function(y){return y.dispose()}),this._strategies.clear(),!r)for(var w=0,E=this.datasets.ids;w<E.length;w++){var h=E[w],d=u.get(h);this._datasetMeta.set(h,{category:d,color:this._getHexColorFromId(h)})}return this.metadataObservable.notifyObservers(this._datasetMeta),this._hasLoadedData=!0,!0},e.prototype.exportDataToCsv=function(){var t="";t+="".concat(It,",").concat(kt);for(var r=0;r<this.datasets.ids.length;r++)if(t+=",".concat(this.datasets.ids[r]),this._datasetMeta){var n=this._datasetMeta.get(this.datasets.ids[r]);n!=null&&n.category&&(t+="".concat(ze).concat(n.category))}t+=`
`;for(var r=0;r<this.datasets.startingIndices.itemLength;r++){var i=this.datasets.startingIndices.at(r),a=this.datasets.data.at(i),o=this.datasets.data.at(i+e.NumberOfPointsOffset);t+="".concat(a,",").concat(o);for(var s=0;s<o;s++)t+=",".concat(this.datasets.data.at(i+e.SliceDataOffset+s));for(var f=0;f<this.datasets.ids.length-o;f++)t+=",";t+=`
`}var u="".concat(new Date().toISOString(),"-perfdata.csv");D.Download(new Blob([t],{type:"text/csv"}),u)},e.prototype.start=function(t){t?this._startingTimestamp===void 0&&(this._startingTimestamp=X.Now):(this.datasets.data=new W(Z),this.datasets.startingIndices=new W(Z),this._startingTimestamp=X.Now),this._scene.onAfterRenderObservable.add(this._collectDataAtFrame),this._restoreStringEvents(),this._isStarted=!0},e.prototype.stop=function(){this._scene.onAfterRenderObservable.removeCallback(this._collectDataAtFrame),this._isStarted=!1},Object.defineProperty(e.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._scene.onAfterRenderObservable.removeCallback(this._collectDataAtFrame),this._datasetMeta.clear(),this._strategies.forEach(function(t){t.dispose()}),this.datasetObservable.clear(),this.metadataObservable.clear(),this._isStarted=!1,this.datasets=null},e}();gr.prototype.getPerfCollector=function(){return this._perfCollector||(this._perfCollector=new Jn(this)),this._perfCollector};function Wn(e){var t=new Array,r=new Array,n=new Array,i=e.add(function(){for(var o=t.length,s=0;s<o;s++)Be(t.shift(),r.shift(),n.shift())}),a=function(o,s,f){t.push(o),r.push(s),n.push(f)};return{scheduler:a,dispose:function(){e.remove(i)}}}O.prototype.runCoroutineAsync=function(e){if(!this._coroutineScheduler){var t=Wn(this);this._coroutineScheduler=t.scheduler,this._coroutineSchedulerDispose=t.dispose}return jr(e,this._coroutineScheduler)};O.prototype.cancelAllCoroutines=function(){this._coroutineSchedulerDispose&&this._coroutineSchedulerDispose(),this._coroutineScheduler=void 0,this._coroutineSchedulerDispose=void 0};export{Ki as $,vi as A,Ti as B,Vr as C,yr as D,Xi as E,Ji as F,br as G,Di as H,ee as I,L as J,Ci as K,P as L,ra as M,tt as N,O,X as P,Pi as Q,gi as R,Rr as S,ve as T,Si as U,Hi as V,Ee as W,qt as X,Sr as Y,ki as Z,$ as _,D as a,Se as a0,_i as a1,Xr as a2,Bi as a3,Ei as a4,Zi as a5,fn as a6,ji as a7,$i as a8,ea as a9,fa as aA,rt as aB,ua as aC,ft as aD,na as aa,he as ab,vn as ac,nr as ad,Rn as ae,Kn as af,Gn as ag,zi as ah,ut as ai,Qr as aj,xi as ak,Ri as al,Fi as am,jr as an,Mi as ao,ln as ap,sa as aq,oa as ar,aa as as,ia as at,ta as au,Hr as av,ue as aw,Wt as ax,Re as ay,Ui as az,mi as b,Gi as c,wi as d,pi as e,Gr as f,yi as g,bi as h,Vt as i,Li as j,Fr as k,Dr as l,Oi as m,Ii as n,Kr as o,et as p,Vi as q,qi as r,Ai as s,Yi as t,Wi as u,Ze as v,We as w,Qi as x,Ni as y,J as z};
