var Z=Object.defineProperty;var G=(e,t,a)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var l=(e,t,a)=>(G(e,typeof t!="symbol"?t+"":t,a),a);import{Vector3 as v,Matrix as w}from"./math.vector.560c6bc4.js";import{Color3 as R}from"./math.color.d29cb8ed.js";import{S as W}from"./standardMaterial.114db29c.js";import{P as H}from"./physicsImpostor.c9d13e49.js";import{c as I}from"./scene.7f90ce88.js";import{M as T}from"./mesh.51493cf6.js";import{V as M}from"./abstractMesh.d4d5c19c.js";import{C as $}from"./thinMaterialHelper.ab1f33f5.js";function j(e){for(var t=e.segments||32,a=e.diameterX||e.diameter||1,i=e.diameterY||e.diameter||1,c=e.diameterZ||e.diameter||1,O=e.arc&&(e.arc<=0||e.arc>1)?1:e.arc||1,u=e.slice&&e.slice<=0?1:e.slice||1,Y=e.sideOrientation===0?0:e.sideOrientation||M.DEFAULTSIDE,_=!!e.dedupTopBottomIndices,D=new v(a/2,i/2,c/2),d=2+t,o=2*d,r=[],p=[],f=[],C=[],n=0;n<=d;n++){for(var g=n/d,N=g*Math.PI*u,y=0;y<=o;y++){var F=y/o,A=F*Math.PI*2*O,X=w.RotationZ(-N),k=w.RotationY(A),L=v.TransformCoordinates(v.Up(),X),S=v.TransformCoordinates(L,k),b=S.multiply(D),P=S.divide(D).normalize();p.push(b.x,b.y,b.z),f.push(P.x,P.y,P.z),C.push(F,$.UseOpenGLOrientationForUV?1-g:g)}if(n>0)for(var B=p.length/3,s=B-2*(o+1);s+o+2<B;s++)_?(n>1&&(r.push(s),r.push(s+1),r.push(s+o+1)),(n<d||u<1)&&(r.push(s+o+1),r.push(s+1),r.push(s+o+2))):(r.push(s),r.push(s+1),r.push(s+o+1),r.push(s+o+1),r.push(s+1),r.push(s+o+2))}M._ComputeSides(Y,p,r,f,C,e.frontUVs,e.backUVs);var m=new M;return m.indices=r,m.positions=p,m.normals=f,m.uvs=C,m}function U(e,t,a){t===void 0&&(t={}),a===void 0&&(a=null);var i=new T(e,a);t.sideOrientation=T._GetDefaultSideOrientation(t.sideOrientation),i._originalBuilderSideOrientation=t.sideOrientation;var c=j(t);return c.applyToMesh(i,t.updatable),i}M.CreateSphere=j;T.CreateSphere=function(e,t,a,i,c,O){var u={segments:t,diameterX:a,diameterY:a,diameterZ:a,sideOrientation:O,updatable:c};return U(e,u,i)};const q={CreateSphere:U},h={Color3:R,Vector3:v,StandardMaterial:W,MeshBuilder:q,PhysicsImpostor:H,PointerEventTypes:I,Matrix:w};let V;class E{constructor(t){l(this,"scene");l(this,"mesh");l(this,"material");l(this,"mouseVector",new h.Vector3);this.scene=t,this.mesh=h.MeshBuilder.CreateSphere("FollowMouseObj",{segments:1},this.scene),this.mesh.isPickable=!1,this.mesh.isVisible=!1,this.initImpostor(),this.initFollowMouseAction()}static getInstance(t){return V||(V=new E(t)),V}initMaterial(){this.material=new h.StandardMaterial("FollowMouseObjMaterial"),this.material.emissiveColor=h.Color3.Red(),this.mesh.material=this.material}initImpostor(){this.mesh.physicsImpostor=new h.PhysicsImpostor(this.mesh,h.PhysicsImpostor.NoImpostor,{mass:0,restitution:0},this.scene),this.mesh.physicsImpostor.physicsBody.collisionFilterMask=0}initFollowMouseAction(){this.scene.onPointerObservable.add(t=>{switch(t.type){case h.PointerEventTypes.POINTERMOVE:case h.PointerEventTypes.POINTERDOWN:if(t.event.preventDefault(),!this.mesh||!this.scene.activeCamera)return;this.mouseVector.set(t.event.offsetX/this.scene.getEngine().getRenderWidth(),t.event.offsetY/this.scene.getEngine().getRenderHeight(),0);const i=h.Vector3.Unproject(this.mouseVector,1,1,h.Matrix.Identity(),this.scene.activeCamera.getViewMatrix(),this.scene.activeCamera.getProjectionMatrix()).subtract(this.scene.activeCamera.position).normalize(),c=-this.scene.activeCamera.position.x/i.x;this.mesh.position=this.scene.activeCamera.position.clone().add(i.scale(c))}})}}var se=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}));export{U as C,E as F,se as a};
