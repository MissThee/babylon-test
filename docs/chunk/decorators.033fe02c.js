import{L as K,_ as y,I as B,O as k,T as Y,S as fe,f as ue,g as le,h as ce,a as T,P as ve,i as de,G as ge}from"./precisionDate.911053b8.js";import{E as p}from"./performanceConfigurator.3a0adc9f.js";import{G as he}from"./arrayTools.49f8ffa1.js";import{Matrix as Ke,Quaternion as me,Vector3 as Ae,Vector2 as Pe}from"./math.vector.dbc48609.js";import{Color4 as Ce,Color3 as be}from"./math.color.a4c793a9.js";var z=function(r,e){return!r||r.getClassName&&r.getClassName()==="Mesh"?null:r.getClassName&&r.getClassName()==="SubMesh"?r.clone(e):r.clone?r.clone():null};function Ue(r){var e=[];do Object.getOwnPropertyNames(r).forEach(function(n){e.indexOf(n)===-1&&e.push(n)});while(r=Object.getPrototypeOf(r));return e}var Fe=function(){function r(){}return r.DeepCopy=function(e,n,t,o){for(var i=Ue(e),s=0,a=i;s<a.length;s++){var f=a[s];if(!(f[0]==="_"&&(!o||o.indexOf(f)===-1))&&!f.endsWith("Observable")&&!(t&&t.indexOf(f)!==-1)){var u=e[f],v=typeof u;if(v!=="function")try{if(v==="object")if(u instanceof Array){if(n[f]=[],u.length>0)if(typeof u[0]=="object")for(var l=0;l<u.length;l++){var d=z(u[l],n);n[f].indexOf(d)===-1&&n[f].push(d)}else n[f]=u.slice(0)}else n[f]=z(u,n);else n[f]=u}catch(c){K.Warn(c.message)}}}},r}();function Te(){return typeof _native!="undefined"&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest}var D=function(){function r(){this._xhr=Te(),this._requestURL=""}return r.prototype._injectCustomRequestHeaders=function(){if(!this._shouldSkipRequestModifications(this._requestURL))for(var e in r.CustomRequestHeaders){var n=r.CustomRequestHeaders[e];n&&this._xhr.setRequestHeader(e,n)}},r.prototype._shouldSkipRequestModifications=function(e){return r.SkipRequestModificationForBabylonCDN&&(e.includes("preview.babylonjs.com")||e.includes("cdn.babylonjs.com"))},Object.defineProperty(r.prototype,"onprogress",{get:function(){return this._xhr.onprogress},set:function(e){this._xhr.onprogress=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"readyState",{get:function(){return this._xhr.readyState},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"status",{get:function(){return this._xhr.status},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"statusText",{get:function(){return this._xhr.statusText},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"response",{get:function(){return this._xhr.response},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"responseURL",{get:function(){return this._xhr.responseURL},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"responseText",{get:function(){return this._xhr.responseText},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"responseType",{get:function(){return this._xhr.responseType},set:function(e){this._xhr.responseType=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeout",{get:function(){return this._xhr.timeout},set:function(e){this._xhr.timeout=e},enumerable:!1,configurable:!0}),r.prototype.addEventListener=function(e,n,t){this._xhr.addEventListener(e,n,t)},r.prototype.removeEventListener=function(e,n,t){this._xhr.removeEventListener(e,n,t)},r.prototype.abort=function(){this._xhr.abort()},r.prototype.send=function(e){r.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(e)},r.prototype.open=function(e,n){for(var t=0,o=r.CustomRequestModifiers;t<o.length;t++){var i=o[t];if(this._shouldSkipRequestModifications(n))return;i(this._xhr,n)}return n=n.replace("file:http:","http:"),n=n.replace("file:https:","https:"),this._requestURL=n,this._xhr.open(e,n,!0)},r.prototype.setRequestHeader=function(e,n){this._xhr.setRequestHeader(e,n)},r.prototype.getResponseHeader=function(e){return this._xhr.getResponseHeader(e)},r.CustomRequestHeaders={},r.CustomRequestModifiers=new Array,r.SkipRequestModificationForBabylonCDN=!0,r}(),O=function(){function r(){}return r.FilesToLoad={},r}(),Le=function(){function r(){}return r.ExponentialBackoff=function(e,n){return e===void 0&&(e=3),n===void 0&&(n=500),function(t,o,i){return o.status!==0||i>=e||t.indexOf("file:")!==-1?-1:Math.pow(2,i)*n}},r}(),_=function(r){y(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e._setPrototypeOf=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},e}(Error),X={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002},Q=function(r){y(e,r);function e(n,t,o){var i=r.call(this,n)||this;return i.errorCode=t,i.innerError=o,i.name="RuntimeError",_._setPrototypeOf(i,e.prototype),i}return e}(_),Be=function(r){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",t,o,i,s,a,f,u,v=0,l=ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r);v<l.length;)t=l[v++],o=v<l.length?l[v++]:Number.NaN,i=v<l.length?l[v++]:Number.NaN,s=t>>2,a=(t&3)<<4|o>>4,f=(o&15)<<2|i>>6,u=i&63,isNaN(o)?f=u=64:isNaN(i)&&(u=64),n+=e.charAt(s)+e.charAt(a)+e.charAt(f)+e.charAt(u);return n},ee=function(r){return atob(r)},pe=function(r){for(var e=ee(r),n=e.length,t=new Uint8Array(new ArrayBuffer(n)),o=0;o<n;o++)t[o]=e.charCodeAt(o);return t.buffer},re=function(){function r(){}return r.SetImmediate=function(e){B()&&window.setImmediate?window.setImmediate(e):setTimeout(e,1)},r}(),Ee=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i),V=function(r){y(e,r);function e(n,t){var o=r.call(this,n,X.LoadFileError)||this;return o.name="LoadFileError",_._setPrototypeOf(o,e.prototype),t instanceof D?o.request=t:o.file=t,o}return e}(Q),Z=function(r){y(e,r);function e(n,t){var o=r.call(this,n,X.RequestFileError)||this;return o.request=t,o.name="RequestFileError",_._setPrototypeOf(o,e.prototype),o}return e}(Q),Re=function(r){y(e,r);function e(n,t){var o=r.call(this,n,X.ReadFileError)||this;return o.file=t,o.name="ReadFileError",_._setPrototypeOf(o,e.prototype),o}return e}(Q),g={DefaultRetryStrategy:Le.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:function(r){return r}},ne=function(r){return r=r.replace(/#/gm,"%23"),r},H=function(r,e){if(!(r&&r.indexOf("data:")===0)&&g.CorsBehavior)if(typeof g.CorsBehavior=="string"||g.CorsBehavior instanceof String)e.crossOrigin=g.CorsBehavior;else{var n=g.CorsBehavior(r);n&&(e.crossOrigin=n)}},N=function(r,e,n,t,o,i){var s;o===void 0&&(o="");var a,f=!1;r instanceof ArrayBuffer||ArrayBuffer.isView(r)?typeof Blob!="undefined"?(a=URL.createObjectURL(new Blob([r],{type:o})),f=!0):a="data:".concat(o,";base64,")+Be(r):r instanceof Blob?(a=URL.createObjectURL(r),f=!0):(a=ne(r),a=g.PreprocessUrl(r));var u=p.LastCreatedEngine,v=function(h){if(n){var A=a||r.toString();n("Error while trying to load image: ".concat(A.indexOf("http")===0||A.length<=128?A:A.slice(0,128)+"..."),h)}};if(typeof Image=="undefined"||((s=u==null?void 0:u._features.forceBitmapOverHTMLImageElement)!==null&&s!==void 0?s:!1))return R(a,function(h){u.createImageBitmap(new Blob([h],{type:o}),ue({premultiplyAlpha:"none"},i)).then(function(A){e(A),f&&URL.revokeObjectURL(a)}).catch(function(A){n&&n("Error while trying to load image: "+r,A)})},void 0,t||void 0,!0,function(h,A){v(A)}),null;var l=new Image;H(a,l);var d=function(){l.removeEventListener("load",d),l.removeEventListener("error",c),e(l),f&&l.src&&URL.revokeObjectURL(l.src)},c=function(h){l.removeEventListener("load",d),l.removeEventListener("error",c),v(h),f&&l.src&&URL.revokeObjectURL(l.src)};l.addEventListener("load",d),l.addEventListener("error",c);var C=function(){l.src=a},P=function(){t&&t.loadImage(a,l)};if(a.substr(0,5)!=="blob:"&&a.substr(0,5)!=="data:"&&t&&t.enableTexturesOffline)t.open(P,C);else{if(a.indexOf("file:")!==-1){var b=decodeURIComponent(a.substring(5).toLowerCase());if(O.FilesToLoad[b]){try{var m=void 0;try{m=URL.createObjectURL(O.FilesToLoad[b])}catch{m=URL.createObjectURL(O.FilesToLoad[b])}l.src=m,f=!0}catch{l.src=""}return l}}C()}return l},j=function(r,e,n,t,o){var i=new FileReader,s={onCompleteObservable:new k,abort:function(){return i.abort()}};return i.onloadend=function(){return s.onCompleteObservable.notifyObservers(s)},o&&(i.onerror=function(){o(new Re("Unable to read ".concat(r.name),r))}),i.onload=function(a){e(a.target.result)},n&&(i.onprogress=n),t?i.readAsArrayBuffer(r):i.readAsText(r),s},R=function(r,e,n,t,o,i,s){if(r.name)return j(r,e,n,o,i?function(l){i(void 0,l)}:void 0);var a=r;if(a.indexOf("file:")!==-1){var f=decodeURIComponent(a.substring(5).toLowerCase());f.indexOf("./")===0&&(f=f.substring(2));var u=O.FilesToLoad[f];if(u)return j(u,e,n,o,i?function(l){return i(void 0,new V(l.message,l.file))}:void 0)}if(W(a)){var v={onCompleteObservable:new k,abort:function(){return function(){}}};try{e(o?G(a):ie(a))}catch(l){i?i(void 0,l):K.Error(l.message||"Failed to parse the Data URL")}return re.SetImmediate(function(){v.onCompleteObservable.notifyObservers(v)}),v}return te(a,function(l,d){e(l,d?d.responseURL:void 0)},n,t,o,i?function(l){i(l.request,new V(l.message,l.request))}:void 0,s)},te=function(r,e,n,t,o,i,s){r=ne(r),r=g.PreprocessUrl(r);var a=g.BaseUrl+r,f=!1,u={onCompleteObservable:new k,abort:function(){return f=!0}},v=function(){var c=new D,C=null,P,b=function(){!c||(n&&c.removeEventListener("progress",n),P&&c.removeEventListener("readystatechange",P),c.removeEventListener("loadend",m))},m=function(){b(),u.onCompleteObservable.notifyObservers(u),u.onCompleteObservable.clear(),n=void 0,P=null,m=null,i=void 0,s=void 0,e=void 0};u.abort=function(){f=!0,m&&m(),c&&c.readyState!==(XMLHttpRequest.DONE||4)&&c.abort(),C!==null&&(clearTimeout(C),C=null),c=null};var h=function(L){var F=L.message||"Unknown error";i&&c?i(new Z(F,c)):K.Error(F)},A=function(L){if(!!c){if(c.open("GET",a),s)try{s(c)}catch(F){h(F);return}o&&(c.responseType="arraybuffer"),n&&c.addEventListener("progress",n),m&&c.addEventListener("loadend",m),P=function(){if(!(f||!c)&&c.readyState===(XMLHttpRequest.DONE||4)){if(P&&c.removeEventListener("readystatechange",P),c.status>=200&&c.status<300||c.status===0&&(!B()||oe())){try{e&&e(o?c.response:c.responseText,c)}catch(se){h(se)}return}var F=g.DefaultRetryStrategy;if(F){var w=F(a,c,L);if(w!==-1){b(),c=new D,C=setTimeout(function(){return A(L+1)},w);return}}var ae=new Z("Error status: "+c.status+" "+c.statusText+" - Unable to load "+a,c);i&&i(ae)}},c.addEventListener("readystatechange",P),c.send()}};A(0)};if(t&&t.enableSceneOffline){var l=function(c){c&&c.status>400?i&&i(c):v()},d=function(){t&&t.loadFile(g.BaseUrl+r,function(c){!f&&e&&e(c),u.onCompleteObservable.notifyObservers(u)},n?function(c){!f&&n&&n(c)}:void 0,l,o)};t.open(d,l)}else v();return u},oe=function(){return typeof location!="undefined"&&location.protocol==="file:"},W=function(r){return Ee.test(r)};function G(r){return pe(r.split(",")[1])}var ie=function(r){return ee(r.split(",")[1])},xe=function(){Y._FileToolsLoadImage=N,Y._FileToolsLoadFile=R,fe._FileToolsLoadFile=R};xe();var x,_e=function(r,e,n,t,o,i,s,a,f,u){x={DecodeBase64UrlToBinary:r,DecodeBase64UrlToString:e,DefaultRetryStrategy:n.DefaultRetryStrategy,BaseUrl:n.BaseUrl,CorsBehavior:n.CorsBehavior,PreprocessUrl:n.PreprocessUrl,IsBase64DataUrl:t,IsFileURL:o,LoadFile:i,LoadImage:s,ReadFile:a,RequestFile:f,SetCorsBehavior:u},Object.defineProperty(x,"DefaultRetryStrategy",{get:function(){return n.DefaultRetryStrategy},set:function(v){n.DefaultRetryStrategy=v}}),Object.defineProperty(x,"BaseUrl",{get:function(){return n.BaseUrl},set:function(v){n.BaseUrl=v}}),Object.defineProperty(x,"PreprocessUrl",{get:function(){return n.PreprocessUrl},set:function(v){n.PreprocessUrl=v}}),Object.defineProperty(x,"CorsBehavior",{get:function(){return n.CorsBehavior},set:function(v){n.CorsBehavior=v}})};_e(G,ie,g,W,oe,R,N,j,te,H);var I=function(){function r(){}return r.Instantiate=function(e){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[e])return this.RegisteredExternalClasses[e];var n=he(e);if(n)return n;K.Warn(e+" not found, you may have missed an import.");for(var t=e.split("."),o=window||this,i=0,s=t.length;i<s;i++)o=o[t[i]];return typeof o!="function"?null:o},r.RegisteredExternalClasses={},r}();function ye(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var e=Math.random()*16|0,n=r==="x"?e:e&3|8;return n.toString(16)})}var Xe=function(){function r(){}return Object.defineProperty(r,"BaseUrl",{get:function(){return g.BaseUrl},set:function(e){g.BaseUrl=e},enumerable:!1,configurable:!0}),Object.defineProperty(r,"DefaultRetryStrategy",{get:function(){return g.DefaultRetryStrategy},set:function(e){g.DefaultRetryStrategy=e},enumerable:!1,configurable:!0}),Object.defineProperty(r,"CorsBehavior",{get:function(){return g.CorsBehavior},set:function(e){g.CorsBehavior=e},enumerable:!1,configurable:!0}),Object.defineProperty(r,"UseFallbackTexture",{get:function(){return p.UseFallbackTexture},set:function(e){p.UseFallbackTexture=e},enumerable:!1,configurable:!0}),Object.defineProperty(r,"RegisteredExternalClasses",{get:function(){return I.RegisteredExternalClasses},set:function(e){I.RegisteredExternalClasses=e},enumerable:!1,configurable:!0}),Object.defineProperty(r,"fallbackTexture",{get:function(){return p.FallbackTexture},set:function(e){p.FallbackTexture=e},enumerable:!1,configurable:!0}),r.FetchToRef=function(e,n,t,o,i,s){var a=Math.abs(e)*t%t|0,f=Math.abs(n)*o%o|0,u=(a+f*t)*4;s.r=i[u]/255,s.g=i[u+1]/255,s.b=i[u+2]/255,s.a=i[u+3]/255},r.Mix=function(e,n,t){return e*(1-t)+n*t},r.Instantiate=function(e){return I.Instantiate(e)},r.SetImmediate=function(e){re.SetImmediate(e)},r.IsExponentOfTwo=function(e){var n=1;do n*=2;while(n<e);return n===e},r.FloatRound=function(e){return Math.fround?Math.fround(e):(r._TmpFloatArray[0]=e,r._TmpFloatArray[0])},r.GetFilename=function(e){var n=e.lastIndexOf("/");return n<0?e:e.substring(n+1)},r.GetFolderPath=function(e,n){n===void 0&&(n=!1);var t=e.lastIndexOf("/");return t<0?n?e:"":e.substring(0,t+1)},r.ToDegrees=function(e){return e*180/Math.PI},r.ToRadians=function(e){return e*Math.PI/180},r.MakeArray=function(e,n){return n!==!0&&(e===void 0||e==null)?null:Array.isArray(e)?e:[e]},r.GetPointerPrefix=function(e){var n="pointer";return B()&&!window.PointerEvent&&(n="mouse"),e._badDesktopOS&&!e._badOS&&!(document&&"ontouchend"in document)&&(n="mouse"),n},r.SetCorsBehavior=function(e,n){H(e,n)},r.SetReferrerPolicyBehavior=function(e,n){n.referrerPolicy=e},r.CleanUrl=function(e){return e=e.replace(/#/gm,"%23"),e},Object.defineProperty(r,"PreprocessUrl",{get:function(){return g.PreprocessUrl},set:function(e){g.PreprocessUrl=e},enumerable:!1,configurable:!0}),r.LoadImage=function(e,n,t,o,i,s){return N(e,n,t,o,i,s)},r.LoadFile=function(e,n,t,o,i,s){return R(e,n,t,o,i,s)},r.LoadFileAsync=function(e,n){return n===void 0&&(n=!0),new Promise(function(t,o){R(e,function(i){t(i)},void 0,void 0,n,function(i,s){o(s)})})},r.LoadScript=function(e,n,t,o){if(!!B()){var i=document.getElementsByTagName("head")[0],s=document.createElement("script");s.setAttribute("type","text/javascript"),s.setAttribute("src",e),o&&(s.id=o),s.onload=function(){n&&n()},s.onerror=function(a){t&&t("Unable to load script '".concat(e,"'"),a)},i.appendChild(s)}},r.LoadScriptAsync=function(e){var n=this;return new Promise(function(t,o){n.LoadScript(e,function(){t()},function(i,s){o(s)})})},r.ReadFileAsDataURL=function(e,n,t){var o=new FileReader,i={onCompleteObservable:new k,abort:function(){return o.abort()}};return o.onloadend=function(){i.onCompleteObservable.notifyObservers(i)},o.onload=function(s){n(s.target.result)},o.onprogress=t,o.readAsDataURL(e),i},r.ReadFile=function(e,n,t,o,i){return j(e,n,t,o,i)},r.FileAsURL=function(e){var n=new Blob([e]),t=window.URL||window.webkitURL,o=t.createObjectURL(n);return o},r.Format=function(e,n){return n===void 0&&(n=2),e.toFixed(n)},r.DeepCopy=function(e,n,t,o){Fe.DeepCopy(e,n,t,o)},r.IsEmpty=function(e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!1;return!0},r.RegisterTopRootEvents=function(e,n){for(var t=0;t<n.length;t++){var o=n[t];e.addEventListener(o.name,o.handler,!1);try{window.parent&&window.parent.addEventListener(o.name,o.handler,!1)}catch{}}},r.UnregisterTopRootEvents=function(e,n){for(var t=0;t<n.length;t++){var o=n[t];e.removeEventListener(o.name,o.handler);try{e.parent&&e.parent.removeEventListener(o.name,o.handler)}catch{}}},r.DumpFramebuffer=function(e,n,t,o,i,s){return i===void 0&&(i="image/png"),le(this,void 0,void 0,function(){var a,f;return ce(this,function(u){switch(u.label){case 0:return[4,t.readPixels(0,0,e,n)];case 1:return a=u.sent(),f=new Uint8Array(a.buffer),r.DumpData(e,n,f,o,i,s,!0),[2]}})})},r.DumpData=function(e,n,t,o,i,s,a,f,u){i===void 0&&(i="image/png"),a===void 0&&(a=!1),f===void 0&&(f=!1),r._ScreenshotCanvas||(r._ScreenshotCanvas=document.createElement("canvas")),r._ScreenshotCanvas.width=e,r._ScreenshotCanvas.height=n;var v=r._ScreenshotCanvas.getContext("2d");if(v){if(t instanceof Float32Array){for(var l=new Uint8Array(t.length),d=t.length;d--;){var c=t[d];l[d]=c<0?0:c>1?1:Math.round(c*255)}t=l}var C=v.createImageData(e,n),P=C.data;P.set(t),v.putImageData(C,0,0);var b=r._ScreenshotCanvas;if(a){var m=document.createElement("canvas");m.width=e,m.height=n;var h=m.getContext("2d");if(!h)return;h.translate(0,n),h.scale(1,-1),h.drawImage(r._ScreenshotCanvas,0,0),b=m}f?r.ToBlob(b,function(A){var L=new FileReader;L.onload=function(F){var w=F.target.result;o&&o(w)},L.readAsArrayBuffer(A)},i,u):r.EncodeScreenshotCanvasData(o,i,s,b,u)}},r.DumpDataAsync=function(e,n,t,o,i,s,a,f){return o===void 0&&(o="image/png"),s===void 0&&(s=!1),a===void 0&&(a=!1),new Promise(function(u){r.DumpData(e,n,t,function(v){return u(v)},o,i,s,a,f)})},r.ToBlob=function(e,n,t,o){t===void 0&&(t="image/png"),e.toBlob||(e.toBlob=function(i,s,a){var f=this;setTimeout(function(){for(var u=atob(f.toDataURL(s,a).split(",")[1]),v=u.length,l=new Uint8Array(v),d=0;d<v;d++)l[d]=u.charCodeAt(d);i(new Blob([l]))})}),e.toBlob(function(i){n(i)},t,o)},r.DownloadBlob=function(e,n){if("download"in document.createElement("a")){if(!n){var t=new Date,o=(t.getFullYear()+"-"+(t.getMonth()+1)).slice(2)+"-"+t.getDate()+"_"+t.getHours()+"-"+("0"+t.getMinutes()).slice(-2);n="screenshot_"+o+".png"}r.Download(e,n)}else if(e){var i=URL.createObjectURL(e),s=window.open("");if(!s)return;var a=s.document.createElement("img");a.onload=function(){URL.revokeObjectURL(i)},a.src=i,s.document.body.appendChild(a)}},r.EncodeScreenshotCanvasData=function(e,n,t,o,i){if(n===void 0&&(n="image/png"),e){var s=(o!=null?o:r._ScreenshotCanvas).toDataURL(n,i);e(s)}else this.ToBlob(o!=null?o:r._ScreenshotCanvas,function(a){a&&r.DownloadBlob(a,t)},n,i)},r.Download=function(e,n){if(navigator&&navigator.msSaveBlob){navigator.msSaveBlob(e,n);return}var t=window.URL.createObjectURL(e),o=document.createElement("a");document.body.appendChild(o),o.style.display="none",o.href=t,o.download=n,o.addEventListener("click",function(){o.parentElement&&o.parentElement.removeChild(o)}),o.click(),window.URL.revokeObjectURL(t)},r.BackCompatCameraNoPreventDefault=function(e){return typeof e[0]=="boolean"?e[0]:typeof e[1]=="boolean"?e[1]:!1},r.CreateScreenshot=function(e,n,t,o,i){throw T("ScreenshotTools")},r.CreateScreenshotAsync=function(e,n,t,o){throw T("ScreenshotTools")},r.CreateScreenshotUsingRenderTarget=function(e,n,t,o,i,s,a,f){throw T("ScreenshotTools")},r.CreateScreenshotUsingRenderTargetAsync=function(e,n,t,o,i,s,a){throw T("ScreenshotTools")},r.RandomId=function(){return ye()},r.IsBase64=function(e){return W(e)},r.DecodeBase64=function(e){return G(e)},Object.defineProperty(r,"errorsCount",{get:function(){return K.errorsCount},enumerable:!1,configurable:!0}),r.Log=function(e){K.Log(e)},r.Warn=function(e){K.Warn(e)},r.Error=function(e){K.Error(e)},Object.defineProperty(r,"LogCache",{get:function(){return K.LogCache},enumerable:!1,configurable:!0}),r.ClearLogCache=function(){K.ClearLogCache()},Object.defineProperty(r,"LogLevels",{set:function(e){K.LogLevels=e},enumerable:!1,configurable:!0}),Object.defineProperty(r,"PerformanceLogLevel",{set:function(e){if((e&r.PerformanceUserMarkLogLevel)===r.PerformanceUserMarkLogLevel){r.StartPerformanceCounter=r._StartUserMark,r.EndPerformanceCounter=r._EndUserMark;return}if((e&r.PerformanceConsoleLogLevel)===r.PerformanceConsoleLogLevel){r.StartPerformanceCounter=r._StartPerformanceConsole,r.EndPerformanceCounter=r._EndPerformanceConsole;return}r.StartPerformanceCounter=r._StartPerformanceCounterDisabled,r.EndPerformanceCounter=r._EndPerformanceCounterDisabled},enumerable:!1,configurable:!0}),r._StartPerformanceCounterDisabled=function(e,n){},r._EndPerformanceCounterDisabled=function(e,n){},r._StartUserMark=function(e,n){if(n===void 0&&(n=!0),!r._Performance){if(!B())return;r._Performance=window.performance}!n||!r._Performance.mark||r._Performance.mark(e+"-Begin")},r._EndUserMark=function(e,n){n===void 0&&(n=!0),!(!n||!r._Performance.mark)&&(r._Performance.mark(e+"-End"),r._Performance.measure(e,e+"-Begin",e+"-End"))},r._StartPerformanceConsole=function(e,n){n===void 0&&(n=!0),n&&(r._StartUserMark(e,n),console.time&&console.time(e))},r._EndPerformanceConsole=function(e,n){n===void 0&&(n=!0),n&&(r._EndUserMark(e,n),console.timeEnd(e))},Object.defineProperty(r,"Now",{get:function(){return ve.Now},enumerable:!1,configurable:!0}),r.GetClassName=function(e,n){n===void 0&&(n=!1);var t=null;if(!n&&e.getClassName)t=e.getClassName();else{if(e instanceof Object){var o=n?e:Object.getPrototypeOf(e);t=o.constructor.__bjsclassName__}t||(t=typeof e)}return t},r.First=function(e,n){for(var t=0,o=e;t<o.length;t++){var i=o[t];if(n(i))return i}return null},r.getFullClassName=function(e,n){n===void 0&&(n=!1);var t=null,o=null;if(!n&&e.getClassName)t=e.getClassName();else{if(e instanceof Object){var i=n?e:Object.getPrototypeOf(e);t=i.constructor.__bjsclassName__,o=i.constructor.__bjsmoduleName__}t||(t=typeof e)}return t?(o!=null?o+".":"")+t:null},r.DelayAsync=function(e){return new Promise(function(n){setTimeout(function(){n()},e)})},r.IsSafari=function(){return de()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1},r.UseCustomRequestHeaders=!1,r.CustomRequestHeaders=D.CustomRequestHeaders,r._TmpFloatArray=new Float32Array(1),r.GetDOMTextContent=ge,r.GetAbsoluteUrl=typeof document=="object"?function(e){var n=document.createElement("a");return n.href=e,n.href}:typeof URL=="function"&&typeof location=="object"?function(e){return new URL(e,location.origin).href}:function(){throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},r.NoneLogLevel=K.NoneLogLevel,r.MessageLogLevel=K.MessageLogLevel,r.WarningLogLevel=K.WarningLogLevel,r.ErrorLogLevel=K.ErrorLogLevel,r.AllLogLevel=K.AllLogLevel,r.IsWindowObjectExist=B,r.PerformanceNoneLogLevel=0,r.PerformanceUserMarkLogLevel=1,r.PerformanceConsoleLogLevel=2,r.StartPerformanceCounter=r._StartPerformanceCounterDisabled,r.EndPerformanceCounter=r._EndPerformanceCounterDisabled,r}(),Qe=function(){function r(e,n,t,o){o===void 0&&(o=0),this.iterations=e,this.index=o-1,this._done=!1,this._fn=n,this._successCallback=t}return r.prototype.executeNext=function(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())},r.prototype.breakLoop=function(){this._done=!0,this._successCallback()},r.Run=function(e,n,t,o){o===void 0&&(o=0);var i=new r(e,n,t,o);return i.executeNext(),i},r.SyncAsyncForLoop=function(e,n,t,o,i,s){return s===void 0&&(s=0),r.Run(Math.ceil(e/n),function(a){i&&i()?a.breakLoop():setTimeout(function(){for(var f=0;f<n;++f){var u=a.index*n+f;if(u>=e)break;if(t(u),i&&i()){a.breakLoop();break}}a.executeNext()},s)},o)},r}();p.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z";var we=function(){function r(){}return r.Eval=function(e,n){return e.match(/\([^()]*\)/g)?e=e.replace(/\([^()]*\)/g,function(t){return t=t.slice(1,t.length-1),r._HandleParenthesisContent(t,n)}):e=r._HandleParenthesisContent(e,n),e==="true"?!0:e==="false"?!1:r.Eval(e,n)},r._HandleParenthesisContent=function(e,n){n=n||function(v){return v==="true"};var t,o=e.split("||");for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var s=r._SimplifyNegation(o[i].trim()),a=s.split("&&");if(a.length>1)for(var f=0;f<a.length;++f){var u=r._SimplifyNegation(a[f].trim());if(u!=="true"&&u!=="false"?u[0]==="!"?t=!n(u.substring(1)):t=n(u):t=u==="true",!t){s="false";break}}if(t||s==="true"){t=!0;break}s!=="true"&&s!=="false"?s[0]==="!"?t=!n(s.substring(1)):t=n(s):t=s==="true"}return t?"true":"false"},r._SimplifyNegation=function(e){return e=e.replace(/^[\s!]+/,function(n){return n=n.replace(/[\s]/g,function(){return""}),n.length%2?"!":""}),e=e.trim(),e==="!true"?e="false":e==="!false"&&(e="true"),e},r}(),E=function(){function r(){}return r.EnableFor=function(e){e._tags=e._tags||{},e.hasTags=function(){return r.HasTags(e)},e.addTags=function(n){return r.AddTagsTo(e,n)},e.removeTags=function(n){return r.RemoveTagsFrom(e,n)},e.matchesTagsQuery=function(n){return r.MatchesQuery(e,n)}},r.DisableFor=function(e){delete e._tags,delete e.hasTags,delete e.addTags,delete e.removeTags,delete e.matchesTagsQuery},r.HasTags=function(e){if(!e._tags)return!1;var n=e._tags;for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!0;return!1},r.GetTags=function(e,n){if(n===void 0&&(n=!0),!e._tags)return null;if(n){var t=[];for(var o in e._tags)Object.prototype.hasOwnProperty.call(e._tags,o)&&e._tags[o]===!0&&t.push(o);return t.join(" ")}else return e._tags},r.AddTagsTo=function(e,n){if(!!n&&typeof n=="string"){var t=n.split(" ");t.forEach(function(o){r._AddTagTo(e,o)})}},r._AddTagTo=function(e,n){n=n.trim(),!(n===""||n==="true"||n==="false")&&(n.match(/[\s]/)||n.match(/^([!]|([|]|[&]){2})/)||(r.EnableFor(e),e._tags[n]=!0))},r.RemoveTagsFrom=function(e,n){if(!!r.HasTags(e)){var t=n.split(" ");for(var o in t)r._RemoveTagFrom(e,t[o])}},r._RemoveTagFrom=function(e,n){delete e._tags[n]},r.MatchesQuery=function(e,n){return n===void 0?!0:n===""?r.HasTags(e):we.Eval(n,function(t){return r.HasTags(e)&&e._tags[t]})},r}(),S={},q={},J=function(r,e,n){var t=r();E&&E.AddTagsTo(t,e.tags);var o=M(t);for(var i in o){var s=o[i],a=e[i],f=s.type;if(a!=null&&(i!=="uniqueId"||Se.AllowLoadingUniqueId))switch(f){case 0:case 6:case 11:t[i]=a;break;case 1:t[i]=n||a.isRenderTarget?a:a.clone();break;case 2:case 3:case 4:case 5:case 7:case 10:case 12:t[i]=n?a:a.clone();break}}return t};function qe(r){var e=r.getClassName();return S[e]||(S[e]={}),S[e]}function M(r){var e=r.getClassName();if(q[e])return q[e];q[e]={};for(var n=q[e],t=r,o=e;o;){var i=S[o];for(var s in i)n[s]=i[s];var a=void 0,f=!1;do{if(a=Object.getPrototypeOf(t),!a.getClassName){f=!0;break}if(a.getClassName()!==o)break;t=a}while(a);if(f)break;o=a.getClassName(),t=a}return n}function U(r,e){return function(n,t){var o=qe(n);o[t]||(o[t]={type:r,sourceName:e})}}function Oe(r,e){return e===void 0&&(e=null),function(n,t){var o=e||"_"+t;Object.defineProperty(n,t,{get:function(){return this[o]},set:function(i){typeof this.equals=="function"&&this.equals(i)||this[o]!==i&&(this[o]=i,n[r].apply(this))},enumerable:!0,configurable:!0})}}function He(r,e){return e===void 0&&(e=null),Oe(r,e)}function Ne(r){return U(0,r)}function We(r){return U(1,r)}function Ge(r){return U(2,r)}function Ye(r){return U(3,r)}function ze(r){return U(4,r)}function Ve(r){return U(5,r)}function Ze(r){return U(6,r)}function Je(r){return U(7,r)}function $e(r){return U(8,r)}function er(r){return U(10,r)}var Se=function(){function r(){}return r.AppendSerializedAnimations=function(e,n){if(e.animations){n.animations=[];for(var t=0;t<e.animations.length;t++){var o=e.animations[t];n.animations.push(o.serialize())}}},r.Serialize=function(e,n){n||(n={}),E&&(n.tags=E.GetTags(e));var t=M(e);for(var o in t){var i=t[o],s=i.sourceName||o,a=i.type,f=e[o];if(f!=null&&(o!=="uniqueId"||r.AllowLoadingUniqueId))switch(a){case 0:n[s]=f;break;case 1:n[s]=f.serialize();break;case 2:n[s]=f.asArray();break;case 3:n[s]=f.serialize();break;case 4:n[s]=f.asArray();break;case 5:n[s]=f.asArray();break;case 6:n[s]=f.id;break;case 7:n[s]=f.serialize();break;case 8:n[s]=f.asArray();break;case 9:n[s]=f.serialize();break;case 10:n[s]=f.asArray();break;case 11:n[s]=f.id;break;case 12:n[s]=f.asArray();break}}return n},r.Parse=function(e,n,t,o){o===void 0&&(o=null);var i=e();o||(o=""),E&&E.AddTagsTo(i,n.tags);var s=M(i);for(var a in s){var f=s[a],u=n[f.sourceName||a],v=f.type;if(u!=null&&(a!=="uniqueId"||r.AllowLoadingUniqueId)){var l=i;switch(v){case 0:l[a]=u;break;case 1:t&&(l[a]=r._TextureParser(u,t,o));break;case 2:l[a]=be.FromArray(u);break;case 3:l[a]=r._FresnelParametersParser(u);break;case 4:l[a]=Pe.FromArray(u);break;case 5:l[a]=Ae.FromArray(u);break;case 6:t&&(l[a]=t.getLastMeshById(u));break;case 7:l[a]=r._ColorCurvesParser(u);break;case 8:l[a]=Ce.FromArray(u);break;case 9:l[a]=r._ImageProcessingConfigurationParser(u);break;case 10:l[a]=me.FromArray(u);break;case 11:t&&(l[a]=t.getCameraById(u));break;case 12:l[a]=Ke.FromArray(u);break}}}return i},r.Clone=function(e,n){return J(e,n,!1)},r.Instanciate=function(e,n){return J(e,n,!0)},r.AllowLoadingUniqueId=!1,r._ImageProcessingConfigurationParser=function(e){throw T("ImageProcessingConfiguration")},r._FresnelParametersParser=function(e){throw T("FresnelParameters")},r._ColorCurvesParser=function(e){throw T("ColorCurves")},r._TextureParser=function(e,n,t){throw T("Texture")},r}();function $(r,e,n,t){var o=n.value;n.value=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=o;if(typeof _native!="undefined"&&_native[e]){var f=_native[e];t?a=function(){for(var u=[],v=0;v<arguments.length;v++)u[v]=arguments[v];return t.apply(void 0,u)?f.apply(void 0,u):o.apply(void 0,u)}:a=f}return r[e]=a,a.apply(void 0,i)}}$.filter=function(r){return function(e,n,t){return $(e,n,t,r)}};export{Qe as A,Fe as D,X as E,I,R as L,te as R,Se as S,Xe as T,D as W,E as a,j as b,Je as c,We as d,$e as e,Q as f,Ve as g,er as h,Ge as i,He as j,Ze as k,ze as l,Ye as m,$ as n,ye as o,re as p,Be as q,Ne as s};
