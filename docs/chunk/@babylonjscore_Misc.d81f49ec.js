import{_ as R,b as se,c as Kt,d as Gt,e as ur}from"./tslibtslib.b6e59fa7.js";import{M as Te,Q as fr,b as Ht,a as C,V as ae,C as Qt,q as cr,S as B,r as Oe,i as qe}from"./@babylonjscore_Maths.f3ef132c.js";import{f as Je,e as Ce,B as jt,b as Q,C as lr,H as hr,o as dr,k as vr}from"./@babylonjscore_Materials.00e32dae.js";import{S as gr}from"./@babylonjscore_scene.fc9d9dc0.js";import{b as _e,c as pr,F as mr}from"./@babylonjscore_PostProcesses.4413212a.js";import{E as ee,T as Xe,b as Ar}from"./@babylonjscore_Engines.7287f97a.js";import"./@babylonjscore_Shaders.73b25e8e.js";import{M as at}from"./@babylonjscore_Meshes.307935b5.js";import"./@babylonjscore_Lights.ab2a2b54.js";import"./@babylonjscore_Cameras.db49b33d.js";import"./@babylonjscore_Bones.4bdc5845.js";import"./@babylonjscore_Particles.ea0a1760.js";import"./@babylonjscore_Morph.df37bd75.js";import"./@babylonjscore_Instrumentation.93aca872.js";import{S as me}from"./@babylonjscore_Loading.6509a8cd.js";import{D as Cr}from"./@babylonjscore_Rendering.3a43e73e.js";var Nt=function(){function t(e,r,n,i){r===void 0&&(r=!1),this.initialize(e,r,n,i)}return t.prototype.initialize=function(e,r,n,i){return r===void 0&&(r=!1),this.mask=e,this.skipNextObservers=r,this.target=n,this.currentTarget=i,this},t}(),_r=function(){function t(e,r,n){n===void 0&&(n=null),this.callback=e,this.mask=r,this.scope=n,this._willBeUnregistered=!1,this.unregisterOnNextCall=!1}return t}(),F=function(){function t(e){this._observers=new Array,this._eventState=new Nt(0),e&&(this._onObserverAdded=e)}return t.FromPromise=function(e,r){var n=new t;return e.then(function(i){n.notifyObservers(i)}).catch(function(i){if(r)r.notifyObservers(i);else throw i}),n},Object.defineProperty(t.prototype,"observers",{get:function(){return this._observers},enumerable:!1,configurable:!0}),t.prototype.add=function(e,r,n,i,a){if(r===void 0&&(r=-1),n===void 0&&(n=!1),i===void 0&&(i=null),a===void 0&&(a=!1),!e)return null;var o=new _r(e,r,i);return o.unregisterOnNextCall=a,n?this._observers.unshift(o):this._observers.push(o),this._onObserverAdded&&this._onObserverAdded(o),o},t.prototype.addOnce=function(e){return this.add(e,void 0,void 0,void 0,!0)},t.prototype.remove=function(e){if(!e)return!1;var r=this._observers.indexOf(e);return r!==-1?(this._deferUnregister(e),!0):!1},t.prototype.removeCallback=function(e,r){for(var n=0;n<this._observers.length;n++){var i=this._observers[n];if(!i._willBeUnregistered&&i.callback===e&&(!r||r===i.scope))return this._deferUnregister(i),!0}return!1},t.prototype._deferUnregister=function(e){var r=this;e.unregisterOnNextCall=!1,e._willBeUnregistered=!0,setTimeout(function(){r._remove(e)},0)},t.prototype._remove=function(e){if(!e)return!1;var r=this._observers.indexOf(e);return r!==-1?(this._observers.splice(r,1),!0):!1},t.prototype.makeObserverTopPriority=function(e){this._remove(e),this._observers.unshift(e)},t.prototype.makeObserverBottomPriority=function(e){this._remove(e),this._observers.push(e)},t.prototype.notifyObservers=function(e,r,n,i,a){if(r===void 0&&(r=-1),!this._observers.length)return!0;var o=this._eventState;o.mask=r,o.target=n,o.currentTarget=i,o.skipNextObservers=!1,o.lastReturnValue=e,o.userInfo=a;for(var s=0,u=this._observers;s<u.length;s++){var f=u[s];if(!f._willBeUnregistered&&(f.mask&r&&(f.scope?o.lastReturnValue=f.callback.apply(f.scope,[e,o]):o.lastReturnValue=f.callback(e,o),f.unregisterOnNextCall&&this._deferUnregister(f)),o.skipNextObservers))return!1}return!0},t.prototype.notifyObserversWithPromise=function(e,r,n,i,a){var o=this;r===void 0&&(r=-1);var s=Promise.resolve(e);if(!this._observers.length)return s;var u=this._eventState;return u.mask=r,u.target=n,u.currentTarget=i,u.skipNextObservers=!1,u.userInfo=a,this._observers.forEach(function(f){u.skipNextObservers||f._willBeUnregistered||f.mask&r&&(f.scope?s=s.then(function(c){return u.lastReturnValue=c,f.callback.apply(f.scope,[e,u])}):s=s.then(function(c){return u.lastReturnValue=c,f.callback(e,u)}),f.unregisterOnNextCall&&o._deferUnregister(f))}),s.then(function(){return e})},t.prototype.notifyObserver=function(e,r,n){if(n===void 0&&(n=-1),!e._willBeUnregistered){var i=this._eventState;i.mask=n,i.skipNextObservers=!1,e.callback(r,i),e.unregisterOnNextCall&&this._deferUnregister(e)}},t.prototype.hasObservers=function(){return this._observers.length>0},t.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},t.prototype.clone=function(){var e=new t;return e._observers=this._observers.slice(0),e},t.prototype.hasSpecificMask=function(e){e===void 0&&(e=-1);for(var r=0,n=this._observers;r<n.length;r++){var i=n[r];if(i.mask&e||i.mask===e)return!0}return!1},t}(),Pi=function(){function t(){}return t.BuildArray=function(e,r){for(var n=[],i=0;i<e;++i)n.push(r());return n},t.BuildTuple=function(e,r){return t.BuildArray(e,r)},t}(),zt={};function Ti(t,e){zt[t]=e}function br(t){return zt[t]}var y=function(){function t(){}return t._CheckLimit=function(e,r){var n=t._LogLimitOutputs[e];return n?n.current++:(n={limit:r,current:1},t._LogLimitOutputs[e]=n),n.current<=n.limit},t._GenerateLimitMessage=function(e,r){var n=t._LogLimitOutputs[e];if(!(!n||!t.MessageLimitReached)&&n.current===n.limit)switch(r){case 0:t.Log(t.MessageLimitReached.replace(/%LIMIT%/g,""+n.limit).replace(/%TYPE%/g,"log"));break;case 1:t.Warn(t.MessageLimitReached.replace(/%LIMIT%/g,""+n.limit).replace(/%TYPE%/g,"warning"));break;case 2:t.Error(t.MessageLimitReached.replace(/%LIMIT%/g,""+n.limit).replace(/%TYPE%/g,"error"));break}},t._AddLogEntry=function(e){t._LogCache=e+t._LogCache,t.OnNewCacheEntry&&t.OnNewCacheEntry(e)},t._FormatMessage=function(e){var r=function(i){return i<10?"0"+i:""+i},n=new Date;return"["+r(n.getHours())+":"+r(n.getMinutes())+":"+r(n.getSeconds())+"]: "+e},t._LogDisabled=function(e,r){},t._LogEnabled=function(e,r){if(!(r!==void 0&&!t._CheckLimit(e,r))){var n=t._FormatMessage(e);console.log("BJS - "+n);var i="<div style='color:white'>"+n+"</div><br>";t._AddLogEntry(i),t._GenerateLimitMessage(e,0)}},t._WarnDisabled=function(e,r){},t._WarnEnabled=function(e,r){if(!(r!==void 0&&!t._CheckLimit(e,r))){var n=t._FormatMessage(e);console.warn("BJS - "+n);var i="<div style='color:orange'>"+e+"</div><br>";t._AddLogEntry(i),t._GenerateLimitMessage(e,1)}},t._ErrorDisabled=function(e,r){},t._ErrorEnabled=function(e,r){if(!(r!==void 0&&!t._CheckLimit(e,r))){var n=t._FormatMessage(e);t.errorsCount++,console.error("BJS - "+n);var i="<div style='color:red'>"+n+"</div><br>";t._AddLogEntry(i),t._GenerateLimitMessage(e,2)}},Object.defineProperty(t,"LogCache",{get:function(){return t._LogCache},enumerable:!1,configurable:!0}),t.ClearLogCache=function(){t._LogCache="",t._LogLimitOutputs={},t.errorsCount=0},Object.defineProperty(t,"LogLevels",{set:function(e){(e&t.MessageLogLevel)===t.MessageLogLevel?t.Log=t._LogEnabled:t.Log=t._LogDisabled,(e&t.WarningLogLevel)===t.WarningLogLevel?t.Warn=t._WarnEnabled:t.Warn=t._WarnDisabled,(e&t.ErrorLogLevel)===t.ErrorLogLevel?t.Error=t._ErrorEnabled:t.Error=t._ErrorDisabled},enumerable:!1,configurable:!0}),t.NoneLogLevel=0,t.MessageLogLevel=1,t.WarningLogLevel=2,t.ErrorLogLevel=4,t.AllLogLevel=7,t.MessageLimitReached="Too many %TYPE%s (%LIMIT%), no more %TYPE%s will be reported for this message.",t._LogCache="",t._LogLimitOutputs={},t.errorsCount=0,t.Log=t._LogEnabled,t.Warn=t._WarnEnabled,t.Error=t._ErrorEnabled,t}(),ot=function(t,e){return!t||t.getClassName&&t.getClassName()==="Mesh"?null:t.getClassName&&t.getClassName()==="SubMesh"?t.clone(e):t.clone?t.clone():null};function wr(t){var e=[];do Object.getOwnPropertyNames(t).forEach(function(r){e.indexOf(r)===-1&&e.push(r)});while(t=Object.getPrototypeOf(t));return e}var yr=function(){function t(){}return t.DeepCopy=function(e,r,n,i){for(var a=wr(e),o=0,s=a;o<s.length;o++){var u=s[o];if(!(u[0]==="_"&&(!i||i.indexOf(u)===-1))&&!u.endsWith("Observable")&&!(n&&n.indexOf(u)!==-1)){var f=e[u],c=typeof f;if(c!=="function")try{if(c==="object")if(f instanceof Array){if(r[u]=[],f.length>0)if(typeof f[0]=="object")for(var l=0;l<f.length;l++){var h=ot(f[l],r);r[u].indexOf(h)===-1&&r[u].push(h)}else r[u]=f.slice(0)}else r[u]=ot(f,r);else r[u]=f}catch(d){y.Warn(d.message)}}}},t}(),Pr=function(){function t(){}return t.Eval=function(e,r){return e.match(/\([^()]*\)/g)?e=e.replace(/\([^()]*\)/g,function(n){return n=n.slice(1,n.length-1),t._HandleParenthesisContent(n,r)}):e=t._HandleParenthesisContent(e,r),e==="true"?!0:e==="false"?!1:t.Eval(e,r)},t._HandleParenthesisContent=function(e,r){r=r||function(c){return c==="true"};var n,i=e.split("||");for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var o=t._SimplifyNegation(i[a].trim()),s=o.split("&&");if(s.length>1)for(var u=0;u<s.length;++u){var f=t._SimplifyNegation(s[u].trim());if(f!=="true"&&f!=="false"?f[0]==="!"?n=!r(f.substring(1)):n=r(f):n=f==="true",!n){o="false";break}}if(n||o==="true"){n=!0;break}o!=="true"&&o!=="false"?o[0]==="!"?n=!r(o.substring(1)):n=r(o):n=o==="true"}return n?"true":"false"},t._SimplifyNegation=function(e){return e=e.replace(/^[\s!]+/,function(r){return r=r.replace(/[\s]/g,function(){return""}),r.length%2?"!":""}),e=e.trim(),e==="!true"?e="false":e==="!false"&&(e="true"),e},t}(),de=function(){function t(){}return t.EnableFor=function(e){e._tags=e._tags||{},e.hasTags=function(){return t.HasTags(e)},e.addTags=function(r){return t.AddTagsTo(e,r)},e.removeTags=function(r){return t.RemoveTagsFrom(e,r)},e.matchesTagsQuery=function(r){return t.MatchesQuery(e,r)}},t.DisableFor=function(e){delete e._tags,delete e.hasTags,delete e.addTags,delete e.removeTags,delete e.matchesTagsQuery},t.HasTags=function(e){if(!e._tags)return!1;var r=e._tags;for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n))return!0;return!1},t.GetTags=function(e,r){if(r===void 0&&(r=!0),!e._tags)return null;if(r){var n=[];for(var i in e._tags)Object.prototype.hasOwnProperty.call(e._tags,i)&&e._tags[i]===!0&&n.push(i);return n.join(" ")}else return e._tags},t.AddTagsTo=function(e,r){if(!!r&&typeof r=="string"){var n=r.split(" ");n.forEach(function(i){t._AddTagTo(e,i)})}},t._AddTagTo=function(e,r){r=r.trim(),!(r===""||r==="true"||r==="false")&&(r.match(/[\s]/)||r.match(/^([!]|([|]|[&]){2})/)||(t.EnableFor(e),e._tags[r]=!0))},t.RemoveTagsFrom=function(e,r){if(!!t.HasTags(e)){var n=r.split(" ");for(var i in n)t._RemoveTagFrom(e,n[i])}},t._RemoveTagFrom=function(e,r){delete e._tags[r]},t.MatchesQuery=function(e,r){return r===void 0?!0:r===""?t.HasTags(e):Pr.Eval(r,function(n){return t.HasTags(e)&&e._tags[n]})},t}();function te(t){return"".concat(t," needs to be imported before as it contains a side-effect required by your code.")}var Pe={},we={},st=function(t,e,r){var n=t();de&&de.AddTagsTo(n,e.tags);var i=Ve(n);for(var a in i){var o=i[a],s=e[a],u=o.type;if(s!=null&&(a!=="uniqueId"||Rr.AllowLoadingUniqueId))switch(u){case 0:case 6:case 11:n[a]=s;break;case 1:n[a]=r||s.isRenderTarget?s:s.clone();break;case 2:case 3:case 4:case 5:case 7:case 10:case 12:n[a]=r?s:s.clone();break}}return n};function Tr(t){var e=t.getClassName();return Pe[e]||(Pe[e]={}),Pe[e]}function Ve(t){var e=t.getClassName();if(we[e])return we[e];we[e]={};for(var r=we[e],n=t,i=e;i;){var a=Pe[i];for(var o in a)r[o]=a[o];var s=void 0,u=!1;do{if(s=Object.getPrototypeOf(n),!s.getClassName){u=!0;break}if(s.getClassName()!==i)break;n=s}while(s);if(u)break;i=s.getClassName(),n=s}return r}function U(t,e){return function(r,n){var i=Tr(r);i[n]||(i[n]={type:t,sourceName:e})}}function Er(t,e){return e===void 0&&(e=null),function(r,n){var i=e||"_"+n;Object.defineProperty(r,n,{get:function(){return this[i]},set:function(a){typeof this.equals=="function"&&this.equals(a)||this[i]!==a&&(this[i]=a,r[t].apply(this))},enumerable:!0,configurable:!0})}}function Ei(t,e){return e===void 0&&(e=null),Er(t,e)}function Ri(t){return U(0,t)}function Bi(t){return U(1,t)}function Di(t){return U(2,t)}function Fi(t){return U(3,t)}function Li(t){return U(4,t)}function Oi(t){return U(5,t)}function Si(t){return U(6,t)}function ki(t){return U(7,t)}function Ui(t){return U(8,t)}function xi(t){return U(9,t)}function Mi(t){return U(10,t)}function Ii(t){return U(12,t)}function Ki(t){return U(11,t)}var Rr=function(){function t(){}return t.AppendSerializedAnimations=function(e,r){if(e.animations){r.animations=[];for(var n=0;n<e.animations.length;n++){var i=e.animations[n];r.animations.push(i.serialize())}}},t.Serialize=function(e,r){r||(r={}),de&&(r.tags=de.GetTags(e));var n=Ve(e);for(var i in n){var a=n[i],o=a.sourceName||i,s=a.type,u=e[i];if(u!=null&&(i!=="uniqueId"||t.AllowLoadingUniqueId))switch(s){case 0:r[o]=u;break;case 1:r[o]=u.serialize();break;case 2:r[o]=u.asArray();break;case 3:r[o]=u.serialize();break;case 4:r[o]=u.asArray();break;case 5:r[o]=u.asArray();break;case 6:r[o]=u.id;break;case 7:r[o]=u.serialize();break;case 8:r[o]=u.asArray();break;case 9:r[o]=u.serialize();break;case 10:r[o]=u.asArray();break;case 11:r[o]=u.id;break;case 12:r[o]=u.asArray();break}}return r},t.Parse=function(e,r,n,i){i===void 0&&(i=null);var a=e();i||(i=""),de&&de.AddTagsTo(a,r.tags);var o=Ve(a);for(var s in o){var u=o[s],f=r[u.sourceName||s],c=u.type;if(f!=null&&(s!=="uniqueId"||t.AllowLoadingUniqueId)){var l=a;switch(c){case 0:l[s]=f;break;case 1:n&&(l[s]=t._TextureParser(f,n,i));break;case 2:l[s]=Qt.FromArray(f);break;case 3:l[s]=t._FresnelParametersParser(f);break;case 4:l[s]=ae.FromArray(f);break;case 5:l[s]=C.FromArray(f);break;case 6:n&&(l[s]=n.getLastMeshById(f));break;case 7:l[s]=t._ColorCurvesParser(f);break;case 8:l[s]=Ht.FromArray(f);break;case 9:l[s]=t._ImageProcessingConfigurationParser(f);break;case 10:l[s]=fr.FromArray(f);break;case 11:n&&(l[s]=n.getCameraById(f));break;case 12:l[s]=Te.FromArray(f);break}}}return a},t.Clone=function(e,r){return st(e,r,!1)},t.Instanciate=function(e,r){return st(e,r,!0)},t.AllowLoadingUniqueId=!1,t._ImageProcessingConfigurationParser=function(e){throw te("ImageProcessingConfiguration")},t._FresnelParametersParser=function(e){throw te("FresnelParameters")},t._ColorCurvesParser=function(e){throw te("ColorCurves")},t._TextureParser=function(e,r,n){throw te("Texture")},t}();function ut(t,e,r,n){var i=r.value;r.value=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var s=i;if(typeof _native!="undefined"&&_native[e]){var u=_native[e];n?s=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];return n.apply(void 0,f)?u.apply(void 0,f):i.apply(void 0,f)}:s=u}return t[e]=s,s.apply(void 0,a)}}ut.filter=function(t){return function(e,r,n){return ut(e,r,n,t)}};function Br(){return typeof _native!="undefined"&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest}var Ee=function(){function t(){this._xhr=Br(),this._requestURL=""}return t.prototype._injectCustomRequestHeaders=function(){if(!this._shouldSkipRequestModifications(this._requestURL))for(var e in t.CustomRequestHeaders){var r=t.CustomRequestHeaders[e];r&&this._xhr.setRequestHeader(e,r)}},t.prototype._shouldSkipRequestModifications=function(e){return t.SkipRequestModificationForBabylonCDN&&(e.includes("preview.babylonjs.com")||e.includes("cdn.babylonjs.com"))},Object.defineProperty(t.prototype,"onprogress",{get:function(){return this._xhr.onprogress},set:function(e){this._xhr.onprogress=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readyState",{get:function(){return this._xhr.readyState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._xhr.status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusText",{get:function(){return this._xhr.statusText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"response",{get:function(){return this._xhr.response},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"responseURL",{get:function(){return this._xhr.responseURL},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"responseText",{get:function(){return this._xhr.responseText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"responseType",{get:function(){return this._xhr.responseType},set:function(e){this._xhr.responseType=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeout",{get:function(){return this._xhr.timeout},set:function(e){this._xhr.timeout=e},enumerable:!1,configurable:!0}),t.prototype.addEventListener=function(e,r,n){this._xhr.addEventListener(e,r,n)},t.prototype.removeEventListener=function(e,r,n){this._xhr.removeEventListener(e,r,n)},t.prototype.abort=function(){this._xhr.abort()},t.prototype.send=function(e){t.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(e)},t.prototype.open=function(e,r){for(var n=0,i=t.CustomRequestModifiers;n<i.length;n++){var a=i[n];if(this._shouldSkipRequestModifications(r))return;a(this._xhr,r)}return r=r.replace("file:http:","http:"),r=r.replace("file:https:","https:"),this._requestURL=r,this._xhr.open(e,r,!0)},t.prototype.setRequestHeader=function(e,r){this._xhr.setRequestHeader(e,r)},t.prototype.getResponseHeader=function(e){return this._xhr.getResponseHeader(e)},t.CustomRequestHeaders={},t.CustomRequestModifiers=new Array,t.SkipRequestModificationForBabylonCDN=!0,t}();function re(){return typeof window!="undefined"}function Xt(){return typeof navigator!="undefined"}function Dr(){return typeof document!="undefined"}function Vt(t){for(var e="",r=t.firstChild;r;)r.nodeType===3&&(e+=r.textContent),r=r.nextSibling;return e}var Fr={IsWindowObjectExist:re,IsNavigatorAvailable:Xt,IsDocumentAvailable:Dr,GetDOMTextContent:Vt},X=function(){function t(){}return Object.defineProperty(t,"Now",{get:function(){return Fr.IsWindowObjectExist()&&window.performance&&window.performance.now?window.performance.now():Date.now()},enumerable:!1,configurable:!0}),t}(),Ae=function(){function t(){}return t.FilesToLoad={},t}(),Lr=function(){function t(){}return t.ExponentialBackoff=function(e,r){return e===void 0&&(e=3),r===void 0&&(r=500),function(n,i,a){return i.status!==0||a>=e||n.indexOf("file:")!==-1?-1:Math.pow(2,a)*r}},t}(),be=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e._setPrototypeOf=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},e}(Error),We={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002},Ze=function(t){R(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.errorCode=n,a.innerError=i,a.name="RuntimeError",be._setPrototypeOf(a,e.prototype),a}return e}(be),Or=function(t){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(t);for(var e="",r=0;r<t.byteLength;r++)e+=String.fromCharCode(t[r]);return e},Sr=function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",n,i,a,o,s,u,f,c=0,l=ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t);c<l.length;)n=l[c++],i=c<l.length?l[c++]:Number.NaN,a=c<l.length?l[c++]:Number.NaN,o=n>>2,s=(n&3)<<4|i>>4,u=(i&15)<<2|a>>6,f=a&63,isNaN(i)?u=f=64:isNaN(a)&&(f=64),r+=e.charAt(o)+e.charAt(s)+e.charAt(u)+e.charAt(f);return r},Yt=function(t){return atob(t)},kr=function(t){for(var e=Yt(t),r=e.length,n=new Uint8Array(new ArrayBuffer(r)),i=0;i<r;i++)n[i]=e.charCodeAt(i);return n.buffer},qt=function(){function t(){}return t.SetImmediate=function(e){re()&&window.setImmediate?window.setImmediate(e):setTimeout(e,1)},t}(),Ur=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i),ft=function(t){R(e,t);function e(r,n){var i=t.call(this,r,We.LoadFileError)||this;return i.name="LoadFileError",be._setPrototypeOf(i,e.prototype),n instanceof Ee?i.request=n:i.file=n,i}return e}(Ze),ct=function(t){R(e,t);function e(r,n){var i=t.call(this,r,We.RequestFileError)||this;return i.request=n,i.name="RequestFileError",be._setPrototypeOf(i,e.prototype),i}return e}(Ze),xr=function(t){R(e,t);function e(r,n){var i=t.call(this,r,We.ReadFileError)||this;return i.file=n,i.name="ReadFileError",be._setPrototypeOf(i,e.prototype),i}return e}(Ze),L={DefaultRetryStrategy:Lr.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:function(t){return t}},Jt=function(t){return t=t.replace(/#/gm,"%23"),t},$e=function(t,e){if(!(t&&t.indexOf("data:")===0)&&L.CorsBehavior)if(typeof L.CorsBehavior=="string"||L.CorsBehavior instanceof String)e.crossOrigin=L.CorsBehavior;else{var r=L.CorsBehavior(t);r&&(e.crossOrigin=r)}},et=function(t,e,r,n,i,a){var o;i===void 0&&(i="");var s,u=!1;t instanceof ArrayBuffer||ArrayBuffer.isView(t)?typeof Blob!="undefined"&&typeof URL!="undefined"?(s=URL.createObjectURL(new Blob([t],{type:i})),u=!0):s="data:".concat(i,";base64,")+Sr(t):t instanceof Blob?(s=URL.createObjectURL(t),u=!0):(s=Jt(t),s=L.PreprocessUrl(t));var f=ee.LastCreatedEngine,c=function(A){if(r){var _=s||t.toString();r("Error while trying to load image: ".concat(_.indexOf("http")===0||_.length<=128?_:_.slice(0,128)+"..."),A)}};if(typeof Image=="undefined"||((o=f==null?void 0:f._features.forceBitmapOverHTMLImageElement)!==null&&o!==void 0?o:!1))return ve(s,function(A){f.createImageBitmap(new Blob([A],{type:i}),se({premultiplyAlpha:"none"},a)).then(function(_){e(_),u&&URL.revokeObjectURL(s)}).catch(function(_){r&&r("Error while trying to load image: "+t,_)})},void 0,n||void 0,!0,function(A,_){c(_)}),null;var l=new Image;$e(s,l);var h=function(){l.removeEventListener("load",h),l.removeEventListener("error",d),e(l),u&&l.src&&URL.revokeObjectURL(l.src)},d=function(A){l.removeEventListener("load",h),l.removeEventListener("error",d),c(A),u&&l.src&&URL.revokeObjectURL(l.src)};l.addEventListener("load",h),l.addEventListener("error",d);var v=function(){l.src=s},g=function(){n&&n.loadImage(s,l)};if(s.substr(0,5)!=="blob:"&&s.substr(0,5)!=="data:"&&n&&n.enableTexturesOffline)n.open(g,v);else{if(s.indexOf("file:")!==-1){var p=decodeURIComponent(s.substring(5).toLowerCase());if(Ae.FilesToLoad[p]&&typeof URL!="undefined"){try{var m=void 0;try{m=URL.createObjectURL(Ae.FilesToLoad[p])}catch{m=URL.createObjectURL(Ae.FilesToLoad[p])}l.src=m,u=!0}catch{l.src=""}return l}}v()}return l},Re=function(t,e,r,n,i){var a=new FileReader,o={onCompleteObservable:new F,abort:function(){return a.abort()}};return a.onloadend=function(){return o.onCompleteObservable.notifyObservers(o)},i&&(a.onerror=function(){i(new xr("Unable to read ".concat(t.name),t))}),a.onload=function(s){e(s.target.result)},r&&(a.onprogress=r),n?a.readAsArrayBuffer(t):a.readAsText(t),o},ve=function(t,e,r,n,i,a,o){if(t.name)return Re(t,e,r,i,a?function(l){a(void 0,l)}:void 0);var s=t;if(s.indexOf("file:")!==-1){var u=decodeURIComponent(s.substring(5).toLowerCase());u.indexOf("./")===0&&(u=u.substring(2));var f=Ae.FilesToLoad[u];if(f)return Re(f,e,r,i,a?function(l){return a(void 0,new ft(l.message,l.file))}:void 0)}if(tt(s)){var c={onCompleteObservable:new F,abort:function(){return function(){}}};try{e(i?rt(s):$t(s))}catch(l){a?a(void 0,l):y.Error(l.message||"Failed to parse the Data URL")}return qt.SetImmediate(function(){c.onCompleteObservable.notifyObservers(c)}),c}return Wt(s,function(l,h){e(l,h?h.responseURL:void 0)},r,n,i,a?function(l){a(l.request,new ft(l.message,l.request))}:void 0,o)},Wt=function(t,e,r,n,i,a,o){t=Jt(t),t=L.PreprocessUrl(t);var s=L.BaseUrl+t,u=!1,f={onCompleteObservable:new F,abort:function(){return u=!0}},c=function(){var d=new Ee,v=null,g,p=function(){!d||(r&&d.removeEventListener("progress",r),g&&d.removeEventListener("readystatechange",g),d.removeEventListener("loadend",m))},m=function(){p(),f.onCompleteObservable.notifyObservers(f),f.onCompleteObservable.clear(),r=void 0,g=null,m=null,a=void 0,o=void 0,e=void 0};f.abort=function(){u=!0,m&&m(),d&&d.readyState!==(XMLHttpRequest.DONE||4)&&d.abort(),v!==null&&(clearTimeout(v),v=null),d=null};var A=function(w){var b=w.message||"Unknown error";a&&d?a(new ct(b,d)):y.Error(b)},_=function(w){if(!!d){if(d.open("GET",s),o)try{o(d)}catch(b){A(b);return}i&&(d.responseType="arraybuffer"),r&&d.addEventListener("progress",r),m&&d.addEventListener("loadend",m),g=function(){if(!(u||!d)&&d.readyState===(XMLHttpRequest.DONE||4)){if(g&&d.removeEventListener("readystatechange",g),d.status>=200&&d.status<300||d.status===0&&(!re()||Zt())){try{e&&e(i?d.response:d.responseText,d)}catch(T){A(T)}return}var b=L.DefaultRetryStrategy;if(b){var E=b(s,d,w);if(E!==-1){p(),d=new Ee,v=setTimeout(function(){return _(w+1)},E);return}}var P=new ct("Error status: "+d.status+" "+d.statusText+" - Unable to load "+s,d);a&&a(P)}},d.addEventListener("readystatechange",g),d.send()}};_(0)};if(n&&n.enableSceneOffline){var l=function(d){d&&d.status>400?a&&a(d):c()},h=function(){n&&n.loadFile(L.BaseUrl+t,function(d){!u&&e&&e(d),f.onCompleteObservable.notifyObservers(f)},r?function(d){!u&&r&&r(d)}:void 0,l,i)};n.open(h,l)}else c();return f},Zt=function(){return typeof location!="undefined"&&location.protocol==="file:"},tt=function(t){return Ur.test(t)};function rt(t){return kr(t.split(",")[1])}var $t=function(t){return Yt(t.split(",")[1])},Mr=function(){Xe._FileToolsLoadImage=et,Xe._FileToolsLoadFile=ve,Ar._FileToolsLoadFile=ve};Mr();var pe,Ir=function(t,e,r,n,i,a,o,s,u,f){pe={DecodeBase64UrlToBinary:t,DecodeBase64UrlToString:e,DefaultRetryStrategy:r.DefaultRetryStrategy,BaseUrl:r.BaseUrl,CorsBehavior:r.CorsBehavior,PreprocessUrl:r.PreprocessUrl,IsBase64DataUrl:n,IsFileURL:i,LoadFile:a,LoadImage:o,ReadFile:s,RequestFile:u,SetCorsBehavior:f},Object.defineProperty(pe,"DefaultRetryStrategy",{get:function(){return r.DefaultRetryStrategy},set:function(c){r.DefaultRetryStrategy=c}}),Object.defineProperty(pe,"BaseUrl",{get:function(){return r.BaseUrl},set:function(c){r.BaseUrl=c}}),Object.defineProperty(pe,"PreprocessUrl",{get:function(){return r.PreprocessUrl},set:function(c){r.PreprocessUrl=c}}),Object.defineProperty(pe,"CorsBehavior",{get:function(){return r.CorsBehavior},set:function(c){r.CorsBehavior=c}})};Ir(rt,$t,L,tt,Zt,ve,et,Re,Wt,$e);var Se=function(){function t(){}return t.Instantiate=function(e){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[e])return this.RegisteredExternalClasses[e];var r=br(e);if(r)return r;y.Warn(e+" not found, you may have missed an import.");for(var n=e.split("."),i=window||this,a=0,o=n.length;a<o;a++)i=i[n[a]];return typeof i!="function"?null:i},t.RegisteredExternalClasses={},t}();function Kr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t==="x"?e:e&3|8;return r.toString(16)})}var D=function(){function t(){}return Object.defineProperty(t,"BaseUrl",{get:function(){return L.BaseUrl},set:function(e){L.BaseUrl=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"DefaultRetryStrategy",{get:function(){return L.DefaultRetryStrategy},set:function(e){L.DefaultRetryStrategy=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CorsBehavior",{get:function(){return L.CorsBehavior},set:function(e){L.CorsBehavior=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"UseFallbackTexture",{get:function(){return ee.UseFallbackTexture},set:function(e){ee.UseFallbackTexture=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"RegisteredExternalClasses",{get:function(){return Se.RegisteredExternalClasses},set:function(e){Se.RegisteredExternalClasses=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"fallbackTexture",{get:function(){return ee.FallbackTexture},set:function(e){ee.FallbackTexture=e},enumerable:!1,configurable:!0}),t.FetchToRef=function(e,r,n,i,a,o){var s=Math.abs(e)*n%n|0,u=Math.abs(r)*i%i|0,f=(s+u*n)*4;o.r=a[f]/255,o.g=a[f+1]/255,o.b=a[f+2]/255,o.a=a[f+3]/255},t.Mix=function(e,r,n){return e*(1-n)+r*n},t.Instantiate=function(e){return Se.Instantiate(e)},t.SetImmediate=function(e){qt.SetImmediate(e)},t.IsExponentOfTwo=function(e){var r=1;do r*=2;while(r<e);return r===e},t.FloatRound=function(e){return Math.fround?Math.fround(e):(t._TmpFloatArray[0]=e,t._TmpFloatArray[0])},t.GetFilename=function(e){var r=e.lastIndexOf("/");return r<0?e:e.substring(r+1)},t.GetFolderPath=function(e,r){r===void 0&&(r=!1);var n=e.lastIndexOf("/");return n<0?r?e:"":e.substring(0,n+1)},t.ToDegrees=function(e){return e*180/Math.PI},t.ToRadians=function(e){return e*Math.PI/180},t.MakeArray=function(e,r){return r!==!0&&(e===void 0||e==null)?null:Array.isArray(e)?e:[e]},t.GetPointerPrefix=function(e){var r="pointer";return re()&&!window.PointerEvent&&(r="mouse"),e._badDesktopOS&&!e._badOS&&!(document&&"ontouchend"in document)&&(r="mouse"),r},t.SetCorsBehavior=function(e,r){$e(e,r)},t.SetReferrerPolicyBehavior=function(e,r){r.referrerPolicy=e},t.CleanUrl=function(e){return e=e.replace(/#/gm,"%23"),e},Object.defineProperty(t,"PreprocessUrl",{get:function(){return L.PreprocessUrl},set:function(e){L.PreprocessUrl=e},enumerable:!1,configurable:!0}),t.LoadImage=function(e,r,n,i,a,o){return et(e,r,n,i,a,o)},t.LoadFile=function(e,r,n,i,a,o){return ve(e,r,n,i,a,o)},t.LoadFileAsync=function(e,r){return r===void 0&&(r=!0),new Promise(function(n,i){ve(e,function(a){n(a)},void 0,void 0,r,function(a,o){i(o)})})},t.LoadScript=function(e,r,n,i){if(!!re()){var a=document.getElementsByTagName("head")[0],o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",e),i&&(o.id=i),o.onload=function(){r&&r()},o.onerror=function(s){n&&n("Unable to load script '".concat(e,"'"),s)},a.appendChild(o)}},t.LoadScriptAsync=function(e){var r=this;return new Promise(function(n,i){r.LoadScript(e,function(){n()},function(a,o){i(o)})})},t.ReadFileAsDataURL=function(e,r,n){var i=new FileReader,a={onCompleteObservable:new F,abort:function(){return i.abort()}};return i.onloadend=function(){a.onCompleteObservable.notifyObservers(a)},i.onload=function(o){r(o.target.result)},i.onprogress=n,i.readAsDataURL(e),a},t.ReadFile=function(e,r,n,i,a){return Re(e,r,n,i,a)},t.FileAsURL=function(e){var r=new Blob([e]),n=window.URL||window.webkitURL,i=n.createObjectURL(r);return i},t.Format=function(e,r){return r===void 0&&(r=2),e.toFixed(r)},t.DeepCopy=function(e,r,n,i){yr.DeepCopy(e,r,n,i)},t.IsEmpty=function(e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))return!1;return!0},t.RegisterTopRootEvents=function(e,r){for(var n=0;n<r.length;n++){var i=r[n];e.addEventListener(i.name,i.handler,!1);try{window.parent&&window.parent.addEventListener(i.name,i.handler,!1)}catch{}}},t.UnregisterTopRootEvents=function(e,r){for(var n=0;n<r.length;n++){var i=r[n];e.removeEventListener(i.name,i.handler);try{e.parent&&e.parent.removeEventListener(i.name,i.handler)}catch{}}},t.DumpFramebuffer=function(e,r,n,i,a,o){return a===void 0&&(a="image/png"),Kt(this,void 0,void 0,function(){var s,u;return Gt(this,function(f){switch(f.label){case 0:return[4,n.readPixels(0,0,e,r)];case 1:return s=f.sent(),u=new Uint8Array(s.buffer),t.DumpData(e,r,u,i,a,o,!0),[2]}})})},t.DumpData=function(e,r,n,i,a,o,s,u,f){a===void 0&&(a="image/png"),s===void 0&&(s=!1),u===void 0&&(u=!1),t._ScreenshotCanvas||(t._ScreenshotCanvas=document.createElement("canvas")),t._ScreenshotCanvas.width=e,t._ScreenshotCanvas.height=r;var c=t._ScreenshotCanvas.getContext("2d");if(c){if(n instanceof Float32Array){for(var l=new Uint8Array(n.length),h=n.length;h--;){var d=n[h];l[h]=d<0?0:d>1?1:Math.round(d*255)}n=l}var v=c.createImageData(e,r),g=v.data;g.set(n),c.putImageData(v,0,0);var p=t._ScreenshotCanvas;if(s){var m=document.createElement("canvas");m.width=e,m.height=r;var A=m.getContext("2d");if(!A)return;A.translate(0,r),A.scale(1,-1),A.drawImage(t._ScreenshotCanvas,0,0),p=m}u?t.ToBlob(p,function(_){var w=new FileReader;w.onload=function(b){var E=b.target.result;i&&i(E)},w.readAsArrayBuffer(_)},a,f):t.EncodeScreenshotCanvasData(i,a,o,p,f)}},t.DumpDataAsync=function(e,r,n,i,a,o,s,u){return i===void 0&&(i="image/png"),o===void 0&&(o=!1),s===void 0&&(s=!1),new Promise(function(f){t.DumpData(e,r,n,function(c){return f(c)},i,a,o,s,u)})},t.ToBlob=function(e,r,n,i){n===void 0&&(n="image/png"),e.toBlob||(e.toBlob=function(a,o,s){var u=this;setTimeout(function(){for(var f=atob(u.toDataURL(o,s).split(",")[1]),c=f.length,l=new Uint8Array(c),h=0;h<c;h++)l[h]=f.charCodeAt(h);a(new Blob([l]))})}),e.toBlob(function(a){r(a)},n,i)},t.DownloadBlob=function(e,r){if("download"in document.createElement("a")){if(!r){var n=new Date,i=(n.getFullYear()+"-"+(n.getMonth()+1)).slice(2)+"-"+n.getDate()+"_"+n.getHours()+"-"+("0"+n.getMinutes()).slice(-2);r="screenshot_"+i+".png"}t.Download(e,r)}else if(e&&typeof URL!="undefined"){var a=URL.createObjectURL(e),o=window.open("");if(!o)return;var s=o.document.createElement("img");s.onload=function(){URL.revokeObjectURL(a)},s.src=a,o.document.body.appendChild(s)}},t.EncodeScreenshotCanvasData=function(e,r,n,i,a){if(r===void 0&&(r="image/png"),e){var o=(i!=null?i:t._ScreenshotCanvas).toDataURL(r,a);e(o)}else this.ToBlob(i!=null?i:t._ScreenshotCanvas,function(s){s&&t.DownloadBlob(s,n)},r,a)},t.Download=function(e,r){if(navigator&&navigator.msSaveBlob){navigator.msSaveBlob(e,r);return}if(typeof URL!="undefined"){var n=window.URL.createObjectURL(e),i=document.createElement("a");document.body.appendChild(i),i.style.display="none",i.href=n,i.download=r,i.addEventListener("click",function(){i.parentElement&&i.parentElement.removeChild(i)}),i.click(),window.URL.revokeObjectURL(n)}},t.BackCompatCameraNoPreventDefault=function(e){return typeof e[0]=="boolean"?e[0]:typeof e[1]=="boolean"?e[1]:!1},t.CreateScreenshot=function(e,r,n,i,a){throw te("ScreenshotTools")},t.CreateScreenshotAsync=function(e,r,n,i){throw te("ScreenshotTools")},t.CreateScreenshotUsingRenderTarget=function(e,r,n,i,a,o,s,u){throw te("ScreenshotTools")},t.CreateScreenshotUsingRenderTargetAsync=function(e,r,n,i,a,o,s){throw te("ScreenshotTools")},t.RandomId=function(){return Kr()},t.IsBase64=function(e){return tt(e)},t.DecodeBase64=function(e){return rt(e)},Object.defineProperty(t,"errorsCount",{get:function(){return y.errorsCount},enumerable:!1,configurable:!0}),t.Log=function(e){y.Log(e)},t.Warn=function(e){y.Warn(e)},t.Error=function(e){y.Error(e)},Object.defineProperty(t,"LogCache",{get:function(){return y.LogCache},enumerable:!1,configurable:!0}),t.ClearLogCache=function(){y.ClearLogCache()},Object.defineProperty(t,"LogLevels",{set:function(e){y.LogLevels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"PerformanceLogLevel",{set:function(e){if((e&t.PerformanceUserMarkLogLevel)===t.PerformanceUserMarkLogLevel){t.StartPerformanceCounter=t._StartUserMark,t.EndPerformanceCounter=t._EndUserMark;return}if((e&t.PerformanceConsoleLogLevel)===t.PerformanceConsoleLogLevel){t.StartPerformanceCounter=t._StartPerformanceConsole,t.EndPerformanceCounter=t._EndPerformanceConsole;return}t.StartPerformanceCounter=t._StartPerformanceCounterDisabled,t.EndPerformanceCounter=t._EndPerformanceCounterDisabled},enumerable:!1,configurable:!0}),t._StartPerformanceCounterDisabled=function(e,r){},t._EndPerformanceCounterDisabled=function(e,r){},t._StartUserMark=function(e,r){if(r===void 0&&(r=!0),!t._Performance){if(!re())return;t._Performance=window.performance}!r||!t._Performance.mark||t._Performance.mark(e+"-Begin")},t._EndUserMark=function(e,r){r===void 0&&(r=!0),!(!r||!t._Performance.mark)&&(t._Performance.mark(e+"-End"),t._Performance.measure(e,e+"-Begin",e+"-End"))},t._StartPerformanceConsole=function(e,r){r===void 0&&(r=!0),r&&(t._StartUserMark(e,r),console.time&&console.time(e))},t._EndPerformanceConsole=function(e,r){r===void 0&&(r=!0),r&&(t._EndUserMark(e,r),console.timeEnd(e))},Object.defineProperty(t,"Now",{get:function(){return X.Now},enumerable:!1,configurable:!0}),t.GetClassName=function(e,r){r===void 0&&(r=!1);var n=null;if(!r&&e.getClassName)n=e.getClassName();else{if(e instanceof Object){var i=r?e:Object.getPrototypeOf(e);n=i.constructor.__bjsclassName__}n||(n=typeof e)}return n},t.First=function(e,r){for(var n=0,i=e;n<i.length;n++){var a=i[n];if(r(a))return a}return null},t.getFullClassName=function(e,r){r===void 0&&(r=!1);var n=null,i=null;if(!r&&e.getClassName)n=e.getClassName();else{if(e instanceof Object){var a=r?e:Object.getPrototypeOf(e);n=a.constructor.__bjsclassName__,i=a.constructor.__bjsmoduleName__}n||(n=typeof e)}return n?(i!=null?i+".":"")+n:null},t.DelayAsync=function(e){return new Promise(function(r){setTimeout(function(){r()},e)})},t.IsSafari=function(){return Xt()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1},t.UseCustomRequestHeaders=!1,t.CustomRequestHeaders=Ee.CustomRequestHeaders,t._TmpFloatArray=new Float32Array(1),t.GetDOMTextContent=Vt,t.GetAbsoluteUrl=typeof document=="object"?function(e){var r=document.createElement("a");return r.href=e,r.href}:typeof URL=="function"&&typeof location=="object"?function(e){return new URL(e,location.origin).href}:function(){throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},t.NoneLogLevel=y.NoneLogLevel,t.MessageLogLevel=y.MessageLogLevel,t.WarningLogLevel=y.WarningLogLevel,t.ErrorLogLevel=y.ErrorLogLevel,t.AllLogLevel=y.AllLogLevel,t.IsWindowObjectExist=re,t.PerformanceNoneLogLevel=0,t.PerformanceUserMarkLogLevel=1,t.PerformanceConsoleLogLevel=2,t.StartPerformanceCounter=t._StartPerformanceCounterDisabled,t.EndPerformanceCounter=t._EndPerformanceCounterDisabled,t}(),Gi=function(){function t(e,r,n,i){i===void 0&&(i=0),this.iterations=e,this.index=i-1,this._done=!1,this._fn=r,this._successCallback=n}return t.prototype.executeNext=function(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())},t.prototype.breakLoop=function(){this._done=!0,this._successCallback()},t.Run=function(e,r,n,i){i===void 0&&(i=0);var a=new t(e,r,n,i);return a.executeNext(),a},t.SyncAsyncForLoop=function(e,r,n,i,a,o){return o===void 0&&(o=0),t.Run(Math.ceil(e/r),function(s){a&&a()?s.breakLoop():setTimeout(function(){for(var u=0;u<r;++u){var f=s.index*r+u;if(f>=e)break;if(n(f),a&&a()){s.breakLoop();break}}s.executeNext()},o)},i)},t}();ee.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z";var Gr=function(){function t(e){this.length=0,this.data=new Array(e),this._id=t._GlobalId++}return t.prototype.push=function(e){this.data[this.length++]=e,this.length>this.data.length&&(this.data.length*=2)},t.prototype.forEach=function(e){for(var r=0;r<this.length;r++)e(this.data[r])},t.prototype.sort=function(e){this.data.sort(e)},t.prototype.reset=function(){this.length=0},t.prototype.dispose=function(){this.reset(),this.data&&(this.data.length=0)},t.prototype.concat=function(e){if(e.length!==0){this.length+e.length>this.data.length&&(this.data.length=(this.length+e.length)*2);for(var r=0;r<e.length;r++)this.data[this.length++]=(e.data||e)[r]}},t.prototype.indexOf=function(e){var r=this.data.indexOf(e);return r>=this.length?-1:r},t.prototype.contains=function(e){return this.indexOf(e)!==-1},t._GlobalId=0,t}(),Hi=function(t){R(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._duplicateId=0,r}return e.prototype.push=function(r){t.prototype.push.call(this,r),r.__smartArrayFlags||(r.__smartArrayFlags={}),r.__smartArrayFlags[this._id]=this._duplicateId},e.prototype.pushNoDuplicate=function(r){return r.__smartArrayFlags&&r.__smartArrayFlags[this._id]===this._duplicateId?!1:(this.push(r),!0)},e.prototype.reset=function(){t.prototype.reset.call(this),this._duplicateId++},e.prototype.concatWithNoDuplicate=function(r){if(r.length!==0){this.length+r.length>this.data.length&&(this.data.length=(this.length+r.length)*2);for(var n=0;n<r.length;n++){var i=(r.data||r)[n];this.pushNoDuplicate(i)}}},e}(Gr),Hr=function(){function t(){this._count=0,this._data={}}return t.prototype.copyFrom=function(e){var r=this;this.clear(),e.forEach(function(n,i){return r.add(n,i)})},t.prototype.get=function(e){var r=this._data[e];if(r!==void 0)return r},t.prototype.getOrAddWithFactory=function(e,r){var n=this.get(e);return n!==void 0||(n=r(e),n&&this.add(e,n)),n},t.prototype.getOrAdd=function(e,r){var n=this.get(e);return n!==void 0?n:(this.add(e,r),r)},t.prototype.contains=function(e){return this._data[e]!==void 0},t.prototype.add=function(e,r){return this._data[e]!==void 0?!1:(this._data[e]=r,++this._count,!0)},t.prototype.set=function(e,r){return this._data[e]===void 0?!1:(this._data[e]=r,!0)},t.prototype.getAndRemove=function(e){var r=this.get(e);return r!==void 0?(delete this._data[e],--this._count,r):null},t.prototype.remove=function(e){return this.contains(e)?(delete this._data[e],--this._count,!0):!1},t.prototype.clear=function(){this._data={},this._count=0},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),t.prototype.forEach=function(e){for(var r in this._data){var n=this._data[r];e(r,n)}},t.prototype.first=function(e){for(var r in this._data){var n=this._data[r],i=e(r,n);if(i)return i}return null},t}(),Qi=function(){function t(){this._startMonitoringTime=0,this._min=0,this._max=0,this._average=0,this._lastSecAverage=0,this._current=0,this._totalValueCount=0,this._totalAccumulated=0,this._lastSecAccumulated=0,this._lastSecTime=0,this._lastSecValueCount=0}return Object.defineProperty(t.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"average",{get:function(){return this._average},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastSecAverage",{get:function(){return this._lastSecAverage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this._totalAccumulated},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._totalValueCount},enumerable:!1,configurable:!0}),t.prototype.fetchNewFrame=function(){this._totalValueCount++,this._current=0,this._lastSecValueCount++},t.prototype.addCount=function(e,r){!t.Enabled||(this._current+=e,r&&this._fetchResult())},t.prototype.beginMonitoring=function(){!t.Enabled||(this._startMonitoringTime=X.Now)},t.prototype.endMonitoring=function(e){if(e===void 0&&(e=!0),!!t.Enabled){e&&this.fetchNewFrame();var r=X.Now;this._current=r-this._startMonitoringTime,e&&this._fetchResult()}},t.prototype._fetchResult=function(){this._totalAccumulated+=this._current,this._lastSecAccumulated+=this._current,this._min=Math.min(this._min,this._current),this._max=Math.max(this._max,this._current),this._average=this._totalAccumulated/this._totalValueCount;var e=X.Now;e-this._lastSecTime>1e3&&(this._lastSecAverage=this._lastSecAccumulated/this._lastSecValueCount,this._lastSecTime=e,this._lastSecAccumulated=0,this._lastSecValueCount=0)},t.Enabled=!0,t}(),ji=function(){function t(){}return Object.defineProperty(t,"UniqueId",{get:function(){var e=this._UniqueIdCounter;return this._UniqueIdCounter++,e},enumerable:!1,configurable:!0}),t._UniqueIdCounter=1,t}(),Ni=function(){function t(e,r){t.IsAvailable&&(this._observer=new window.ComputePressureObserver(e,r))}return Object.defineProperty(t,"IsAvailable",{get:function(){return re()&&"ComputePressureObserver"in window},enumerable:!1,configurable:!0}),t.prototype.observe=function(){var e,r;!((e=this._observer)===null||e===void 0)&&e.observe&&((r=this._observer)===null||r===void 0||r.observe().catch(function(){}))},t.prototype.unobserve=function(){var e,r;!((e=this._observer)===null||e===void 0)&&e.unobserve&&((r=this._observer)===null||r===void 0||r.unobserve())},t}();function Be(t,e,r){try{var n=t.next();n.done?e(n):n.value?n.value.then(function(){n.value=void 0,e(n)},r):e(n)}catch(i){r(i)}}function zi(t){t===void 0&&(t=25);var e;return function(r,n,i){var a=performance.now();e===void 0||a-e>t?(e=a,setTimeout(function(){Be(r,n,i)},0)):Be(r,n,i)}}function er(t,e,r,n,i){var a=function(){var o,s=function(u){u.done?r(u.value):o===void 0?o=!0:a()};do o=void 0,!i||!i.aborted?e(t,s,n):n(new Error("Aborted")),o===void 0&&(o=!1);while(o)};a()}function Qr(t,e){var r;return er(t,Be,function(n){return r=n},function(n){throw n},e),r}function jr(t,e,r){return new Promise(function(n,i){er(t,e,n,i,r)})}function Xi(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return Qr(t.apply(void 0,r),e)}}var Vi=function(){function t(e){e===void 0&&(e=30),this._enabled=!0,this._rollingFrameTime=new Nr(e)}return t.prototype.sampleFrame=function(e){if(e===void 0&&(e=X.Now),!!this._enabled){if(this._lastFrameTimeMs!=null){var r=e-this._lastFrameTimeMs;this._rollingFrameTime.add(r)}this._lastFrameTimeMs=e}},Object.defineProperty(t.prototype,"averageFrameTime",{get:function(){return this._rollingFrameTime.average},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"averageFrameTimeVariance",{get:function(){return this._rollingFrameTime.variance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instantaneousFrameTime",{get:function(){return this._rollingFrameTime.history(0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"averageFPS",{get:function(){return 1e3/this._rollingFrameTime.average},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instantaneousFPS",{get:function(){var e=this._rollingFrameTime.history(0);return e===0?0:1e3/e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSaturated",{get:function(){return this._rollingFrameTime.isSaturated()},enumerable:!1,configurable:!0}),t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1,this._lastFrameTimeMs=null},Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._lastFrameTimeMs=null,this._rollingFrameTime.reset()},t}(),Nr=function(){function t(e){this._samples=new Array(e),this.reset()}return t.prototype.add=function(e){var r;if(this.isSaturated()){var n=this._samples[this._pos];r=n-this.average,this.average-=r/(this._sampleCount-1),this._m2-=r*(n-this.average)}else this._sampleCount++;r=e-this.average,this.average+=r/this._sampleCount,this._m2+=r*(e-this.average),this.variance=this._m2/(this._sampleCount-1),this._samples[this._pos]=e,this._pos++,this._pos%=this._samples.length},t.prototype.history=function(e){if(e>=this._sampleCount||e>=this._samples.length)return 0;var r=this._wrapPosition(this._pos-1);return this._samples[this._wrapPosition(r-e)]},t.prototype.isSaturated=function(){return this._sampleCount>=this._samples.length},t.prototype.reset=function(){this.average=0,this.variance=0,this._sampleCount=0,this._pos=0,this._m2=0},t.prototype._wrapPosition=function(e){var r=this._samples.length;return(e%r+r)%r},t}();function tr(t,e,r){r===void 0&&(r=!1);var n=e.width,i=e.height;if(t instanceof Float32Array){for(var a=t.byteLength/t.BYTES_PER_ELEMENT,o=new Uint8Array(a);--a>=0;){var s=t[a];s<0?s=0:s>1&&(s=1),o[a]=s*255}t=o}var u=document.createElement("canvas");u.width=n,u.height=i;var f=u.getContext("2d");if(!f)return null;var c=f.createImageData(n,i),l=c.data;if(l.set(t),f.putImageData(c,0,0),r){var h=document.createElement("canvas");h.width=n,h.height=i;var d=h.getContext("2d");return d?(d.translate(0,i),d.scale(1,-1),d.drawImage(u,0,0),h.toDataURL("image/png")):null}return u.toDataURL("image/png")}function Yi(t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var n=t.getInternalTexture();if(!n)return null;var i=t._readPixelsSync(e,r);return i?tr(i,t.getSize(),n.invertY):null}function qi(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),Kt(this,void 0,void 0,function(){var n,i;return Gt(this,function(a){switch(a.label){case 0:return n=t.getInternalTexture(),n?[4,t.readPixels(e,r)]:[2,null];case 1:return i=a.sent(),i?[2,tr(i,t.getSize(),n.invertY)]:[2,null]}})})}var Ji=function(){function t(){}return t._RemoveAndStorePivotPoint=function(e){e&&t._PivotCached===0&&(e.getPivotPointToRef(t._OldPivotPoint),t._PivotPostMultiplyPivotMatrix=e._postMultiplyPivotMatrix,t._OldPivotPoint.equalsToFloats(0,0,0)||(e.setPivotMatrix(Te.IdentityReadOnly),t._OldPivotPoint.subtractToRef(e.getPivotPoint(),t._PivotTranslation),t._PivotTmpVector.copyFromFloats(1,1,1),t._PivotTmpVector.subtractInPlace(e.scaling),t._PivotTmpVector.multiplyInPlace(t._PivotTranslation),e.position.addInPlace(t._PivotTmpVector))),t._PivotCached++},t._RestorePivotPoint=function(e){e&&!t._OldPivotPoint.equalsToFloats(0,0,0)&&t._PivotCached===1&&(e.setPivotPoint(t._OldPivotPoint),e._postMultiplyPivotMatrix=t._PivotPostMultiplyPivotMatrix,t._PivotTmpVector.copyFromFloats(1,1,1),t._PivotTmpVector.subtractInPlace(e.scaling),t._PivotTmpVector.multiplyInPlace(t._PivotTranslation),e.position.subtractInPlace(t._PivotTmpVector)),this._PivotCached--},t._PivotCached=0,t._OldPivotPoint=new C,t._PivotTranslation=new C,t._PivotTmpVector=new C,t._PivotPostMultiplyPivotMatrix=!1,t}(),O;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(O||(O={}));var Wi=function(){function t(e,r){var n=this,i=se(se({},t._GetDefaultOptions()),r);if(e?this._leftJoystick=!0:this._leftJoystick=!1,t._GlobalJoystickIndex++,this._axisTargetedByLeftAndRight=O.X,this._axisTargetedByUpAndDown=O.Y,this.reverseLeftRight=!1,this.reverseUpDown=!1,this._touches=new Hr,this.deltaPosition=C.Zero(),this._joystickSensibility=25,this._inversedSensibility=1/(this._joystickSensibility/1e3),this._onResize=function(){t._VJCanvasWidth=window.innerWidth,t._VJCanvasHeight=window.innerHeight,t.Canvas&&(t.Canvas.width=t._VJCanvasWidth,t.Canvas.height=t._VJCanvasHeight),t._HalfWidth=t._VJCanvasWidth/2},!t.Canvas){window.addEventListener("resize",this._onResize,!1),t.Canvas=document.createElement("canvas"),t._VJCanvasWidth=window.innerWidth,t._VJCanvasHeight=window.innerHeight,t.Canvas.width=window.innerWidth,t.Canvas.height=window.innerHeight,t.Canvas.style.width="100%",t.Canvas.style.height="100%",t.Canvas.style.position="absolute",t.Canvas.style.backgroundColor="transparent",t.Canvas.style.top="0px",t.Canvas.style.left="0px",t.Canvas.style.zIndex="5",t.Canvas.style.msTouchAction="none",t.Canvas.style.touchAction="none",t.Canvas.setAttribute("touch-action","none");var a=t.Canvas.getContext("2d");if(!a)throw new Error("Unable to create canvas for virtual joystick");t._VJCanvasContext=a,t._VJCanvasContext.strokeStyle="#ffffff",t._VJCanvasContext.lineWidth=2,document.body.appendChild(t.Canvas)}t._HalfWidth=t.Canvas.width/2,this.pressed=!1,this.limitToContainer=i.limitToContainer,this._joystickColor=i.color,this.containerSize=i.containerSize,this.puckSize=i.puckSize,i.position&&this.setPosition(i.position.x,i.position.y),i.puckImage&&this.setPuckImage(i.puckImage),i.containerImage&&this.setContainerImage(i.containerImage),i.alwaysVisible&&t._AlwaysVisibleSticks++,this.alwaysVisible=i.alwaysVisible,this._joystickPointerId=-1,this._joystickPointerPos=new ae(0,0),this._joystickPreviousPointerPos=new ae(0,0),this._joystickPointerStartPos=new ae(0,0),this._deltaJoystickVector=new ae(0,0),this._onPointerDownHandlerRef=function(o){n._onPointerDown(o)},this._onPointerMoveHandlerRef=function(o){n._onPointerMove(o)},this._onPointerUpHandlerRef=function(o){n._onPointerUp(o)},t.Canvas.addEventListener("pointerdown",this._onPointerDownHandlerRef,!1),t.Canvas.addEventListener("pointermove",this._onPointerMoveHandlerRef,!1),t.Canvas.addEventListener("pointerup",this._onPointerUpHandlerRef,!1),t.Canvas.addEventListener("pointerout",this._onPointerUpHandlerRef,!1),t.Canvas.addEventListener("contextmenu",function(o){o.preventDefault()},!1),requestAnimationFrame(function(){n._drawVirtualJoystick()})}return t._GetDefaultOptions=function(){return{puckSize:40,containerSize:60,color:"cyan",puckImage:void 0,containerImage:void 0,position:void 0,alwaysVisible:!1,limitToContainer:!1}},t.prototype.setJoystickSensibility=function(e){this._joystickSensibility=e,this._inversedSensibility=1/(this._joystickSensibility/1e3)},t.prototype._onPointerDown=function(e){var r;e.preventDefault(),this._leftJoystick===!0?r=e.clientX<t._HalfWidth:r=e.clientX>t._HalfWidth,r&&this._joystickPointerId<0?(this._joystickPointerId=e.pointerId,this._joystickPosition?(this._joystickPointerStartPos=this._joystickPosition.clone(),this._joystickPointerPos=this._joystickPosition.clone(),this._joystickPreviousPointerPos=this._joystickPosition.clone(),this._onPointerMove(e)):(this._joystickPointerStartPos.x=e.clientX,this._joystickPointerStartPos.y=e.clientY,this._joystickPointerPos=this._joystickPointerStartPos.clone(),this._joystickPreviousPointerPos=this._joystickPointerStartPos.clone()),this._deltaJoystickVector.x=0,this._deltaJoystickVector.y=0,this.pressed=!0,this._touches.add(e.pointerId.toString(),e)):t._GlobalJoystickIndex<2&&this._action&&(this._action(),this._touches.add(e.pointerId.toString(),{x:e.clientX,y:e.clientY,prevX:e.clientX,prevY:e.clientY}))},t.prototype._onPointerMove=function(e){if(this._joystickPointerId==e.pointerId){if(this.limitToContainer){var r=new ae(e.clientX-this._joystickPointerStartPos.x,e.clientY-this._joystickPointerStartPos.y),n=r.length();n>this.containerSize&&r.scaleInPlace(this.containerSize/n),this._joystickPointerPos.x=this._joystickPointerStartPos.x+r.x,this._joystickPointerPos.y=this._joystickPointerStartPos.y+r.y}else this._joystickPointerPos.x=e.clientX,this._joystickPointerPos.y=e.clientY;this._deltaJoystickVector=this._joystickPointerPos.clone(),this._deltaJoystickVector=this._deltaJoystickVector.subtract(this._joystickPointerStartPos),0<t._AlwaysVisibleSticks&&(this._leftJoystick?this._joystickPointerPos.x=Math.min(t._HalfWidth,this._joystickPointerPos.x):this._joystickPointerPos.x=Math.max(t._HalfWidth,this._joystickPointerPos.x));var i=this.reverseLeftRight?-1:1,a=i*this._deltaJoystickVector.x/this._inversedSensibility;switch(this._axisTargetedByLeftAndRight){case O.X:this.deltaPosition.x=Math.min(1,Math.max(-1,a));break;case O.Y:this.deltaPosition.y=Math.min(1,Math.max(-1,a));break;case O.Z:this.deltaPosition.z=Math.min(1,Math.max(-1,a));break}var o=this.reverseUpDown?1:-1,s=o*this._deltaJoystickVector.y/this._inversedSensibility;switch(this._axisTargetedByUpAndDown){case O.X:this.deltaPosition.x=Math.min(1,Math.max(-1,s));break;case O.Y:this.deltaPosition.y=Math.min(1,Math.max(-1,s));break;case O.Z:this.deltaPosition.z=Math.min(1,Math.max(-1,s));break}}else{var u=this._touches.get(e.pointerId.toString());u&&(u.x=e.clientX,u.y=e.clientY)}},t.prototype._onPointerUp=function(e){if(this._joystickPointerId==e.pointerId)this._clearPreviousDraw(),this._joystickPointerId=-1,this.pressed=!1;else{var r=this._touches.get(e.pointerId.toString());r&&t._VJCanvasContext.clearRect(r.prevX-44,r.prevY-44,88,88)}this._deltaJoystickVector.x=0,this._deltaJoystickVector.y=0,this._touches.remove(e.pointerId.toString())},t.prototype.setJoystickColor=function(e){this._joystickColor=e},Object.defineProperty(t.prototype,"containerSize",{get:function(){return this._joystickContainerSize},set:function(e){this._joystickContainerSize=e,this._clearContainerSize=~~(this._joystickContainerSize*2.1),this._clearContainerSizeOffset=~~(this._clearContainerSize/2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"puckSize",{get:function(){return this._joystickPuckSize},set:function(e){this._joystickPuckSize=e,this._clearPuckSize=~~(this._joystickPuckSize*2.1),this._clearPuckSizeOffset=~~(this._clearPuckSize/2)},enumerable:!1,configurable:!0}),t.prototype.clearPosition=function(){this.alwaysVisible=!1,this._joystickPosition=null},Object.defineProperty(t.prototype,"alwaysVisible",{get:function(){return this._alwaysVisible},set:function(e){this._alwaysVisible!==e&&(e&&this._joystickPosition?(t._AlwaysVisibleSticks++,this._alwaysVisible=!0):(t._AlwaysVisibleSticks--,this._alwaysVisible=!1))},enumerable:!1,configurable:!0}),t.prototype.setPosition=function(e,r){this._joystickPointerStartPos&&this._clearPreviousDraw(),this._joystickPosition=new ae(e,r)},t.prototype.setActionOnTouch=function(e){this._action=e},t.prototype.setAxisForLeftRight=function(e){switch(e){case O.X:case O.Y:case O.Z:this._axisTargetedByLeftAndRight=e;break;default:this._axisTargetedByLeftAndRight=O.X;break}},t.prototype.setAxisForUpDown=function(e){switch(e){case O.X:case O.Y:case O.Z:this._axisTargetedByUpAndDown=e;break;default:this._axisTargetedByUpAndDown=O.Y;break}},t.prototype._clearPreviousDraw=function(){var e=this._joystickPosition||this._joystickPointerStartPos;t._VJCanvasContext.clearRect(e.x-this._clearContainerSizeOffset,e.y-this._clearContainerSizeOffset,this._clearContainerSize,this._clearContainerSize),t._VJCanvasContext.clearRect(this._joystickPreviousPointerPos.x-this._clearPuckSizeOffset,this._joystickPreviousPointerPos.y-this._clearPuckSizeOffset,this._clearPuckSize,this._clearPuckSize)},t.prototype.setContainerImage=function(e){var r=this,n=new Image;n.src=e,n.onload=function(){return r._containerImage=n}},t.prototype.setPuckImage=function(e){var r=this,n=new Image;n.src=e,n.onload=function(){return r._puckImage=n}},t.prototype._drawContainer=function(){var e=this._joystickPosition||this._joystickPointerStartPos;this._clearPreviousDraw(),this._containerImage?t._VJCanvasContext.drawImage(this._containerImage,e.x-this.containerSize,e.y-this.containerSize,this.containerSize*2,this.containerSize*2):(t._VJCanvasContext.beginPath(),t._VJCanvasContext.strokeStyle=this._joystickColor,t._VJCanvasContext.lineWidth=2,t._VJCanvasContext.arc(e.x,e.y,this.containerSize,0,Math.PI*2,!0),t._VJCanvasContext.stroke(),t._VJCanvasContext.closePath(),t._VJCanvasContext.beginPath(),t._VJCanvasContext.lineWidth=6,t._VJCanvasContext.strokeStyle=this._joystickColor,t._VJCanvasContext.arc(e.x,e.y,this.puckSize,0,Math.PI*2,!0),t._VJCanvasContext.stroke(),t._VJCanvasContext.closePath())},t.prototype._drawPuck=function(){this._puckImage?t._VJCanvasContext.drawImage(this._puckImage,this._joystickPointerPos.x-this.puckSize,this._joystickPointerPos.y-this.puckSize,this.puckSize*2,this.puckSize*2):(t._VJCanvasContext.beginPath(),t._VJCanvasContext.strokeStyle=this._joystickColor,t._VJCanvasContext.lineWidth=2,t._VJCanvasContext.arc(this._joystickPointerPos.x,this._joystickPointerPos.y,this.puckSize,0,Math.PI*2,!0),t._VJCanvasContext.stroke(),t._VJCanvasContext.closePath())},t.prototype._drawVirtualJoystick=function(){var e=this;this.alwaysVisible&&this._drawContainer(),this.pressed&&this._touches.forEach(function(r,n){n.pointerId===e._joystickPointerId?(e.alwaysVisible||e._drawContainer(),e._drawPuck(),e._joystickPreviousPointerPos=e._joystickPointerPos.clone()):(t._VJCanvasContext.clearRect(n.prevX-44,n.prevY-44,88,88),t._VJCanvasContext.beginPath(),t._VJCanvasContext.fillStyle="white",t._VJCanvasContext.beginPath(),t._VJCanvasContext.strokeStyle="red",t._VJCanvasContext.lineWidth=6,t._VJCanvasContext.arc(n.x,n.y,40,0,Math.PI*2,!0),t._VJCanvasContext.stroke(),t._VJCanvasContext.closePath(),n.prevX=n.x,n.prevY=n.y)}),requestAnimationFrame(function(){e._drawVirtualJoystick()})},t.prototype.releaseCanvas=function(){t.Canvas&&(t.Canvas.removeEventListener("pointerdown",this._onPointerDownHandlerRef),t.Canvas.removeEventListener("pointermove",this._onPointerMoveHandlerRef),t.Canvas.removeEventListener("pointerup",this._onPointerUpHandlerRef),t.Canvas.removeEventListener("pointerout",this._onPointerUpHandlerRef),window.removeEventListener("resize",this._onResize),document.body.removeChild(t.Canvas),t.Canvas=null)},t._GlobalJoystickIndex=0,t._AlwaysVisibleSticks=0,t}();function zr(t,e,r,n,i,a){var o=e.getEngine();return e.isReady=!1,i=i!=null?i:e.samplingMode,n=n!=null?n:e.type,a=a!=null?a:e.format,n===-1&&(n=0),new Promise(function(s){var u=new _e("postprocess",t,null,null,1,null,i,o,!1,void 0,n,void 0,null,!1,a);u.externalTextureSamplerBinding=!0;var f=o.createRenderTargetTexture({width:e.width,height:e.height},{generateDepthBuffer:!1,generateMipMaps:!1,generateStencilBuffer:!1,samplingMode:i,type:n,format:a});u.getEffect().executeWhenCompiled(function(){u.onApply=function(c){c._bindTexture("textureSampler",e),c.setFloat2("scale",1,1)},r.postProcessManager.directRender([u],f,!0),o.restoreDefaultFramebuffer(),o._releaseTexture(e),u&&u.dispose(),f._swapAndDie(e),e.type=n,e.format=5,e.isReady=!0,s(e)})})}var ye,lt;function le(t){ye||(ye=new Float32Array(1),lt=new Int32Array(ye.buffer)),ye[0]=t;var e=lt[0],r=e>>16&32768,n=e>>12&2047,i=e>>23&255;return i<103?r:i>142?(r|=31744,r|=(i==255?0:1)&&e&8388607,r):i<113?(n|=2048,r|=(n>>114-i)+(n>>113-i&1),r):(r|=i-112<<10|n>>1,r+=n&1,r)}function J(t){var e=(t&32768)>>15,r=(t&31744)>>10,n=t&1023;return r===0?(e?-1:1)*Math.pow(2,-14)*(n/Math.pow(2,10)):r==31?n?NaN:(e?-1:1)*(1/0):(e?-1:1)*Math.pow(2,r-15)*(1+n/Math.pow(2,10))}var ht=function(){function t(){}return t.ExpandRGBDTexture=function(e){var r=e._texture;if(!(!r||!e.isRGBD)){var n=r.getEngine(),i=n.getCaps(),a=r.isReady,o=!1;i.textureHalfFloatRender&&i.textureHalfFloatLinearFiltering?(o=!0,r.type=2):i.textureFloatRender&&i.textureFloatLinearFiltering&&(o=!0,r.type=1),o&&(r.isReady=!1,r._isRGBD=!1,r.invertY=!1);var s=function(){if(o){var u=new _e("rgbdDecode","rgbdDecode",null,null,1,null,3,n,!1,void 0,r.type,void 0,null,!1);u.externalTextureSamplerBinding=!0;var f=n.createRenderTargetTexture(r.width,{generateDepthBuffer:!1,generateMipMaps:!1,generateStencilBuffer:!1,samplingMode:r.samplingMode,type:r.type,format:5});u.getEffect().executeWhenCompiled(function(){u.onApply=function(c){c._bindTexture("textureSampler",r),c.setFloat2("scale",1,1)},e.getScene().postProcessManager.directRender([u],f,!0),n.restoreDefaultFramebuffer(),n._releaseTexture(r),u&&u.dispose(),f._swapAndDie(r),r.isReady=!0})}};a?s():e.onLoadObservable.addOnce(s)}},t.EncodeTextureToRGBD=function(e,r,n){return n===void 0&&(n=0),zr("rgbdEncode",e,r,n,1,5)},t}(),he=function(){function t(e,r,n,i){this.name=e,this.worldAxisForNormal=r,this.worldAxisForFileX=n,this.worldAxisForFileY=i}return t}(),Xr=function(){function t(){}return t.ConvertCubeMapTextureToSphericalPolynomial=function(e){var r=this,n;if(!e.isCube)return null;(n=e.getScene())===null||n===void 0||n.getEngine().flushFramebuffer();var i=e.getSize().width,a=e.readPixels(0,void 0,void 0,!1),o=e.readPixels(1,void 0,void 0,!1),s,u;e.isRenderTarget?(s=e.readPixels(3,void 0,void 0,!1),u=e.readPixels(2,void 0,void 0,!1)):(s=e.readPixels(2,void 0,void 0,!1),u=e.readPixels(3,void 0,void 0,!1));var f=e.readPixels(4,void 0,void 0,!1),c=e.readPixels(5,void 0,void 0,!1),l=e.gammaSpace,h=5,d=0;return(e.textureType==1||e.textureType==2)&&(d=1),new Promise(function(v){Promise.all([o,a,s,u,f,c]).then(function(g){var p=g[0],m=g[1],A=g[2],_=g[3],w=g[4],b=g[5],E={size:i,right:m,left:p,up:A,down:_,front:w,back:b,format:h,type:d,gammaSpace:l};v(r.ConvertCubeMapToSphericalPolynomial(E))})})},t._AreaElement=function(e,r){return Math.atan2(e*r,Math.sqrt(e*e+r*r+1))},t.ConvertCubeMapToSphericalPolynomial=function(e){for(var r=new cr,n=0,i=2/e.size,a=i,o=.5*i,s=o-1,u=0;u<6;u++)for(var f=this._FileFaces[u],c=e[f.name],l=s,h=e.format===5?4:3,d=0;d<e.size;d++){for(var v=s,g=0;g<e.size;g++){var p=f.worldAxisForFileX.scale(v).add(f.worldAxisForFileY.scale(l)).add(f.worldAxisForNormal);p.normalize();var m=this._AreaElement(v-o,l-o)-this._AreaElement(v-o,l+o)-this._AreaElement(v+o,l-o)+this._AreaElement(v+o,l+o),A=c[d*e.size*h+g*h+0],_=c[d*e.size*h+g*h+1],w=c[d*e.size*h+g*h+2];isNaN(A)&&(A=0),isNaN(_)&&(_=0),isNaN(w)&&(w=0),e.type===0&&(A/=255,_/=255,w/=255),e.gammaSpace&&(A=Math.pow(B.Clamp(A),Oe),_=Math.pow(B.Clamp(_),Oe),w=Math.pow(B.Clamp(w),Oe));var b=4096;A=B.Clamp(A,0,b),_=B.Clamp(_,0,b),w=B.Clamp(w,0,b);var E=new Qt(A,_,w);r.addLight(p,E,m),n+=m,v+=i}l+=a}var P=4*Math.PI,T=6,k=P*T/6,j=k/n;return r.scaleInPlace(j),r.convertIncidentRadianceToIrradiance(),r.convertIrradianceToLambertianRadiance(),qe.FromHarmonics(r)},t._FileFaces=[new he("right",new C(1,0,0),new C(0,0,-1),new C(0,-1,0)),new he("left",new C(-1,0,0),new C(0,0,1),new C(0,-1,0)),new he("up",new C(0,1,0),new C(1,0,0),new C(0,0,1)),new he("down",new C(0,-1,0),new C(1,0,0),new C(0,0,-1)),new he("front",new C(0,0,1),new C(1,0,0),new C(0,-1,0)),new he("back",new C(0,0,-1),new C(-1,0,0),new C(0,-1,0))],t}(),rr="image/png",dt=2,vt=[134,22,135,150,246,214,150,54];function Zi(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),r=0,n=0;n<vt.length;n++)if(e.getUint8(r++)!==vt[n])return y.Error("Not a babylon environment map"),null;for(var i="",a=0;a=e.getUint8(r++);)i+=String.fromCharCode(a);var o=JSON.parse(i);return o=De(o),o.specular&&(o.specular.specularDataPosition=r,o.specular.lodGenerationScale=o.specular.lodGenerationScale||.8),o}function De(t){if(t.version>dt)throw new Error('Unsupported babylon environment map version "'.concat(t.version,'". Latest supported version is "').concat(dt,'".'));return t.version===2||(t=se(se({},t),{version:2,imageType:rr})),t}function Vr(t,e){e=De(e);var r=e.specular,n=B.Log2(e.width);if(n=Math.round(n)+1,r.mipmaps.length!==6*n)throw new Error('Unsupported specular mipmaps number "'.concat(r.mipmaps.length,'"'));for(var i=new Array(n),a=0;a<n;a++){i[a]=new Array(6);for(var o=0;o<6;o++){var s=r.mipmaps[a*6+o];i[a][o]=new Uint8Array(t.buffer,t.byteOffset+r.specularDataPosition+s.position,s.length)}}return i}function $i(t,e,r){r=De(r);var n=r.specular;if(!n)return Promise.resolve();t._lodGenerationScale=n.lodGenerationScale;var i=Vr(e,r);return Ye(t,i,r.imageType)}function gt(t,e,r,n,i,a,o,s,u,f,c){return new Promise(function(l,h){if(r){var d=e.createTexture(null,!0,!0,null,1,null,function(g){h(g)},t);n.getEffect().executeWhenCompiled(function(){n.externalTextureSamplerBinding=!0,n.onApply=function(g){g._bindTexture("textureSampler",d),g.setFloat2("scale",1,e._features.needsInvertingBitmap&&t instanceof ImageBitmap?-1:1)},e.scenes.length&&(e.scenes[0].postProcessManager.directRender([n],f,!0,a,o),e.restoreDefaultFramebuffer(),d.dispose(),URL.revokeObjectURL(i),l())})}else{if(e._uploadImageToTexture(c,t,a,o),s){var v=u[o];v&&e._uploadImageToTexture(v._texture,t,a,0)}l()}})}function Ye(t,e,r){if(r===void 0&&(r=rr),!D.IsExponentOfTwo(t.width))throw new Error("Texture size must be a power of two");var n=B.ILog2(t.width)+1,i=t.getEngine(),a=!1,o=!1,s=null,u=null,f=null,c=i.getCaps();if(t.format=5,t.type=0,t.generateMipMaps=!0,t._cachedAnisotropicFilteringLevel=null,i.updateTextureSamplingMode(3,t),c.textureLOD?i._features.supportRenderAndCopyToLodForFloatTextures?c.textureHalfFloatRender&&c.textureHalfFloatLinearFiltering?(a=!0,t.type=2):c.textureFloatRender&&c.textureFloatLinearFiltering&&(a=!0,t.type=1):a=!1:(a=!1,o=!0,f={}),a)s=new _e("rgbdDecode","rgbdDecode",null,null,1,null,3,i,!1,void 0,t.type,void 0,null,!1),t._isRGBD=!1,t.invertY=!1,u=i.createRenderTargetCubeTexture(t.width,{generateDepthBuffer:!1,generateMipMaps:!0,generateStencilBuffer:!1,samplingMode:3,type:t.type,format:5});else if(t._isRGBD=!0,t.invertY=!0,o)for(var l=3,h=t._lodGenerationScale,d=t._lodGenerationOffset,v=0;v<l;v++){var g=v/(l-1),p=1-g,m=d,A=(n-1)*h+d,_=m+(A-m)*p,w=Math.round(Math.min(Math.max(_,0),A)),b=new Je(i,Ce.Temp);b.isCube=!0,b.invertY=!0,b.generateMipMaps=!1,i.updateTextureSamplingMode(2,b);var E=new jt(null);switch(E.isCube=!0,E._texture=b,f[w]=E,v){case 0:t._lodTextureLow=E;break;case 1:t._lodTextureMid=E;break;case 2:t._lodTextureHigh=E;break}}for(var P=[],T=function(ge){for(var Le=function(x){var S=e[ge][x],N=new Blob([S],{type:r}),fe=URL.createObjectURL(N),ce=void 0;if(typeof Image=="undefined"||i._features.forceBitmapOverHTMLImageElement)ce=i.createImageBitmap(N,{premultiplyAlpha:"none"}).then(function(M){return gt(M,i,a,s,fe,x,ge,o,f,u,t)});else{var q=new Image;q.src=fe,ce=new Promise(function(M,I){q.onload=function(){gt(q,i,a,s,fe,x,ge,o,f,u,t).then(function(){return M()}).catch(function(ie){I(ie)})},q.onerror=function(ie){I(ie)}})}P.push(ce)},G=0;G<6;G++)Le(G)},v=0;v<e.length;v++)T(v);if(e.length<n){var k=void 0,j=Math.pow(2,n-1-e.length),K=j*j*4;switch(t.type){case 0:{k=new Uint8Array(K);break}case 2:{k=new Uint16Array(K);break}case 1:{k=new Float32Array(K);break}}for(var v=e.length;v<n;v++)for(var ue=0;ue<6;ue++)i._uploadArrayBufferViewToTexture(t,k,ue,v)}return Promise.all(P).then(function(){u&&(i._releaseTexture(t),u._swapAndDie(t)),s&&s.dispose(),o&&(t._lodTextureHigh&&t._lodTextureHigh._texture&&(t._lodTextureHigh._texture.isReady=!0),t._lodTextureMid&&t._lodTextureMid._texture&&(t._lodTextureMid._texture.isReady=!0),t._lodTextureLow&&t._lodTextureLow._texture&&(t._lodTextureLow._texture.isReady=!0))})}function ea(t,e){e=De(e);var r=e.irradiance;if(!!r){var n=new qe;C.FromArrayToRef(r.x,0,n.x),C.FromArrayToRef(r.y,0,n.y),C.FromArrayToRef(r.z,0,n.z),C.FromArrayToRef(r.xx,0,n.xx),C.FromArrayToRef(r.yy,0,n.yy),C.FromArrayToRef(r.zz,0,n.zz),C.FromArrayToRef(r.yz,0,n.yz),C.FromArrayToRef(r.zx,0,n.zx),C.FromArrayToRef(r.xy,0,n.xy),t._sphericalPolynomial=n}}function ta(t,e,r,n,i){var a=t.getEngine().createRawCubeTexture(null,t.width,t.format,t.type,t.generateMipMaps,t.invertY,t.samplingMode,t._compression),o=Ye(a,e).then(function(){return t});return t.onRebuildCallback=function(s){return{proxy:o,isReady:!0,isAsync:!0}},t._source=Ce.CubeRawRGBD,t._bufferViewArrayArray=e,t._lodGenerationScale=n,t._lodGenerationOffset=i,t._sphericalPolynomial=r,Ye(t,e).then(function(){return t.isReady=!0,t})}function ra(t,e,r,n){for(var i=n,a=0,o="";i<r.length;){var s=r.charAt(i);if(o)s===o?o==='"'||o==="'"?r.charAt(i-1)!=="\\"&&(o=""):o="":o==="*/"&&s==="*"&&i+1<r.length&&(r.charAt(i+1)==="/"&&(o=""),o===""&&i++);else switch(s){case t:a++;break;case e:a--;break;case'"':case"'":case"`":o=s;break;case"/":if(i+1<r.length){var u=r.charAt(i+1);u==="/"?o=`
`:u==="*"&&(o="*/")}break}if(i++,a===0)break}return a===0?i-1:-1}function na(t,e){for(;e<t.length;){var r=t[e];if(r!==" "&&r!==`
`&&r!=="\r"&&r!=="	"&&r!==`
`&&r!=="\xA0")break;e++}return e}function ia(t){var e=t.charCodeAt(0);return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||e==95}function aa(t){for(var e=0,r="",n=!1,i=[];e<t.length;){var a=t.charAt(e);if(r)a===r?r==='"'||r==="'"?(t.charAt(e-1)!=="\\"&&(r=""),i.push(a)):(r="",n=!1):r==="*/"&&a==="*"&&e+1<t.length?(t.charAt(e+1)==="/"&&(r=""),r===""&&(n=!1,e++)):n||i.push(a);else{switch(a){case'"':case"'":case"`":r=a;break;case"/":if(e+1<t.length){var o=t.charAt(e+1);o==="/"?(r=`
`,n=!0):o==="*"&&(r="*/",n=!0)}break}n||i.push(a)}e++}return i.join("")}function oa(t,e,r){for(;e>=0&&t.charAt(e)!==r;)e--;return e}function sa(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var Yr="data:image/png;base64,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",qr=0,ua=function(t){if(!t.environmentBRDFTexture){var e=t.useDelayedTextureLoading;t.useDelayedTextureLoading=!1;var r=t._blockEntityCollection;t._blockEntityCollection=!1;var n=Q.CreateFromBase64String(Yr,"EnvironmentBRDFTexture"+qr++,t,!0,!1,Q.BILINEAR_SAMPLINGMODE);t._blockEntityCollection=r;var i=t.getEngine().getLoadedTexturesCache(),a=i.indexOf(n.getInternalTexture());a!==-1&&i.splice(a,1),n.isRGBD=!0,n.wrapU=Q.CLAMP_ADDRESSMODE,n.wrapV=Q.CLAMP_ADDRESSMODE,t.environmentBRDFTexture=n,t.useDelayedTextureLoading=e,ht.ExpandRGBDTexture(n);var o=t.getEngine().onContextRestoredObservable.add(function(){n.isRGBD=!0;var s=function(){n.isReady()?ht.ExpandRGBDTexture(n):D.SetImmediate(s)};s()});t.onDisposeObservable.add(function(){t.getEngine().onContextRestoredObservable.remove(o)})}return t.environmentBRDFTexture},Jr=542327876,pt=131072,mt=512,At=4,Ct=64,_t=131072;function Fe(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}function Wr(t){return String.fromCharCode(t&255,t>>8&255,t>>16&255,t>>24&255)}var bt=Fe("DXT1"),wt=Fe("DXT3"),yt=Fe("DXT5"),ke=Fe("DX10"),Pt=113,Tt=116,Et=2,Rt=10,Zr=88,Ue=31,$r=0,en=1,Bt=2,Dt=3,xe=4,Ft=7,Me=20,Lt=21,tn=22,rn=23,nn=24,an=25,on=26,sn=28,un=32,fn=function(){function t(){}return t.GetDDSInfo=function(e){var r=new Int32Array(e.buffer,e.byteOffset,Ue),n=new Int32Array(e.buffer,e.byteOffset,Ue+4),i=1;r[Bt]&pt&&(i=Math.max(1,r[Ft]));var a=r[Lt],o=a===ke?n[un]:0,s=0;switch(a){case Pt:s=2;break;case Tt:s=1;break;case ke:if(o===Rt){s=2;break}if(o===Et){s=1;break}}return{width:r[xe],height:r[Dt],mipmapCount:i,isFourCC:(r[Me]&At)===At,isRGB:(r[Me]&Ct)===Ct,isLuminance:(r[Me]&_t)===_t,isCube:(r[sn]&mt)===mt,isCompressed:a===bt||a===wt||a===yt,dxgiFormat:o,textureType:s}},t._GetHalfFloatAsFloatRGBAArrayBuffer=function(e,r,n,i,a,o){for(var s=new Float32Array(i),u=new Uint16Array(a,n),f=0,c=0;c<r;c++)for(var l=0;l<e;l++){var h=(l+c*e)*4;s[f]=J(u[h]),s[f+1]=J(u[h+1]),s[f+2]=J(u[h+2]),t.StoreLODInAlphaChannel?s[f+3]=o:s[f+3]=J(u[h+3]),f+=4}return s},t._GetHalfFloatRGBAArrayBuffer=function(e,r,n,i,a,o){if(t.StoreLODInAlphaChannel){for(var s=new Uint16Array(i),u=new Uint16Array(a,n),f=0,c=0;c<r;c++)for(var l=0;l<e;l++){var h=(l+c*e)*4;s[f]=u[h],s[f+1]=u[h+1],s[f+2]=u[h+2],s[f+3]=le(o),f+=4}return s}return new Uint16Array(a,n,i)},t._GetFloatRGBAArrayBuffer=function(e,r,n,i,a,o){if(t.StoreLODInAlphaChannel){for(var s=new Float32Array(i),u=new Float32Array(a,n),f=0,c=0;c<r;c++)for(var l=0;l<e;l++){var h=(l+c*e)*4;s[f]=u[h],s[f+1]=u[h+1],s[f+2]=u[h+2],s[f+3]=o,f+=4}return s}return new Float32Array(a,n,i)},t._GetFloatAsHalfFloatRGBAArrayBuffer=function(e,r,n,i,a,o){for(var s=new Uint16Array(i),u=new Float32Array(a,n),f=0,c=0;c<r;c++)for(var l=0;l<e;l++)s[f]=le(u[f]),s[f+1]=le(u[f+1]),s[f+2]=le(u[f+2]),t.StoreLODInAlphaChannel?s[f+3]=le(o):s[f+3]=le(u[f+3]),f+=4;return s},t._GetFloatAsUIntRGBAArrayBuffer=function(e,r,n,i,a,o){for(var s=new Uint8Array(i),u=new Float32Array(a,n),f=0,c=0;c<r;c++)for(var l=0;l<e;l++){var h=(l+c*e)*4;s[f]=B.Clamp(u[h])*255,s[f+1]=B.Clamp(u[h+1])*255,s[f+2]=B.Clamp(u[h+2])*255,t.StoreLODInAlphaChannel?s[f+3]=o:s[f+3]=B.Clamp(u[h+3])*255,f+=4}return s},t._GetHalfFloatAsUIntRGBAArrayBuffer=function(e,r,n,i,a,o){for(var s=new Uint8Array(i),u=new Uint16Array(a,n),f=0,c=0;c<r;c++)for(var l=0;l<e;l++){var h=(l+c*e)*4;s[f]=B.Clamp(J(u[h]))*255,s[f+1]=B.Clamp(J(u[h+1]))*255,s[f+2]=B.Clamp(J(u[h+2]))*255,t.StoreLODInAlphaChannel?s[f+3]=o:s[f+3]=B.Clamp(J(u[h+3]))*255,f+=4}return s},t._GetRGBAArrayBuffer=function(e,r,n,i,a,o,s,u,f){for(var c=new Uint8Array(i),l=new Uint8Array(a,n),h=0,d=0;d<r;d++)for(var v=0;v<e;v++){var g=(v+d*e)*4;c[h]=l[g+o],c[h+1]=l[g+s],c[h+2]=l[g+u],c[h+3]=l[g+f],h+=4}return c},t._ExtractLongWordOrder=function(e){return e===0||e===255||e===-16777216?0:1+t._ExtractLongWordOrder(e>>8)},t._GetRGBArrayBuffer=function(e,r,n,i,a,o,s,u){for(var f=new Uint8Array(i),c=new Uint8Array(a,n),l=0,h=0;h<r;h++)for(var d=0;d<e;d++){var v=(d+h*e)*3;f[l]=c[v+o],f[l+1]=c[v+s],f[l+2]=c[v+u],l+=3}return f},t._GetLuminanceArrayBuffer=function(e,r,n,i,a){for(var o=new Uint8Array(i),s=new Uint8Array(a,n),u=0,f=0;f<r;f++)for(var c=0;c<e;c++){var l=c+f*e;o[u]=s[l],u++}return o},t.UploadDDSLevels=function(e,r,n,i,a,o,s,u,f){s===void 0&&(s=-1),f===void 0&&(f=!0);var c=null;i.sphericalPolynomial&&(c=new Array);var l=!!e.getCaps().s3tc;r.generateMipMaps=a;var h=new Int32Array(n.buffer,n.byteOffset,Ue),d,v,g,p=0,m,A,_,w,b=0,E=1;if(h[$r]!==Jr){y.Error("Invalid magic number in DDS header");return}if(!i.isFourCC&&!i.isRGB&&!i.isLuminance){y.Error("Unsupported format, must contain a FourCC, RGB or LUMINANCE code");return}if(i.isCompressed&&!l){y.Error("Compressed textures are not supported on this platform.");return}var P=h[tn];m=h[en]+4;var T=!1;if(i.isFourCC)switch(d=h[Lt],d){case bt:E=8,b=33777;break;case wt:E=16,b=33778;break;case yt:E=16,b=33779;break;case Pt:T=!0,P=64;break;case Tt:T=!0,P=128;break;case ke:{m+=5*4;var k=!1;switch(i.dxgiFormat){case Rt:T=!0,P=64,k=!0;break;case Et:T=!0,P=128,k=!0;break;case Zr:i.isRGB=!0,i.isFourCC=!1,P=32,k=!0;break}if(k)break}default:console.error("Unsupported FourCC code:",Wr(d));return}var j=t._ExtractLongWordOrder(h[rn]),K=t._ExtractLongWordOrder(h[nn]),ue=t._ExtractLongWordOrder(h[an]),ge=t._ExtractLongWordOrder(h[on]);T&&(b=e._getRGBABufferInternalSizedFormat(i.textureType)),_=1,h[Bt]&pt&&a!==!1&&(_=Math.max(1,h[Ft]));for(var Le=u||0,G=e.getCaps(),x=Le;x<o;x++){for(v=h[xe],g=h[Dt],w=0;w<_;++w){if(s===-1||s===w){var S=s===-1?w:0;if(!i.isCompressed&&i.isFourCC){r.format=5,p=v*g*4;var N=null;if(e._badOS||e._badDesktopOS||!G.textureHalfFloat&&!G.textureFloat)P===128?(N=t._GetFloatAsUIntRGBAArrayBuffer(v,g,n.byteOffset+m,p,n.buffer,S),c&&S==0&&c.push(t._GetFloatRGBAArrayBuffer(v,g,n.byteOffset+m,p,n.buffer,S))):P===64&&(N=t._GetHalfFloatAsUIntRGBAArrayBuffer(v,g,n.byteOffset+m,p,n.buffer,S),c&&S==0&&c.push(t._GetHalfFloatAsFloatRGBAArrayBuffer(v,g,n.byteOffset+m,p,n.buffer,S))),r.type=0;else{var fe=G.textureFloat&&(f&&G.textureFloatLinearFiltering||!f),ce=G.textureHalfFloat&&(f&&G.textureHalfFloatLinearFiltering||!f),q=(P===128||P===64&&!ce)&&fe?1:(P===64||P===128&&!fe)&&ce?2:0,M=void 0,I=null;switch(P){case 128:{switch(q){case 1:M=t._GetFloatRGBAArrayBuffer,I=null;break;case 2:M=t._GetFloatAsHalfFloatRGBAArrayBuffer,I=t._GetFloatRGBAArrayBuffer;break;case 0:M=t._GetFloatAsUIntRGBAArrayBuffer,I=t._GetFloatRGBAArrayBuffer;break}break}default:{switch(q){case 1:M=t._GetHalfFloatAsFloatRGBAArrayBuffer,I=null;break;case 2:M=t._GetHalfFloatRGBAArrayBuffer,I=t._GetHalfFloatAsFloatRGBAArrayBuffer;break;case 0:M=t._GetHalfFloatAsUIntRGBAArrayBuffer,I=t._GetHalfFloatAsFloatRGBAArrayBuffer;break}break}}r.type=q,N=M(v,g,n.byteOffset+m,p,n.buffer,S),c&&S==0&&c.push(I?I(v,g,n.byteOffset+m,p,n.buffer,S):N)}N&&e._uploadDataToTextureDirectly(r,N,x,S)}else if(i.isRGB)r.type=0,P===24?(r.format=4,p=v*g*3,A=t._GetRGBArrayBuffer(v,g,n.byteOffset+m,p,n.buffer,j,K,ue),e._uploadDataToTextureDirectly(r,A,x,S)):(r.format=5,p=v*g*4,A=t._GetRGBAArrayBuffer(v,g,n.byteOffset+m,p,n.buffer,j,K,ue,ge),e._uploadDataToTextureDirectly(r,A,x,S));else if(i.isLuminance){var ie=e._getUnpackAlignement(),or=v,sr=Math.floor((v+ie-1)/ie)*ie;p=sr*(g-1)+or,A=t._GetLuminanceArrayBuffer(v,g,n.byteOffset+m,p,n.buffer),r.format=1,r.type=0,e._uploadDataToTextureDirectly(r,A,x,S)}else p=Math.max(4,v)/4*Math.max(4,g)/4*E,A=new Uint8Array(n.buffer,n.byteOffset+m,p),r.type=0,e._uploadCompressedDataToTextureDirectly(r,b,v,g,A,x,S)}m+=P?v*g*(P/8):p,v*=.5,g*=.5,v=Math.max(1,v),g=Math.max(1,g)}if(u!==void 0)break}c&&c.length>0?i.sphericalPolynomial=Xr.ConvertCubeMapToSphericalPolynomial({size:h[xe],right:c[0],left:c[1],up:c[2],down:c[3],front:c[4],back:c[5],format:5,type:1,gammaSpace:!1}):i.sphericalPolynomial=void 0},t.StoreLODInAlphaChannel=!1,t}();Xe.prototype.createPrefilteredCubeTexture=function(t,e,r,n,i,a,o,s,u){var f=this;i===void 0&&(i=null),a===void 0&&(a=null),s===void 0&&(s=null),u===void 0&&(u=!0);var c=function(l){if(!l){i&&i(null);return}var h=l.texture;if(u?l.info.sphericalPolynomial&&(h._sphericalPolynomial=l.info.sphericalPolynomial):h._sphericalPolynomial=new qe,h._source=Ce.CubePrefiltered,f.getCaps().textureLOD){i&&i(h);return}var d=3,v=f._gl,g=l.width;if(!!g){for(var p=[],m=0;m<d;m++){var A=m/(d-1),_=1-A,w=n,b=B.Log2(g)*r+n,E=w+(b-w)*_,P=Math.round(Math.min(Math.max(E,0),b)),T=new Je(f,Ce.Temp);if(T.type=h.type,T.format=h.format,T.width=Math.pow(2,Math.max(B.Log2(g)-P,0)),T.height=T.width,T.isCube=!0,T._cachedWrapU=0,T._cachedWrapV=0,f._bindTextureDirectly(v.TEXTURE_CUBE_MAP,T,!0),T.samplingMode=2,v.texParameteri(v.TEXTURE_CUBE_MAP,v.TEXTURE_MAG_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_CUBE_MAP,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_CUBE_MAP,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_CUBE_MAP,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),l.isDDS){var k=l.info,j=l.data;f._unpackFlipY(k.isCompressed),fn.UploadDDSLevels(f,T,j,k,!0,6,P)}else y.Warn("DDS is the only prefiltered cube map supported so far.");f._bindTextureDirectly(v.TEXTURE_CUBE_MAP,null);var K=new jt(e);K.isCube=!0,K._texture=T,T.isReady=!0,p.push(K)}h._lodTextureHigh=p[2],h._lodTextureMid=p[1],h._lodTextureLow=p[0],i&&i(h)}};return this.createCubeTexture(t,e,null,!1,c,a,o,s,u,r,n)};var fa=function(){function t(e,r){if(this.data=e,this.isInvalid=!1,!t.IsValid(e)){this.isInvalid=!0,y.Error("texture missing KTX identifier");return}var n=Uint32Array.BYTES_PER_ELEMENT,i=new DataView(this.data.buffer,this.data.byteOffset+12,13*n),a=i.getUint32(0,!0),o=a===67305985;if(this.glType=i.getUint32(1*n,o),this.glTypeSize=i.getUint32(2*n,o),this.glFormat=i.getUint32(3*n,o),this.glInternalFormat=i.getUint32(4*n,o),this.glBaseInternalFormat=i.getUint32(5*n,o),this.pixelWidth=i.getUint32(6*n,o),this.pixelHeight=i.getUint32(7*n,o),this.pixelDepth=i.getUint32(8*n,o),this.numberOfArrayElements=i.getUint32(9*n,o),this.numberOfFaces=i.getUint32(10*n,o),this.numberOfMipmapLevels=i.getUint32(11*n,o),this.bytesOfKeyValueData=i.getUint32(12*n,o),this.glType!==0){y.Error("only compressed formats currently supported");return}else this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels);if(this.pixelHeight===0||this.pixelDepth!==0){y.Error("only 2D textures currently supported");return}if(this.numberOfArrayElements!==0){y.Error("texture arrays not currently supported");return}if(this.numberOfFaces!==r){y.Error("number of faces expected"+r+", but found "+this.numberOfFaces);return}this.loadType=t.COMPRESSED_2D}return t.prototype.uploadLevels=function(e,r){switch(this.loadType){case t.COMPRESSED_2D:this._upload2DCompressedLevels(e,r);break;case t.TEX_2D:case t.COMPRESSED_3D:case t.TEX_3D:}},t.prototype._upload2DCompressedLevels=function(e,r){for(var n=t.HEADER_LEN+this.bytesOfKeyValueData,i=this.pixelWidth,a=this.pixelHeight,o=r?this.numberOfMipmapLevels:1,s=0;s<o;s++){var u=new Int32Array(this.data.buffer,this.data.byteOffset+n,1)[0];n+=4;for(var f=0;f<this.numberOfFaces;f++){var c=new Uint8Array(this.data.buffer,this.data.byteOffset+n,u),l=e.getEngine();l._uploadCompressedDataToTextureDirectly(e,e.format,i,a,c,f,s),n+=u,n+=3-(u+3)%4}i=Math.max(1,i*.5),a=Math.max(1,a*.5)}},t.IsValid=function(e){if(e.byteLength>=12){var r=new Uint8Array(e.buffer,e.byteOffset,12);if(r[0]===171&&r[1]===75&&r[2]===84&&r[3]===88&&r[4]===32&&r[5]===49&&r[6]===49&&r[7]===187&&r[8]===13&&r[9]===10&&r[10]===26&&r[11]===10)return!0}return!1},t.HEADER_LEN=12+13*4,t.COMPRESSED_2D=0,t.COMPRESSED_3D=1,t.TEX_2D=2,t.TEX_3D=3,t}(),cn=function(){function t(e){this._pendingActions=new Array,this._workerInfos=e.map(function(r){return{workerPromise:Promise.resolve(r),idle:!0}})}return t.prototype.dispose=function(){for(var e=0,r=this._workerInfos;e<r.length;e++){var n=r[e];n.workerPromise.then(function(i){i.terminate()})}this._workerInfos.length=0,this._pendingActions.length=0},t.prototype.push=function(e){this._executeOnIdleWorker(e)||this._pendingActions.push(e)},t.prototype._executeOnIdleWorker=function(e){for(var r=0,n=this._workerInfos;r<n.length;r++){var i=n[r];if(i.idle)return this._execute(i,e),!0}return!1},t.prototype._execute=function(e,r){var n=this;e.idle=!1,e.workerPromise.then(function(i){r(i,function(){var a=n._pendingActions.shift();a?n._execute(e,a):e.idle=!0})})},t}(),ln=function(t){R(e,t);function e(r,n,i){i===void 0&&(i=e.DefaultOptions);var a=t.call(this,[])||this;return a._maxWorkers=r,a._createWorkerAsync=n,a._options=i,a}return e.prototype.push=function(r){if(!this._executeOnIdleWorker(r))if(this._workerInfos.length<this._maxWorkers){var n={workerPromise:this._createWorkerAsync(),idle:!1};this._workerInfos.push(n),this._execute(n,r)}else this._pendingActions.push(r)},e.prototype._execute=function(r,n){var i=this;r.timeoutId&&(clearTimeout(r.timeoutId),delete r.timeoutId),t.prototype._execute.call(this,r,function(a,o){n(a,function(){o(),r.idle&&(r.timeoutId=setTimeout(function(){r.workerPromise.then(function(u){u.terminate()});var s=i._workerInfos.indexOf(r);s!==-1&&i._workerInfos.splice(s,1)},i._options.idleTimeElapsedBeforeRelease))})})},e.DefaultOptions={idleTimeElapsedBeforeRelease:1e3},e}(cn),ca=function(){function t(e,r){r===void 0&&(r=t.DefaultNumWorkers),this._engine=e,t._Initialize(r)}return t.GetDefaultNumWorkers=function(){return typeof navigator!="object"||!navigator.hardwareConcurrency?1:Math.min(Math.floor(navigator.hardwareConcurrency*.5),4)},t._Initialize=function(e){t._WorkerPoolPromise||t._DecoderModulePromise||(e&&typeof Worker=="function"&&typeof URL!="undefined"?t._WorkerPoolPromise=new Promise(function(r){var n="(".concat(hn,")()"),i=URL.createObjectURL(new Blob([n],{type:"application/javascript"}));r(new ln(e,function(){return new Promise(function(a,o){var s=new Worker(i),u=function(c){s.removeEventListener("error",u),s.removeEventListener("message",f),o(c)},f=function(c){c.data.action==="init"&&(s.removeEventListener("error",u),s.removeEventListener("message",f),a(s))};s.addEventListener("error",u),s.addEventListener("message",f),s.postMessage({action:"init",urls:t.URLConfig})})}))}):typeof KTX2DECODER=="undefined"?t._DecoderModulePromise=D.LoadScriptAsync(t.URLConfig.jsDecoderModule).then(function(){KTX2DECODER.MSCTranscoder.UseFromWorkerThread=!1,KTX2DECODER.WASMMemoryManager.LoadBinariesFromCurrentThread=!0;var r=t.URLConfig;return r.wasmUASTCToASTC!==null&&(KTX2DECODER.LiteTranscoder_UASTC_ASTC.WasmModuleURL=r.wasmUASTCToASTC),r.wasmUASTCToBC7!==null&&(KTX2DECODER.LiteTranscoder_UASTC_BC7.WasmModuleURL=r.wasmUASTCToBC7),r.wasmUASTCToRGBA_UNORM!==null&&(KTX2DECODER.LiteTranscoder_UASTC_RGBA_UNORM.WasmModuleURL=r.wasmUASTCToRGBA_UNORM),r.wasmUASTCToRGBA_SRGB!==null&&(KTX2DECODER.LiteTranscoder_UASTC_RGBA_SRGB.WasmModuleURL=r.wasmUASTCToRGBA_SRGB),r.jsMSCTranscoder!==null&&(KTX2DECODER.MSCTranscoder.JSModuleURL=r.jsMSCTranscoder),r.wasmMSCTranscoder!==null&&(KTX2DECODER.MSCTranscoder.WasmModuleURL=r.wasmMSCTranscoder),r.wasmZSTDDecoder!==null&&(KTX2DECODER.ZSTDDecoder.WasmModuleURL=r.wasmZSTDDecoder),new KTX2DECODER.KTX2Decoder}):(KTX2DECODER.MSCTranscoder.UseFromWorkerThread=!1,KTX2DECODER.WASMMemoryManager.LoadBinariesFromCurrentThread=!0,t._DecoderModulePromise=Promise.resolve(new KTX2DECODER.KTX2Decoder)))},t.prototype.uploadAsync=function(e,r,n){var i=this,a=this._engine.getCaps(),o={astc:!!a.astc,bptc:!!a.bptc,s3tc:!!a.s3tc,pvrtc:!!a.pvrtc,etc2:!!a.etc2,etc1:!!a.etc1};if(t._WorkerPoolPromise)return t._WorkerPoolPromise.then(function(s){return new Promise(function(u,f){s.push(function(c,l){var h=function(g){c.removeEventListener("error",h),c.removeEventListener("message",d),f(g),l()},d=function(g){if(g.data.action==="decoded"){if(c.removeEventListener("error",h),c.removeEventListener("message",d),!g.data.success)f({message:g.data.msg});else try{i._createTexture(g.data.decodedData,r,n),u()}catch(p){f({message:p})}l()}};c.addEventListener("error",h),c.addEventListener("message",d);var v=new Uint8Array(e.byteLength);v.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),c.postMessage({action:"decode",data:v,caps:o,options:n},[v.buffer])})})});if(t._DecoderModulePromise)return t._DecoderModulePromise.then(function(s){return new Promise(function(u,f){s.decode(e,a).then(function(c){i._createTexture(c,r),u()}).catch(function(c){f({message:c})})})});throw new Error("KTX2 decoder module is not available")},t.prototype._createTexture=function(e,r,n){var i=3553;if(this._engine._bindTextureDirectly(i,r),n&&(n.transcodedFormat=e.transcodedFormat,n.isInGammaSpace=e.isInGammaSpace,n.hasAlpha=e.hasAlpha,n.transcoderName=e.transcoderName),e.transcodedFormat===32856?(r.type=0,r.format=5):r.format=e.transcodedFormat,r._gammaSpace=e.isInGammaSpace,r.generateMipMaps=e.mipmaps.length>1,e.errors)throw new Error("KTX2 container - could not transcode the data. "+e.errors);for(var a=0;a<e.mipmaps.length;++a){var o=e.mipmaps[a];if(!o||!o.data)throw new Error("KTX2 container - could not transcode one of the image");e.transcodedFormat===32856?(r.width=o.width,r.height=o.height,this._engine._uploadDataToTextureDirectly(r,o.data,0,a,void 0,!0)):this._engine._uploadCompressedDataToTextureDirectly(r,e.transcodedFormat,o.width,o.height,o.data,0,a)}r._extension=".ktx2",r.width=e.mipmaps[0].width,r.height=e.mipmaps[0].height,r.isReady=!0,this._engine._bindTextureDirectly(i,null)},t.IsValid=function(e){if(e.byteLength>=12){var r=new Uint8Array(e.buffer,e.byteOffset,12);if(r[0]===171&&r[1]===75&&r[2]===84&&r[3]===88&&r[4]===32&&r[5]===50&&r[6]===48&&r[7]===187&&r[8]===13&&r[9]===10&&r[10]===26&&r[11]===10)return!0}return!1},t.URLConfig={jsDecoderModule:"https://preview.babylonjs.com/babylon.ktx2Decoder.js",wasmUASTCToASTC:null,wasmUASTCToBC7:null,wasmUASTCToRGBA_UNORM:null,wasmUASTCToRGBA_SRGB:null,jsMSCTranscoder:null,wasmMSCTranscoder:null,wasmZSTDDecoder:null},t.DefaultNumWorkers=t.GetDefaultNumWorkers(),t}();function hn(){var t;onmessage=function(e){if(!!e.data)switch(e.data.action){case"init":{var r=e.data.urls;importScripts(r.jsDecoderModule),r.wasmUASTCToASTC!==null&&(KTX2DECODER.LiteTranscoder_UASTC_ASTC.WasmModuleURL=r.wasmUASTCToASTC),r.wasmUASTCToBC7!==null&&(KTX2DECODER.LiteTranscoder_UASTC_BC7.WasmModuleURL=r.wasmUASTCToBC7),r.wasmUASTCToRGBA_UNORM!==null&&(KTX2DECODER.LiteTranscoder_UASTC_RGBA_UNORM.WasmModuleURL=r.wasmUASTCToRGBA_UNORM),r.wasmUASTCToRGBA_SRGB!==null&&(KTX2DECODER.LiteTranscoder_UASTC_RGBA_SRGB.WasmModuleURL=r.wasmUASTCToRGBA_SRGB),r.jsMSCTranscoder!==null&&(KTX2DECODER.MSCTranscoder.JSModuleURL=r.jsMSCTranscoder),r.wasmMSCTranscoder!==null&&(KTX2DECODER.MSCTranscoder.WasmModuleURL=r.wasmMSCTranscoder),r.wasmZSTDDecoder!==null&&(KTX2DECODER.ZSTDDecoder.WasmModuleURL=r.wasmZSTDDecoder),t=new KTX2DECODER.KTX2Decoder,postMessage({action:"init"});break}case"decode":t.decode(e.data.data,e.data.caps,e.data.options).then(function(n){for(var i=[],a=0;a<n.mipmaps.length;++a){var o=n.mipmaps[a];o&&o.data&&i.push(o.data.buffer)}postMessage({action:"decoded",success:!0,decodedData:n},i)}).catch(function(n){postMessage({action:"decoded",success:!1,msg:n})});break}}}var oe;(function(t){t[t.INIT=0]="INIT",t[t.STARTED=1]="STARTED",t[t.ENDED=2]="ENDED"})(oe||(oe={}));function la(t){var e,r=0,n=Date.now();t.observableParameters=(e=t.observableParameters)!==null&&e!==void 0?e:{};var i=t.contextObservable.add(function(a){var o=Date.now();r=o-n;var s={startTime:n,currentTime:o,deltaTime:r,completeRate:r/t.timeout,payload:a};t.onTick&&t.onTick(s),t.breakCondition&&t.breakCondition()&&(t.contextObservable.remove(i),t.onAborted&&t.onAborted(s)),r>=t.timeout&&(t.contextObservable.remove(i),t.onEnded&&t.onEnded(s))},t.observableParameters.mask,t.observableParameters.insertFirst,t.observableParameters.scope);return i}(function(){function t(e){var r=this,n,i;this.onEachCountObservable=new F,this.onTimerAbortedObservable=new F,this.onTimerEndedObservable=new F,this.onStateChangedObservable=new F,this._observer=null,this._breakOnNextTick=!1,this._tick=function(a){var o=Date.now();r._timer=o-r._startTime;var s={startTime:r._startTime,currentTime:o,deltaTime:r._timer,completeRate:r._timer/r._timeToEnd,payload:a},u=r._breakOnNextTick||r._breakCondition(s);u||r._timer>=r._timeToEnd?r._stop(s,u):r.onEachCountObservable.notifyObservers(s)},this._setState(oe.INIT),this._contextObservable=e.contextObservable,this._observableParameters=(n=e.observableParameters)!==null&&n!==void 0?n:{},this._breakCondition=(i=e.breakCondition)!==null&&i!==void 0?i:function(){return!1},this._timeToEnd=e.timeout,e.onEnded&&this.onTimerEndedObservable.add(e.onEnded),e.onTick&&this.onEachCountObservable.add(e.onTick),e.onAborted&&this.onTimerAbortedObservable.add(e.onAborted)}return Object.defineProperty(t.prototype,"breakCondition",{set:function(e){this._breakCondition=e},enumerable:!1,configurable:!0}),t.prototype.clearObservables=function(){this.onEachCountObservable.clear(),this.onTimerAbortedObservable.clear(),this.onTimerEndedObservable.clear(),this.onStateChangedObservable.clear()},t.prototype.start=function(e){if(e===void 0&&(e=this._timeToEnd),this._state===oe.STARTED)throw new Error("Timer already started. Please stop it before starting again");this._timeToEnd=e,this._startTime=Date.now(),this._timer=0,this._observer=this._contextObservable.add(this._tick,this._observableParameters.mask,this._observableParameters.insertFirst,this._observableParameters.scope),this._setState(oe.STARTED)},t.prototype.stop=function(){this._state===oe.STARTED&&(this._breakOnNextTick=!0)},t.prototype.dispose=function(){this._observer&&this._contextObservable.remove(this._observer),this.clearObservables()},t.prototype._setState=function(e){this._state=e,this.onStateChangedObservable.notifyObservers(this._state)},t.prototype._stop=function(e,r){r===void 0&&(r=!1),this._contextObservable.remove(this._observer),this._setState(oe.ENDED),r?this.onTimerAbortedObservable.notifyObservers(e):this.onTimerEndedObservable.notifyObservers(e)},t})();var dn=function(){function t(e){var r=this;this.onAfterReductionPerformed=new F,this._forceFullscreenViewport=!0,this._activated=!1,this._camera=e,this._postProcessManager=new pr(e.getScene()),this._onContextRestoredObserver=e.getEngine().onContextRestoredObservable.add(function(){r._postProcessManager._rebuild()})}return Object.defineProperty(t.prototype,"sourceTexture",{get:function(){return this._sourceTexture},enumerable:!1,configurable:!0}),t.prototype.setSourceTexture=function(e,r,n,i){var a=this;if(n===void 0&&(n=2),i===void 0&&(i=!0),e!==this._sourceTexture){this.dispose(!1),this._sourceTexture=e,this._reductionSteps=[],this._forceFullscreenViewport=i;var o=this._camera.getScene(),s=new _e("Initial reduction phase","minmaxRedux",["texSize"],["sourceTexture"],1,null,1,o.getEngine(),!1,"#define INITIAL"+(r?`
#define DEPTH_REDUX`:""),n,void 0,void 0,void 0,7);s.autoClear=!1,s.forceFullscreenViewport=i;var u=this._sourceTexture.getRenderWidth(),f=this._sourceTexture.getRenderHeight();s.onApply=function(d,v){return function(g){g.setTexture("sourceTexture",a._sourceTexture),g.setFloat2("texSize",d,v)}}(u,f),this._reductionSteps.push(s);for(var c=1;u>1||f>1;){u=Math.max(Math.round(u/2),1),f=Math.max(Math.round(f/2),1);var l=new _e("Reduction phase "+c,"minmaxRedux",["texSize"],null,{width:u,height:f},null,1,o.getEngine(),!1,"#define "+(u==1&&f==1?"LAST":u==1||f==1?"ONEBEFORELAST":"MAIN"),n,void 0,void 0,void 0,7);if(l.autoClear=!1,l.forceFullscreenViewport=i,l.onApply=function(d,v){return function(g){d==1||v==1?g.setInt2("texSize",d,v):g.setFloat2("texSize",d,v)}}(u,f),this._reductionSteps.push(l),c++,u==1&&f==1){var h=function(d,v,g){var p=new Float32Array(4*d*v),m={min:0,max:0};return function(){o.getEngine()._readTexturePixels(g.inputTexture.texture,d,v,-1,0,p,!1),m.min=p[0],m.max=p[1],a.onAfterReductionPerformed.notifyObservers(m)}};l.onAfterRenderObservable.add(h(u,f,l))}}}},Object.defineProperty(t.prototype,"refreshRate",{get:function(){return this._sourceTexture?this._sourceTexture.refreshRate:-1},set:function(e){this._sourceTexture&&(this._sourceTexture.refreshRate=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activated",{get:function(){return this._activated},enumerable:!1,configurable:!0}),t.prototype.activate=function(){var e=this;this._onAfterUnbindObserver||!this._sourceTexture||(this._onAfterUnbindObserver=this._sourceTexture.onAfterUnbindObservable.add(function(){var r,n,i=e._camera.getScene().getEngine();(r=i._debugPushGroup)===null||r===void 0||r.call(i,"min max reduction",1),e._reductionSteps[0].activate(e._camera),e._postProcessManager.directRender(e._reductionSteps,e._reductionSteps[0].inputTexture,e._forceFullscreenViewport),i.unBindFramebuffer(e._reductionSteps[0].inputTexture,!1),(n=i._debugPopGroup)===null||n===void 0||n.call(i,1)}),this._activated=!0)},t.prototype.deactivate=function(){!this._onAfterUnbindObserver||!this._sourceTexture||(this._sourceTexture.onAfterUnbindObservable.remove(this._onAfterUnbindObserver),this._onAfterUnbindObserver=null,this._activated=!1)},t.prototype.dispose=function(e){if(e===void 0&&(e=!0),e&&(this.onAfterReductionPerformed.clear(),this._onContextRestoredObserver&&(this._camera.getEngine().onContextRestoredObservable.remove(this._onContextRestoredObserver),this._onContextRestoredObserver=null)),this.deactivate(),this._reductionSteps){for(var r=0;r<this._reductionSteps.length;++r)this._reductionSteps[r].dispose();this._reductionSteps=null}this._postProcessManager&&e&&this._postProcessManager.dispose(),this._sourceTexture=null},t}(),ha=function(t){R(e,t);function e(r){return t.call(this,r)||this}return Object.defineProperty(e.prototype,"depthRenderer",{get:function(){return this._depthRenderer},enumerable:!1,configurable:!0}),e.prototype.setDepthRenderer=function(r,n,i){r===void 0&&(r=null),n===void 0&&(n=2),i===void 0&&(i=!0);var a=this._camera.getScene();this._depthRenderer&&(delete a._depthRenderer[this._depthRendererId],this._depthRenderer.dispose(),this._depthRenderer=null),r===null&&(a._depthRenderer||(a._depthRenderer={}),r=this._depthRenderer=new Cr(a,n,this._camera,!1,1),r.enabled=!1,this._depthRendererId="minmax"+this._camera.id,a._depthRenderer[this._depthRendererId]=r),t.prototype.setSourceTexture.call(this,r.getDepthMap(),!0,n,i)},e.prototype.setSourceTexture=function(r,n,i,a){i===void 0&&(i=2),a===void 0&&(a=!0),t.prototype.setSourceTexture.call(this,r,n,i,a)},e.prototype.activate=function(){this._depthRenderer&&(this._depthRenderer.enabled=!0),t.prototype.activate.call(this)},e.prototype.deactivate=function(){t.prototype.deactivate.call(this),this._depthRenderer&&(this._depthRenderer.enabled=!1)},e.prototype.dispose=function(r){if(r===void 0&&(r=!0),t.prototype.dispose.call(this,r),this._depthRenderer&&r){var n=this._depthRenderer.getDepthMap().getScene();n&&delete n._depthRenderer[this._depthRendererId],this._depthRenderer.dispose(),this._depthRenderer=null}},e}(dn),vn=function(){function t(){}return t.ConvertPanoramaToCubemap=function(e,r,n,i){if(!e)throw"ConvertPanoramaToCubemap: input cannot be null";if(e.length!=r*n*3)throw"ConvertPanoramaToCubemap: input size is wrong";var a=this.CreateCubemapTexture(i,this.FACE_FRONT,e,r,n),o=this.CreateCubemapTexture(i,this.FACE_BACK,e,r,n),s=this.CreateCubemapTexture(i,this.FACE_LEFT,e,r,n),u=this.CreateCubemapTexture(i,this.FACE_RIGHT,e,r,n),f=this.CreateCubemapTexture(i,this.FACE_UP,e,r,n),c=this.CreateCubemapTexture(i,this.FACE_DOWN,e,r,n);return{front:a,back:o,left:s,right:u,up:f,down:c,size:i,type:1,format:4,gammaSpace:!1}},t.CreateCubemapTexture=function(e,r,n,i,a){for(var o=new ArrayBuffer(e*e*4*3),s=new Float32Array(o),u=r[1].subtract(r[0]).scale(1/e),f=r[3].subtract(r[2]).scale(1/e),c=1/e,l=0,h=0;h<e;h++){for(var d=r[0],v=r[2],g=0;g<e;g++){var p=v.subtract(d).scale(l).add(d);p.normalize();var m=this.CalcProjectionSpherical(p,n,i,a);s[h*e*3+g*3+0]=m.r,s[h*e*3+g*3+1]=m.g,s[h*e*3+g*3+2]=m.b,d=d.add(u),v=v.add(f)}l+=c}return s},t.CalcProjectionSpherical=function(e,r,n,i){for(var a=Math.atan2(e.z,e.x),o=Math.acos(e.y);a<-Math.PI;)a+=2*Math.PI;for(;a>Math.PI;)a-=2*Math.PI;var s=a/Math.PI,u=o/Math.PI;s=s*.5+.5;var f=Math.round(s*n);f<0?f=0:f>=n&&(f=n-1);var c=Math.round(u*i);c<0?c=0:c>=i&&(c=i-1);var l=i-c-1,h=r[l*n*3+f*3+0],d=r[l*n*3+f*3+1],v=r[l*n*3+f*3+2];return{r:h,g:d,b:v}},t.FACE_LEFT=[new C(-1,-1,-1),new C(1,-1,-1),new C(-1,1,-1),new C(1,1,-1)],t.FACE_RIGHT=[new C(1,-1,1),new C(-1,-1,1),new C(1,1,1),new C(-1,1,1)],t.FACE_FRONT=[new C(1,-1,-1),new C(1,-1,1),new C(1,1,-1),new C(1,1,1)],t.FACE_BACK=[new C(-1,-1,1),new C(-1,-1,-1),new C(-1,1,1),new C(-1,1,-1)],t.FACE_DOWN=[new C(1,1,-1),new C(1,1,1),new C(-1,1,-1),new C(-1,1,1)],t.FACE_UP=[new C(-1,-1,-1),new C(-1,-1,1),new C(1,-1,-1),new C(1,-1,1)],t}(),da=function(){function t(){}return t._Ldexp=function(e,r){return r>1023?e*Math.pow(2,1023)*Math.pow(2,r-1023):r<-1074?e*Math.pow(2,-1074)*Math.pow(2,r+1074):e*Math.pow(2,r)},t._Rgbe2float=function(e,r,n,i,a,o){a>0?(a=this._Ldexp(1,a-(128+8)),e[o+0]=r*a,e[o+1]=n*a,e[o+2]=i*a):(e[o+0]=0,e[o+1]=0,e[o+2]=0)},t._ReadStringLine=function(e,r){for(var n="",i="",a=r;a<e.length-r&&(i=String.fromCharCode(e[a]),i!=`
`);a++)n+=i;return n},t.RGBE_ReadHeader=function(e){var r=0,n=0,i=this._ReadStringLine(e,0);if(i[0]!="#"||i[1]!="?")throw"Bad HDR Format.";var a=!1,o=!1,s=0;do s+=i.length+1,i=this._ReadStringLine(e,s),i=="FORMAT=32-bit_rle_rgbe"?o=!0:i.length==0&&(a=!0);while(!a);if(!o)throw"HDR Bad header format, unsupported FORMAT";s+=i.length+1,i=this._ReadStringLine(e,s);var u=/^-Y (.*) \+X (.*)$/g,f=u.exec(i);if(!f||f.length<3)throw"HDR Bad header format, no size";if(n=parseInt(f[2]),r=parseInt(f[1]),n<8||n>32767)throw"HDR Bad header format, unsupported size";return s+=i.length+1,{height:r,width:n,dataPosition:s}},t.GetCubeMapTextureData=function(e,r){var n=new Uint8Array(e),i=this.RGBE_ReadHeader(n),a=this.RGBE_ReadPixels(n,i),o=vn.ConvertPanoramaToCubemap(a,i.width,i.height,r);return o},t.RGBE_ReadPixels=function(e,r){return this._RGBEReadPixelsRLE(e,r)},t._RGBEReadPixelsRLE=function(e,r){for(var n=r.height,i=r.width,a,o,s,u,f,c=r.dataPosition,l=0,h=0,d=0,v=new ArrayBuffer(i*4),g=new Uint8Array(v),p=new ArrayBuffer(r.width*r.height*4*3),m=new Float32Array(p);n>0;){if(a=e[c++],o=e[c++],s=e[c++],u=e[c++],a!=2||o!=2||s&128||r.width<8||r.width>32767)return this._RGBEReadPixelsNOTRLE(e,r);if((s<<8|u)!=i)throw"HDR Bad header format, wrong scan line width";for(l=0,d=0;d<4;d++)for(h=(d+1)*i;l<h;)if(a=e[c++],o=e[c++],a>128){if(f=a-128,f==0||f>h-l)throw"HDR Bad Format, bad scanline data (run)";for(;f-- >0;)g[l++]=o}else{if(f=a,f==0||f>h-l)throw"HDR Bad Format, bad scanline data (non-run)";if(g[l++]=o,--f>0)for(var A=0;A<f;A++)g[l++]=e[c++]}for(d=0;d<i;d++)a=g[d],o=g[d+i],s=g[d+2*i],u=g[d+3*i],this._Rgbe2float(m,a,o,s,u,(r.height-n)*i*3+d*3);n--}return m},t._RGBEReadPixelsNOTRLE=function(e,r){for(var n=r.height,i=r.width,a,o,s,u,f,c=r.dataPosition,l=new ArrayBuffer(r.width*r.height*4*3),h=new Float32Array(l);n>0;){for(f=0;f<r.width;f++)a=e[c++],o=e[c++],s=e[c++],u=e[c++],this._Rgbe2float(h,a,o,s,u,(r.height-n)*i*3+f*3);n--}return h},t}(),gn=1,pn=2,mn=3,An=9,Cn=10,_n=11,bn=48,wn=4,yn=0,Pn=1,Tn=2,En=3;function nr(t){var e=0,r={id_length:t[e++],colormap_type:t[e++],image_type:t[e++],colormap_index:t[e++]|t[e++]<<8,colormap_length:t[e++]|t[e++]<<8,colormap_size:t[e++],origin:[t[e++]|t[e++]<<8,t[e++]|t[e++]<<8],width:t[e++]|t[e++]<<8,height:t[e++]|t[e++]<<8,pixel_size:t[e++],flags:t[e++]};return r}function Rn(t,e){if(e.length<19){y.Error("Unable to load TGA file - Not enough data to contain header");return}var r=18,n=nr(e);if(n.id_length+r>e.length){y.Error("Unable to load TGA file - Not enough data");return}r+=n.id_length;var i=!1,a=!1,o=!1;switch(n.image_type){case An:i=!0;case gn:a=!0;break;case Cn:i=!0;case pn:break;case _n:i=!0;case mn:o=!0;break}var s,u=n.pixel_size>>3,f=n.width*n.height*u,c;if(a&&(c=e.subarray(r,r+=n.colormap_length*(n.colormap_size>>3))),i){s=new Uint8Array(f);for(var l=void 0,h=void 0,d=void 0,v=0,g=new Uint8Array(u);r<f&&v<f;)if(l=e[r++],h=(l&127)+1,l&128){for(d=0;d<u;++d)g[d]=e[r++];for(d=0;d<h;++d)s.set(g,v+d*u);v+=u*h}else{for(h*=u,d=0;d<h;++d)s[v+d]=e[r++];v+=h}}else s=e.subarray(r,r+=a?n.width*n.height:f);var p,m,A,_,w,b;switch((n.flags&bn)>>wn){default:case Tn:p=0,A=1,b=n.width,m=0,_=1,w=n.height;break;case yn:p=0,A=1,b=n.width,m=n.height-1,_=-1,w=-1;break;case En:p=n.width-1,A=-1,b=-1,m=0,_=1,w=n.height;break;case Pn:p=n.width-1,A=-1,b=-1,m=n.height-1,_=-1,w=-1;break}var E="_getImageData"+(o?"Grey":"")+n.pixel_size+"bits",P=kn[E](n,c,s,m,_,w,p,A,b),T=t.getEngine();T._uploadDataToTextureDirectly(t,P)}function Bn(t,e,r,n,i,a,o,s,u){var f=r,c=e,l=t.width,h=t.height,d,v=0,g,p,m=new Uint8Array(l*h*4);for(p=n;p!==a;p+=i)for(g=o;g!==u;g+=s,v++)d=f[v],m[(g+l*p)*4+3]=255,m[(g+l*p)*4+2]=c[d*3+0],m[(g+l*p)*4+1]=c[d*3+1],m[(g+l*p)*4+0]=c[d*3+2];return m}function Dn(t,e,r,n,i,a,o,s,u){var f=r,c=t.width,l=t.height,h,d=0,v,g,p=new Uint8Array(c*l*4);for(g=n;g!==a;g+=i)for(v=o;v!==u;v+=s,d+=2){h=f[d+0]+(f[d+1]<<8);var m=((h&31744)>>10)*255/31|0,A=((h&992)>>5)*255/31|0,_=(h&31)*255/31|0;p[(v+c*g)*4+0]=m,p[(v+c*g)*4+1]=A,p[(v+c*g)*4+2]=_,p[(v+c*g)*4+3]=h&32768?0:255}return p}function Fn(t,e,r,n,i,a,o,s,u){var f=r,c=t.width,l=t.height,h=0,d,v,g=new Uint8Array(c*l*4);for(v=n;v!==a;v+=i)for(d=o;d!==u;d+=s,h+=3)g[(d+c*v)*4+3]=255,g[(d+c*v)*4+2]=f[h+0],g[(d+c*v)*4+1]=f[h+1],g[(d+c*v)*4+0]=f[h+2];return g}function Ln(t,e,r,n,i,a,o,s,u){var f=r,c=t.width,l=t.height,h=0,d,v,g=new Uint8Array(c*l*4);for(v=n;v!==a;v+=i)for(d=o;d!==u;d+=s,h+=4)g[(d+c*v)*4+2]=f[h+0],g[(d+c*v)*4+1]=f[h+1],g[(d+c*v)*4+0]=f[h+2],g[(d+c*v)*4+3]=f[h+3];return g}function On(t,e,r,n,i,a,o,s,u){var f=r,c=t.width,l=t.height,h,d=0,v,g,p=new Uint8Array(c*l*4);for(g=n;g!==a;g+=i)for(v=o;v!==u;v+=s,d++)h=f[d],p[(v+c*g)*4+0]=h,p[(v+c*g)*4+1]=h,p[(v+c*g)*4+2]=h,p[(v+c*g)*4+3]=255;return p}function Sn(t,e,r,n,i,a,o,s,u){var f=r,c=t.width,l=t.height,h=0,d,v,g=new Uint8Array(c*l*4);for(v=n;v!==a;v+=i)for(d=o;d!==u;d+=s,h+=2)g[(d+c*v)*4+0]=f[h+0],g[(d+c*v)*4+1]=f[h+0],g[(d+c*v)*4+2]=f[h+0],g[(d+c*v)*4+3]=f[h+1];return g}var kn={GetTGAHeader:nr,UploadContent:Rn,_getImageData8bits:Bn,_getImageData16bits:Dn,_getImageData24bits:Fn,_getImageData32bits:Ln,_getImageDataGrey8bits:On,_getImageDataGrey16bits:Sn},$;(function(t){t[t.cTFETC1=0]="cTFETC1",t[t.cTFETC2=1]="cTFETC2",t[t.cTFBC1=2]="cTFBC1",t[t.cTFBC3=3]="cTFBC3",t[t.cTFBC4=4]="cTFBC4",t[t.cTFBC5=5]="cTFBC5",t[t.cTFBC7=6]="cTFBC7",t[t.cTFPVRTC1_4_RGB=8]="cTFPVRTC1_4_RGB",t[t.cTFPVRTC1_4_RGBA=9]="cTFPVRTC1_4_RGBA",t[t.cTFASTC_4x4=10]="cTFASTC_4x4",t[t.cTFATC_RGB=11]="cTFATC_RGB",t[t.cTFATC_RGBA_INTERPOLATED_ALPHA=12]="cTFATC_RGBA_INTERPOLATED_ALPHA",t[t.cTFRGBA32=13]="cTFRGBA32",t[t.cTFRGB565=14]="cTFRGB565",t[t.cTFBGR565=15]="cTFBGR565",t[t.cTFRGBA4444=16]="cTFRGBA4444",t[t.cTFFXT1_RGB=17]="cTFFXT1_RGB",t[t.cTFPVRTC2_4_RGB=18]="cTFPVRTC2_4_RGB",t[t.cTFPVRTC2_4_RGBA=19]="cTFPVRTC2_4_RGBA",t[t.cTFETC2_EAC_R11=20]="cTFETC2_EAC_R11",t[t.cTFETC2_EAC_RG11=21]="cTFETC2_EAC_RG11"})($||($={}));var ne={JSModuleURL:"https://cdn.babylonjs.com/basisTranscoder/1/basis_transcoder.js",WasmModuleURL:"https://cdn.babylonjs.com/basisTranscoder/1/basis_transcoder.wasm"},Un=function(t,e){var r;switch(t){case $.cTFETC1:r=36196;break;case $.cTFBC1:r=33776;break;case $.cTFBC4:r=33779;break;case $.cTFASTC_4x4:r=37808;break;case $.cTFETC2:r=37496;break;case $.cTFBC7:r=36492;break}if(r===void 0)throw"The chosen Basis transcoder format is not currently supported";return r},Ie=null,H=null,xn=0,Mn=!1,In=function(){return Ie||(Ie=new Promise(function(t,e){H?t(H):D.LoadFileAsync(ne.WasmModuleURL).then(function(r){if(typeof URL!="function")return e("Basis transcoder requires an environment with a URL constructor");var n=URL.createObjectURL(new Blob(["(".concat(Hn,")()")],{type:"application/javascript"}));H=new Worker(n);var i=function(a){a.data.action==="init"?(H.removeEventListener("message",i),t(H)):a.data.action==="error"&&e(a.data.error||"error initializing worker")};H.addEventListener("message",i),H.postMessage({action:"init",url:ne.JSModuleURL,wasmBinary:r})}).catch(e)})),Ie},Kn=function(t,e){var r=t instanceof ArrayBuffer?new Uint8Array(t):t;return new Promise(function(n,i){In().then(function(){var a=xn++,o=function(u){u.data.action==="transcode"&&u.data.id===a&&(H.removeEventListener("message",o),u.data.success?n(u.data):i("Transcode is not supported on this device"))};H.addEventListener("message",o);var s=new Uint8Array(r.byteLength);s.set(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)),H.postMessage({action:"transcode",id:a,imageData:s,config:e,ignoreSupportedFormats:Mn},[s.buffer])},function(a){i(a)})})},Gn=function(t,e){for(var r=t.getEngine(),n=function(a){var o=e.fileInfo.images[a].levels[0];if(t._invertVScale=t.invertY,e.format===-1)if(t.type=10,t.format=4,r._features.basisNeedsPOT&&(B.Log2(o.width)%1!==0||B.Log2(o.height)%1!==0)){var s=new Je(r,Ce.Temp);t._invertVScale=t.invertY,s.type=10,s.format=4,s.width=o.width+3&-4,s.height=o.height+3&-4,r._bindTextureDirectly(r._gl.TEXTURE_2D,s,!0),r._uploadDataToTextureDirectly(s,o.transcodedPixels,a,0,4,!0),r._rescaleTexture(s,t,r.scenes[0],r._getInternalFormat(4),function(){r._releaseTexture(s),r._bindTextureDirectly(r._gl.TEXTURE_2D,t,!0)})}else t._invertVScale=!t.invertY,t.width=o.width+3&-4,t.height=o.height+3&-4,r._uploadDataToTextureDirectly(t,o.transcodedPixels,a,0,4,!0);else t.width=o.width,t.height=o.height,t.generateMipMaps=e.fileInfo.images[a].levels.length>1,e.fileInfo.images[a].levels.forEach(function(u,f){r._uploadCompressedDataToTextureDirectly(t,nt.GetInternalFormatFromBasisFormat(e.format,r),u.width,u.height,u.transcodedPixels,a,f)}),r._features.basisNeedsPOT&&(B.Log2(t.width)%1!==0||B.Log2(t.height)%1!==0)&&(D.Warn("Loaded .basis texture width and height are not a power of two. Texture wrapping will be set to Texture.CLAMP_ADDRESSMODE as other modes are not supported with non power of two dimensions in webGL 1."),t._cachedWrapU=Q.CLAMP_ADDRESSMODE,t._cachedWrapV=Q.CLAMP_ADDRESSMODE)},i=0;i<e.fileInfo.images.length;i++)n(i)},nt={JSModuleURL:ne.JSModuleURL,WasmModuleURL:ne.WasmModuleURL,GetInternalFormatFromBasisFormat:Un,TranscodeAsync:Kn,LoadTextureFromTranscodeResult:Gn};function Hn(){var t={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7:6,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16,cTFFXT1_RGB:17,cTFPVRTC2_4_RGB:18,cTFPVRTC2_4_RGBA:19,cTFETC2_EAC_R11:20,cTFETC2_EAC_RG11:21},e=null;onmessage=function(o){if(o.data.action==="init"){if(!e){try{importScripts(o.data.url)}catch(b){postMessage({action:"error",error:b})}e=BASIS({wasmBinary:o.data.wasmBinary})}e!==null&&e.then(function(b){BASIS=b,b.initializeBasis(),postMessage({action:"init"})})}else if(o.data.action==="transcode"){var s=o.data.config,u=o.data.imageData,f=new BASIS.BasisFile(u),c=n(f),l=o.data.ignoreSupportedFormats?null:r(o.data.config,c),h=!1;l===null&&(h=!0,l=c.hasAlpha?t.cTFBC3:t.cTFBC1);var d=!0;f.startTranscoding()||(d=!1);for(var v=[],g=0;g<c.images.length&&d;g++){var p=c.images[g];if(s.loadSingleImage===void 0||s.loadSingleImage===g){var m=p.levels.length;s.loadMipmapLevels===!1&&(m=1);for(var A=0;A<m;A++){var _=p.levels[A],w=i(f,g,A,l,h);if(!w){d=!1;break}_.transcodedPixels=w,v.push(_.transcodedPixels.buffer)}}}f.close(),f.delete(),h&&(l=-1),d?postMessage({action:"transcode",success:d,id:o.data.id,fileInfo:c,format:l},v):postMessage({action:"transcode",success:d,id:o.data.id})}};function r(o,s){var u=null;return o.supportedCompressionFormats&&(o.supportedCompressionFormats.astc?u=t.cTFASTC_4x4:o.supportedCompressionFormats.bc7?u=t.cTFBC7:o.supportedCompressionFormats.s3tc?u=s.hasAlpha?t.cTFBC3:t.cTFBC1:o.supportedCompressionFormats.pvrtc?u=s.hasAlpha?t.cTFPVRTC1_4_RGBA:t.cTFPVRTC1_4_RGB:o.supportedCompressionFormats.etc2?u=t.cTFETC2:o.supportedCompressionFormats.etc1?u=t.cTFETC1:u=t.cTFRGB565),u}function n(o){for(var s=o.getHasAlpha(),u=o.getNumImages(),f=[],c=0;c<u;c++){for(var l={levels:[]},h=o.getNumLevels(c),d=0;d<h;d++){var v={width:o.getImageWidth(c,d),height:o.getImageHeight(c,d)};l.levels.push(v)}f.push(l)}var g={hasAlpha:s,images:f};return g}function i(o,s,u,f,c){var l=o.getImageTranscodedSizeInBytes(s,u,f),h=new Uint8Array(l);if(!o.transcodeImage(h,s,u,f,1,0))return null;if(c){var d=o.getImageWidth(s,u)+3&-4,v=o.getImageHeight(s,u)+3&-4;h=a(h,0,d,v)}return h}function a(o,s,u,f){for(var c=new Uint16Array(4),l=new Uint16Array(u*f),h=u/4,d=f/4,v=0;v<d;v++)for(var g=0;g<h;g++){var p=s+8*(v*h+g);c[0]=o[p]|o[p+1]<<8,c[1]=o[p+2]|o[p+3]<<8,c[2]=(2*(c[0]&31)+1*(c[1]&31))/3|(2*(c[0]&2016)+1*(c[1]&2016))/3&2016|(2*(c[0]&63488)+1*(c[1]&63488))/3&63488,c[3]=(2*(c[1]&31)+1*(c[0]&31))/3|(2*(c[1]&2016)+1*(c[0]&2016))/3&2016|(2*(c[1]&63488)+1*(c[0]&63488))/3&63488;for(var m=0;m<4;m++){var A=o[p+4+m],_=(v*4+m)*u+g*4;l[_++]=c[A&3],l[_++]=c[A>>2&3],l[_++]=c[A>>4&3],l[_++]=c[A>>6&3]}}return l}}Object.defineProperty(nt,"JSModuleURL",{get:function(){return ne.JSModuleURL},set:function(t){ne.JSModuleURL=t}});Object.defineProperty(nt,"WasmModuleURL",{get:function(){return ne.WasmModuleURL},set:function(t){ne.WasmModuleURL=t}});var va=function(){function t(e,r,n){this.gradient=e,this.color1=r,this.color2=n}return t.prototype.getColorToRef=function(e){if(!this.color2){e.copyFrom(this.color1);return}Ht.LerpToRef(this.color1,this.color2,Math.random(),e)},t}(),ga=function(){function t(e,r){this.gradient=e,this.color=r}return t}(),pa=function(){function t(e,r,n){this.gradient=e,this.factor1=r,this.factor2=n}return t.prototype.getFactor=function(){return this.factor2===void 0||this.factor2===this.factor1?this.factor1:this.factor1+(this.factor2-this.factor1)*Math.random()},t}(),ma=function(){function t(){}return t.GetCurrentGradient=function(e,r,n){if(r[0].gradient>e){n(r[0],r[0],1);return}for(var i=0;i<r.length-1;i++){var a=r[i],o=r[i+1];if(e>=a.gradient&&e<=o.gradient){var s=(e-a.gradient)/(o.gradient-a.gradient);n(a,o,s);return}}var u=r.length-1;n(r[u],r[u],1)},t}(),z;(function(t){t[t.INIT=0]="INIT",t[t.RUNNING=1]="RUNNING",t[t.DONE=2]="DONE",t[t.ERROR=3]="ERROR"})(z||(z={}));var V=function(){function t(e){this.name=e,this._isCompleted=!1,this._taskState=z.INIT}return Object.defineProperty(t.prototype,"isCompleted",{get:function(){return this._isCompleted},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"taskState",{get:function(){return this._taskState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorObject",{get:function(){return this._errorObject},enumerable:!1,configurable:!0}),t.prototype._setErrorObject=function(e,r){this._errorObject||(this._errorObject={message:e,exception:r})},t.prototype.run=function(e,r,n){var i=this;this._taskState=z.RUNNING,this.runTask(e,function(){i._onDoneCallback(r,n)},function(a,o){i._onErrorCallback(n,a,o)})},t.prototype.runTask=function(e,r,n){throw new Error("runTask is not implemented")},t.prototype.reset=function(){this._taskState=z.INIT},t.prototype._onErrorCallback=function(e,r,n){this._taskState=z.ERROR,this._errorObject={message:r,exception:n},this.onError&&this.onError(this,r,n),e()},t.prototype._onDoneCallback=function(e,r){try{this._taskState=z.DONE,this._isCompleted=!0,this.onSuccess&&this.onSuccess(this),e()}catch(n){this._onErrorCallback(r,"Task is done, error executing success callback(s)",n)}},t}(),Qn=function(){function t(e,r,n){this.remainingCount=e,this.totalCount=r,this.task=n}return t}(),jn=function(t){R(e,t);function e(r,n,i,a){var o=t.call(this,r)||this;return o.name=r,o.meshesNames=n,o.rootUrl=i,o.sceneFilename=a,o}return e.prototype.runTask=function(r,n,i){var a=this;me.LoadAssetContainer(this.rootUrl,this.sceneFilename,r,function(o){a.loadedContainer=o,a.loadedMeshes=o.meshes,a.loadedParticleSystems=o.particleSystems,a.loadedSkeletons=o.skeletons,a.loadedAnimationGroups=o.animationGroups,n()},null,function(o,s,u){i(s,u)})},e}(V),Nn=function(t){R(e,t);function e(r,n,i,a){var o=t.call(this,r)||this;return o.name=r,o.meshesNames=n,o.rootUrl=i,o.sceneFilename=a,o}return e.prototype.runTask=function(r,n,i){var a=this;me.ImportMesh(this.meshesNames,this.rootUrl,this.sceneFilename,r,function(o,s,u,f){a.loadedMeshes=o,a.loadedParticleSystems=s,a.loadedSkeletons=u,a.loadedAnimationGroups=f,n()},null,function(o,s,u){i(s,u)})},e}(V),zn=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.name=r,i.url=n,i}return e.prototype.runTask=function(r,n,i){var a=this;r._loadFile(this.url,function(o){a.text=o,n()},void 0,!1,!1,function(o,s){o&&i(o.status+" "+o.statusText,s)})},e}(V),Xn=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.name=r,i.url=n,i}return e.prototype.runTask=function(r,n,i){var a=this;r._loadFile(this.url,function(o){a.data=o,n()},void 0,!0,!0,function(o,s){o&&i(o.status+" "+o.statusText,s)})},e}(V),Vn=function(t){R(e,t);function e(r,n){var i=t.call(this,r)||this;return i.name=r,i.url=n,i}return e.prototype.runTask=function(r,n,i){var a=this,o=new Image;D.SetCorsBehavior(this.url,o),o.onload=function(){a.image=o,n()},o.onerror=function(s){i("Error loading image",s)},o.src=this.url},e}(V),Yn=function(t){R(e,t);function e(r,n,i,a,o){a===void 0&&(a=!0),o===void 0&&(o=Q.TRILINEAR_SAMPLINGMODE);var s=t.call(this,r)||this;return s.name=r,s.url=n,s.noMipmap=i,s.invertY=a,s.samplingMode=o,s}return e.prototype.runTask=function(r,n,i){var a=function(){n()},o=function(s,u){i(s,u)};this.texture=new Q(this.url,r,this.noMipmap,this.invertY,this.samplingMode,a,o)},e}(V),qn=function(t){R(e,t);function e(r,n,i,a,o,s){var u=t.call(this,r)||this;return u.name=r,u.url=n,u.extensions=i,u.noMipmap=a,u.files=o,u.prefiltered=s,u}return e.prototype.runTask=function(r,n,i){var a=function(){n()},o=function(s,u){i(s,u)};this.texture=new lr(this.url,r,this.extensions,this.noMipmap,this.files,a,o,void 0,this.prefiltered)},e}(V),Jn=function(t){R(e,t);function e(r,n,i,a,o,s,u){a===void 0&&(a=!1),o===void 0&&(o=!0),s===void 0&&(s=!1),u===void 0&&(u=!1);var f=t.call(this,r)||this;return f.name=r,f.url=n,f.size=i,f.noMipmap=a,f.generateHarmonics=o,f.gammaSpace=s,f.reserved=u,f}return e.prototype.runTask=function(r,n,i){var a=function(){n()},o=function(s,u){i(s,u)};this.texture=new hr(this.url,r,this.size,this.noMipmap,this.generateHarmonics,this.gammaSpace,this.reserved,a,o)},e}(V),Wn=function(t){R(e,t);function e(r,n,i,a,o){a===void 0&&(a=!1),o===void 0&&(o=!0);var s=t.call(this,r)||this;return s.name=r,s.url=n,s.size=i,s.noMipmap=a,s.gammaSpace=o,s}return e.prototype.runTask=function(r,n,i){var a=function(){n()},o=function(s,u){i(s,u)};this.texture=new dr(this.url,r,this.size,this.noMipmap,this.gammaSpace,a,o)},e}(V),Aa=function(){function t(e){this._isLoading=!1,this._tasks=new Array,this._waitingTasksCount=0,this._totalTasksCount=0,this.onTaskSuccessObservable=new F,this.onTaskErrorObservable=new F,this.onTasksDoneObservable=new F,this.onProgressObservable=new F,this.useDefaultLoadingScreen=!0,this.autoHideLoadingUI=!0,this._scene=e||ee.LastCreatedScene}return t.prototype.addContainerTask=function(e,r,n,i){var a=new jn(e,r,n,i);return this._tasks.push(a),a},t.prototype.addMeshTask=function(e,r,n,i){var a=new Nn(e,r,n,i);return this._tasks.push(a),a},t.prototype.addTextFileTask=function(e,r){var n=new zn(e,r);return this._tasks.push(n),n},t.prototype.addBinaryFileTask=function(e,r){var n=new Xn(e,r);return this._tasks.push(n),n},t.prototype.addImageTask=function(e,r){var n=new Vn(e,r);return this._tasks.push(n),n},t.prototype.addTextureTask=function(e,r,n,i,a){a===void 0&&(a=Q.TRILINEAR_SAMPLINGMODE);var o=new Yn(e,r,n,i,a);return this._tasks.push(o),o},t.prototype.addCubeTextureTask=function(e,r,n,i,a,o){var s=new qn(e,r,n,i,a,o);return this._tasks.push(s),s},t.prototype.addHDRCubeTextureTask=function(e,r,n,i,a,o,s){i===void 0&&(i=!1),a===void 0&&(a=!0),o===void 0&&(o=!1),s===void 0&&(s=!1);var u=new Jn(e,r,n,i,a,o,s);return this._tasks.push(u),u},t.prototype.addEquiRectangularCubeTextureAssetTask=function(e,r,n,i,a){i===void 0&&(i=!1),a===void 0&&(a=!0);var o=new Wn(e,r,n,i,a);return this._tasks.push(o),o},t.prototype.removeTask=function(e){var r=this._tasks.indexOf(e);r>-1&&this._tasks.splice(r,1)},t.prototype._decreaseWaitingTasksCount=function(e){this._waitingTasksCount--;try{this.onProgress&&this.onProgress(this._waitingTasksCount,this._totalTasksCount,e),this.onProgressObservable.notifyObservers(new Qn(this._waitingTasksCount,this._totalTasksCount,e))}catch(s){y.Error("Error running progress callbacks."),console.log(s)}if(this._waitingTasksCount===0){try{var r=this._tasks.slice();this.onFinish&&this.onFinish(r);for(var n=0,i=r;n<i.length;n++){var a=i[n];if(a.taskState===z.DONE){var o=this._tasks.indexOf(a);o>-1&&this._tasks.splice(o,1)}}this.onTasksDoneObservable.notifyObservers(this._tasks)}catch(s){y.Error("Error running tasks-done callbacks."),console.log(s)}this._isLoading=!1,this.autoHideLoadingUI&&this._scene.getEngine().hideLoadingUI()}},t.prototype._runTask=function(e){var r=this,n=function(){try{r.onTaskSuccess&&r.onTaskSuccess(e),r.onTaskSuccessObservable.notifyObservers(e),r._decreaseWaitingTasksCount(e)}catch(a){i("Error executing task success callbacks",a)}},i=function(a,o){e._setErrorObject(a,o),r.onTaskError?r.onTaskError(e):e.onError||y.Error(r._formatTaskErrorMessage(e)),r.onTaskErrorObservable.notifyObservers(e),r._decreaseWaitingTasksCount(e)};e.run(this._scene,n,i)},t.prototype._formatTaskErrorMessage=function(e){var r="Unable to complete task "+e.name;return e.errorObject.message&&(r+=": ".concat(e.errorObject.message)),e.errorObject.exception&&(r+=": ".concat(e.errorObject.exception)),r},t.prototype.reset=function(){return this._isLoading=!1,this._tasks=new Array,this},t.prototype.load=function(){if(this._isLoading)return this;if(this._isLoading=!0,this._waitingTasksCount=this._tasks.length,this._totalTasksCount=this._tasks.length,this._waitingTasksCount===0)return this._isLoading=!1,this.onFinish&&this.onFinish(this._tasks),this.onTasksDoneObservable.notifyObservers(this._tasks),this;this.useDefaultLoadingScreen&&this._scene.getEngine().displayLoadingUI();for(var e=0;e<this._tasks.length;e++){var r=this._tasks[e];r.taskState===z.INIT&&this._runTask(r)}return this},t.prototype.loadAsync=function(){var e=this;return new Promise(function(r,n){if(e._isLoading){r();return}e.onTasksDoneObservable.addOnce(function(i){i&&i.length?n(i):r()}),e.load()})},t}(),Ca=function(){function t(){var e=this;this.promise=new Promise(function(r,n){e._resolve=r,e._reject=n})}return Object.defineProperty(t.prototype,"resolve",{get:function(){return this._resolve},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reject",{get:function(){return this._reject},enumerable:!1,configurable:!0}),t}();(function(){function t(e,r,n,i,a,o,s,u,f){var c=this;this.onProcessFileCallback=function(){return!0},this.loadAsync=function(l,h){return me.LoadAsync("file:",l,c._engine,h)},this._engine=e,this._currentScene=r,this._sceneLoadedCallback=n,this._progressCallback=i,this._additionalRenderLoopLogicCallback=a,this._textureLoadingCallback=o,this._startingProcessingFilesCallback=s,this._onReloadCallback=u,this._errorCallback=f}return Object.defineProperty(t,"FilesToLoad",{get:function(){return Ae.FilesToLoad},enumerable:!1,configurable:!0}),t.prototype.monitorElementForDragNDrop=function(e){var r=this;e&&(this._elementToMonitor=e,this._dragEnterHandler=function(n){r._drag(n)},this._dragOverHandler=function(n){r._drag(n)},this._dropHandler=function(n){r._drop(n)},this._elementToMonitor.addEventListener("dragenter",this._dragEnterHandler,!1),this._elementToMonitor.addEventListener("dragover",this._dragOverHandler,!1),this._elementToMonitor.addEventListener("drop",this._dropHandler,!1))},Object.defineProperty(t.prototype,"filesToLoad",{get:function(){return this._filesToLoad},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){!this._elementToMonitor||(this._elementToMonitor.removeEventListener("dragenter",this._dragEnterHandler),this._elementToMonitor.removeEventListener("dragover",this._dragOverHandler),this._elementToMonitor.removeEventListener("drop",this._dropHandler))},t.prototype._renderFunction=function(){if(this._additionalRenderLoopLogicCallback&&this._additionalRenderLoopLogicCallback(),this._currentScene){if(this._textureLoadingCallback){var e=this._currentScene.getWaitingItemsCount();e>0&&this._textureLoadingCallback(e)}this._currentScene.render()}},t.prototype._drag=function(e){e.stopPropagation(),e.preventDefault()},t.prototype._drop=function(e){e.stopPropagation(),e.preventDefault(),this.loadFiles(e)},t.prototype._traverseFolder=function(e,r,n,i){var a=this,o=e.createReader(),s=e.fullPath.replace(/^\//,"").replace(/(.+?)\/?$/,"$1/");o.readEntries(function(u){n.count+=u.length;for(var f=0,c=u;f<c.length;f++){var l=c[f];l.isFile?l.file(function(h){h.correctName=s+h.name,r.push(h),--n.count===0&&i()}):l.isDirectory&&a._traverseFolder(l,r,n,i)}--n.count===0&&i()})},t.prototype._processFiles=function(e){for(var r=this,n=0;n<e.length;n++){var i=e[n].correctName.toLowerCase(),a=i.split(".").pop();!this.onProcessFileCallback(e[n],i,a,function(o){return r._sceneFileToLoad=o})||(me.IsPluginForExtensionAvailable("."+a)&&(this._sceneFileToLoad=e[n]),t.FilesToLoad[i]=e[n])}},t.prototype.loadFiles=function(e){var r=this;if(e&&e.dataTransfer&&e.dataTransfer.files&&(this._filesToLoad=e.dataTransfer.files),e&&e.target&&e.target.files&&(this._filesToLoad=e.target.files),!(!this._filesToLoad||this._filesToLoad.length===0)&&(this._startingProcessingFilesCallback&&this._startingProcessingFilesCallback(this._filesToLoad),this._filesToLoad&&this._filesToLoad.length>0)){for(var n=new Array,i=[],a=e.dataTransfer?e.dataTransfer.items:null,o=0;o<this._filesToLoad.length;o++){var s=this._filesToLoad[o],u=s.name.toLowerCase(),f=void 0;if(s.correctName=u,a){var c=a[o];c.getAsEntry?f=c.getAsEntry():c.webkitGetAsEntry&&(f=c.webkitGetAsEntry())}f&&f.isDirectory?i.push(f):n.push(s)}if(i.length===0)this._processFiles(n),this._processReload();else for(var l={count:i.length},h=0,d=i;h<d.length;h++){var v=d[h];this._traverseFolder(v,n,l,function(){r._processFiles(n),l.count===0&&r._processReload()})}}},t.prototype._processReload=function(){this._onReloadCallback?this._onReloadCallback(this._sceneFileToLoad):this.reload()},t.prototype.reload=function(){var e=this;this._sceneFileToLoad?(this._currentScene&&(y.errorsCount>0&&y.ClearLogCache(),this._engine.stopRenderLoop()),me.ShowLoadingScreen=!1,this._engine.displayLoadingUI(),this.loadAsync(this._sceneFileToLoad,this._progressCallback).then(function(r){e._currentScene&&e._currentScene.dispose(),e._currentScene=r,e._sceneLoadedCallback&&e._sceneLoadedCallback(e._sceneFileToLoad,e._currentScene),e._currentScene.executeWhenReady(function(){e._engine.hideLoadingUI(),e._engine.runRenderLoop(function(){e._renderFunction()})})}).catch(function(r){e._engine.hideLoadingUI(),e._errorCallback&&e._errorCallback(e._sceneFileToLoad,e._currentScene,r.message)})):y.Error("Please provide a valid .babylon file.")},t})();var Y=function(){function t(e){e===void 0&&(e=0),this.priority=e}return t.prototype.getDescription=function(){return""},t.prototype.apply=function(e,r){return!0},t}(),Ke=function(t){R(e,t);function e(r,n,i){r===void 0&&(r=0),n===void 0&&(n=1024),i===void 0&&(i=.5);var a=t.call(this,r)||this;return a.priority=r,a.maximumSize=n,a.step=i,a}return e.prototype.getDescription=function(){return"Reducing render target texture size to "+this.maximumSize},e.prototype.apply=function(r,n){for(var i=!0,a=0;a<r.textures.length;a++){var o=r.textures[a];if(!(!o.canRescale||o.getContext)){var s=o.getSize(),u=Math.max(s.width,s.height);u>this.maximumSize&&(o.scale(this.step),i=!1)}}return i},e}(Y),Ot=function(t){R(e,t);function e(r,n,i){r===void 0&&(r=0),n===void 0&&(n=2),i===void 0&&(i=.25);var a=t.call(this,r)||this;return a.priority=r,a.maximumScale=n,a.step=i,a._currentScale=-1,a._directionOffset=1,a}return e.prototype.getDescription=function(){return"Setting hardware scaling level to "+this._currentScale},e.prototype.apply=function(r,n){return this._currentScale===-1&&(this._currentScale=r.getEngine().getHardwareScalingLevel(),this._currentScale>this.maximumScale&&(this._directionOffset=-1)),this._currentScale+=this._directionOffset*this.step,r.getEngine().setHardwareScalingLevel(this._currentScale),this._directionOffset===1?this._currentScale>=this.maximumScale:this._currentScale<=this.maximumScale},e}(Y),Ge=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDescription=function(){return"Turning shadows on/off"},e.prototype.apply=function(r,n){return r.shadowsEnabled=n.isInImprovementMode,!0},e}(Y),He=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDescription=function(){return"Turning post-processes on/off"},e.prototype.apply=function(r,n){return r.postProcessesEnabled=n.isInImprovementMode,!0},e}(Y),Qe=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDescription=function(){return"Turning lens flares on/off"},e.prototype.apply=function(r,n){return r.lensFlaresEnabled=n.isInImprovementMode,!0},e}(Y),Zn=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDescription=function(){return this.onGetDescription?this.onGetDescription():"Running user defined callback"},e.prototype.apply=function(r,n){return this.onApply?this.onApply(r,n):!0},e}(Y),je=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDescription=function(){return"Turning particles on/off"},e.prototype.apply=function(r,n){return r.particlesEnabled=n.isInImprovementMode,!0},e}(Y),St=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDescription=function(){return"Turning render targets off"},e.prototype.apply=function(r,n){return r.renderTargetsEnabled=n.isInImprovementMode,!0},e}(Y),Ne=function(t){R(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._canBeMerged=function(n){if(!(n instanceof at))return!1;var i=n;return!(i.isDisposed()||!i.isVisible||!i.isEnabled()||i.instances.length>0||i.skeleton||i.hasLODLevels)},r}return Object.defineProperty(e,"UpdateSelectionTree",{get:function(){return e._UpdateSelectionTree},set:function(r){e._UpdateSelectionTree=r},enumerable:!1,configurable:!0}),e.prototype.getDescription=function(){return"Merging similar meshes together"},e.prototype.apply=function(r,n,i){for(var a=r.meshes.slice(0),o=a.length,s=0;s<o;s++){var u=new Array,f=a[s];if(!!this._canBeMerged(f)){u.push(f);for(var c=s+1;c<o;c++){var l=a[c];!this._canBeMerged(l)||l.material===f.material&&l.checkCollisions===f.checkCollisions&&(u.push(l),o--,a.splice(c,1),c--)}u.length<2||at.MergeMeshes(u,void 0,!0)}}var h=r;return h.createOrUpdateSelectionOctree&&(i!=null?i&&h.createOrUpdateSelectionOctree():e.UpdateSelectionTree&&h.createOrUpdateSelectionOctree()),!0},e._UpdateSelectionTree=!1,e}(Y),kt=function(){function t(e,r){e===void 0&&(e=60),r===void 0&&(r=2e3),this.targetFrameRate=e,this.trackerDuration=r,this.optimizations=new Array}return t.prototype.addOptimization=function(e){return this.optimizations.push(e),this},t.prototype.addCustomOptimization=function(e,r,n){n===void 0&&(n=0);var i=new Zn(n);return i.onApply=e,i.onGetDescription=r,this.optimizations.push(i),this},t.LowDegradationAllowed=function(e){var r=new t(e),n=0;return r.addOptimization(new Ne(n)),r.addOptimization(new Ge(n)),r.addOptimization(new Qe(n)),n++,r.addOptimization(new He(n)),r.addOptimization(new je(n)),n++,r.addOptimization(new Ke(n,1024)),r},t.ModerateDegradationAllowed=function(e){var r=new t(e),n=0;return r.addOptimization(new Ne(n)),r.addOptimization(new Ge(n)),r.addOptimization(new Qe(n)),n++,r.addOptimization(new He(n)),r.addOptimization(new je(n)),n++,r.addOptimization(new Ke(n,512)),n++,r.addOptimization(new St(n)),n++,r.addOptimization(new Ot(n,2)),r},t.HighDegradationAllowed=function(e){var r=new t(e),n=0;return r.addOptimization(new Ne(n)),r.addOptimization(new Ge(n)),r.addOptimization(new Qe(n)),n++,r.addOptimization(new He(n)),r.addOptimization(new je(n)),n++,r.addOptimization(new Ke(n,256)),n++,r.addOptimization(new St(n)),n++,r.addOptimization(new Ot(n,4)),r},t}();(function(){function t(e,r,n,i){n===void 0&&(n=!0),i===void 0&&(i=!1);var a=this;if(this._isRunning=!1,this._currentPriorityLevel=0,this._targetFrameRate=60,this._trackerDuration=2e3,this._currentFrameRate=0,this._improvementMode=!1,this.onSuccessObservable=new F,this.onNewOptimizationAppliedObservable=new F,this.onFailureObservable=new F,r?this._options=r:this._options=new kt,this._options.targetFrameRate&&(this._targetFrameRate=this._options.targetFrameRate),this._options.trackerDuration&&(this._trackerDuration=this._options.trackerDuration),n)for(var o=0,s=0,u=this._options.optimizations;s<u.length;s++){var f=u[s];f.priority=o++}this._improvementMode=i,this._scene=e||ee.LastCreatedScene,this._sceneDisposeObserver=this._scene.onDisposeObservable.add(function(){a._sceneDisposeObserver=null,a.dispose()})}return Object.defineProperty(t.prototype,"isInImprovementMode",{get:function(){return this._improvementMode},set:function(e){this._improvementMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentPriorityLevel",{get:function(){return this._currentPriorityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrameRate",{get:function(){return this._currentFrameRate},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetFrameRate",{get:function(){return this._targetFrameRate},set:function(e){this._targetFrameRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackerDuration",{get:function(){return this._trackerDuration},set:function(e){this._trackerDuration=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optimizations",{get:function(){return this._options.optimizations},enumerable:!1,configurable:!0}),t.prototype.stop=function(){this._isRunning=!1},t.prototype.reset=function(){this._currentPriorityLevel=0},t.prototype.start=function(){var e=this;this._isRunning||(this._isRunning=!0,this._scene.executeWhenReady(function(){setTimeout(function(){e._checkCurrentState()},e._trackerDuration)}))},t.prototype._checkCurrentState=function(){var e=this;if(!!this._isRunning){var r=this._scene,n=this._options;if(this._currentFrameRate=Math.round(r.getEngine().getFps()),this._improvementMode&&this._currentFrameRate<=this._targetFrameRate||!this._improvementMode&&this._currentFrameRate>=this._targetFrameRate){this._isRunning=!1,this.onSuccessObservable.notifyObservers(this);return}for(var i=!0,a=!0,o=0;o<n.optimizations.length;o++){var s=n.optimizations[o];s.priority===this._currentPriorityLevel&&(a=!1,i=i&&s.apply(r,this),this.onNewOptimizationAppliedObservable.notifyObservers(s))}if(a){this._isRunning=!1,this.onFailureObservable.notifyObservers(this);return}i&&this._currentPriorityLevel++,r.executeWhenReady(function(){setTimeout(function(){e._checkCurrentState()},e._trackerDuration)})}},t.prototype.dispose=function(){this.stop(),this.onSuccessObservable.clear(),this.onFailureObservable.clear(),this.onNewOptimizationAppliedObservable.clear(),this._sceneDisposeObserver&&this._scene.onDisposeObservable.remove(this._sceneDisposeObserver)},t.OptimizeAsync=function(e,r,n,i){var a=new t(e,r||kt.ModerateDegradationAllowed(),!1);return n&&a.onSuccessObservable.add(function(){n()}),i&&a.onFailureObservable.add(function(){i()}),a.start(),a},t})();(function(){function t(e,r){if(r===void 0&&(r={}),!t.IsSupported(e))throw"Your browser does not support recording so far.";var n=e.getRenderingCanvas();if(!n)throw"The babylon engine must have a canvas to be recorded";this._canvas=n,this._canvas.isRecording=!1,this._options=se(se({},t._DefaultOptions),r);var i=this._canvas.captureStream(this._options.fps);if(this._options.audioTracks)for(var a=0,o=this._options.audioTracks;a<o.length;a++){var s=o[a];i.addTrack(s)}this._mediaRecorder=new MediaRecorder(i,{mimeType:this._options.mimeType}),this._mediaRecorder.ondataavailable=this._handleDataAvailable.bind(this),this._mediaRecorder.onerror=this._handleError.bind(this),this._mediaRecorder.onstop=this._handleStop.bind(this)}return t.IsSupported=function(e){var r=e.getRenderingCanvas();return!!r&&typeof r.captureStream=="function"},Object.defineProperty(t.prototype,"isRecording",{get:function(){return!!this._canvas&&this._canvas.isRecording},enumerable:!1,configurable:!0}),t.prototype.stopRecording=function(){!this._canvas||!this._mediaRecorder||!this.isRecording||(this._canvas.isRecording=!1,this._mediaRecorder.stop())},t.prototype.startRecording=function(e,r){var n=this;if(e===void 0&&(e="babylonjs.webm"),r===void 0&&(r=7),!this._canvas||!this._mediaRecorder)throw"Recorder has already been disposed";if(this.isRecording)throw"Recording already in progress";return r>0&&setTimeout(function(){n.stopRecording()},r*1e3),this._fileName=e,this._recordedChunks=[],this._resolve=null,this._reject=null,this._canvas.isRecording=!0,this._mediaRecorder.start(this._options.recordChunckSize),new Promise(function(i,a){n._resolve=i,n._reject=a})},t.prototype.dispose=function(){this._canvas=null,this._mediaRecorder=null,this._recordedChunks=[],this._fileName=null,this._resolve=null,this._reject=null},t.prototype._handleDataAvailable=function(e){e.data.size>0&&this._recordedChunks.push(e.data)},t.prototype._handleError=function(e){if(this.stopRecording(),this._reject)this._reject(e.error);else throw new e.error},t.prototype._handleStop=function(){this.stopRecording();var e=new Blob(this._recordedChunks);this._resolve&&this._resolve(e),window.URL.createObjectURL(e),this._fileName&&D.Download(e,this._fileName)},t._DefaultOptions={mimeType:"video/webm",fps:25,recordChunckSize:3e3},t})();function ir(t,e,r,n,i,a){i===void 0&&(i="image/png"),a===void 0&&(a=!1);var o=ar(t,e,r),s=o.height,u=o.width;if(!(s&&u)){y.Error("Invalid 'size' parameter !");return}D._ScreenshotCanvas||(D._ScreenshotCanvas=document.createElement("canvas")),D._ScreenshotCanvas.width=u,D._ScreenshotCanvas.height=s;var f=D._ScreenshotCanvas.getContext("2d"),c=t.getRenderWidth()/t.getRenderHeight(),l=u,h=l/c;h>s&&(h=s,l=h*c);var d=Math.max(0,u-l)/2,v=Math.max(0,s-h)/2,g=e.getScene();g.activeCamera!==e?it(t,e,r,function(p){if(a){var m=new Blob([p]);D.DownloadBlob(m),n&&n("")}else n&&n(p)},i,1,t.getCreationOptions().antialias):t.onEndFrameObservable.addOnce(function(){var p=t.getRenderingCanvas();f&&p&&f.drawImage(p,d,v,l,h),a?(D.EncodeScreenshotCanvasData(void 0,i),n&&n("")):D.EncodeScreenshotCanvasData(n,i)})}function $n(t,e,r,n){return n===void 0&&(n="image/png"),new Promise(function(i,a){ir(t,e,r,function(o){typeof o!="undefined"?i(o):a(new Error("Data is undefined"))},n)})}function it(t,e,r,n,i,a,o,s,u,f){i===void 0&&(i="image/png"),a===void 0&&(a=1),o===void 0&&(o=!1),u===void 0&&(u=!1),f===void 0&&(f=!1);var c=ar(t,e,r),l=c.height,h=c.width,d={width:h,height:l};if(!(l&&h)){y.Error("Invalid 'size' parameter !");return}var v={width:t.getRenderWidth(),height:t.getRenderHeight()};t.setSize(h,l);var g=e.getScene(),p=null,m=g.activeCameras;g.activeCameras=null,g.activeCamera!==e&&(p=g.activeCamera,g.activeCamera=e),g.render();var A=new vr("screenShot",d,g,!1,!1,0,!1,Q.NEAREST_SAMPLINGMODE,void 0,f,void 0,void 0,void 0,a);A.renderList=null,A.samples=a,A.renderSprites=u;var _=function(){t.onEndFrameObservable.addOnce(function(){A.readPixels(void 0,void 0,void 0,!1).then(function(b){D.DumpData(h,l,b,n,i,s,!0),A.dispose()})}),g.incrementRenderId(),g.resetCachedMaterial(),A.render(!0),g.incrementRenderId(),g.resetCachedMaterial(),p&&(g.activeCamera=p),g.activeCameras=m,t.setSize(v.width,v.height),e.getProjectionMatrix(!0),g.render()};if(o){var w=new mr("antialiasing",1,g.activeCamera);A.addPostProcess(w),w.getEffect().isReady()?_():w.getEffect().onCompiled=function(){_()}}else _()}function ei(t,e,r,n,i,a,o,s){return n===void 0&&(n="image/png"),i===void 0&&(i=1),a===void 0&&(a=!1),s===void 0&&(s=!1),new Promise(function(u,f){it(t,e,r,function(c){typeof c!="undefined"?u(c):f(new Error("Data is undefined"))},n,i,a,o,s)})}function ar(t,e,r){var n=0,i=0;if(typeof r=="object"){var a=r.precision?Math.abs(r.precision):1;r.width&&r.height?(n=r.height*a,i=r.width*a):r.width&&!r.height?(i=r.width*a,n=Math.round(i/t.getAspectRatio(e))):r.height&&!r.width?(n=r.height*a,i=Math.round(n*t.getAspectRatio(e))):(i=Math.round(t.getRenderWidth()*a),n=Math.round(i/t.getAspectRatio(e)))}else isNaN(r)||(n=r,i=r);return i&&(i=Math.floor(i)),n&&(n=Math.floor(n)),{height:n|0,width:i|0}}var ti=function(){D.CreateScreenshot=ir,D.CreateScreenshotAsync=$n,D.CreateScreenshotUsingRenderTarget=it,D.CreateScreenshotUsingRenderTargetAsync=ei};ti();var Ut;(function(t){t[t.Checkbox=0]="Checkbox",t[t.Slider=1]="Slider",t[t.Vector3=2]="Vector3",t[t.Quaternion=3]="Quaternion",t[t.Color3=4]="Color3",t[t.String=5]="String",t[t.Button=6]="Button",t[t.Options=7]="Options",t[t.Tab=8]="Tab"})(Ut||(Ut={}));var _a=function(){function t(e){this.byteOffset=0,this.buffer=e}return t.prototype.loadAsync=function(e){var r=this;return this.buffer.readAsync(this.byteOffset,e).then(function(n){r._dataView=new DataView(n.buffer,n.byteOffset,n.byteLength),r._dataByteOffset=0})},t.prototype.readUint32=function(){var e=this._dataView.getUint32(this._dataByteOffset,!0);return this._dataByteOffset+=4,this.byteOffset+=4,e},t.prototype.readUint8Array=function(e){var r=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._dataByteOffset,e);return this._dataByteOffset+=e,this.byteOffset+=e,r},t.prototype.readString=function(e){return Or(this.readUint8Array(e))},t.prototype.skipBytes=function(e){this._dataByteOffset+=e,this.byteOffset+=e},t}();(function(){function t(){}return t._GetStorage=function(){try{return localStorage.setItem("test",""),localStorage.removeItem("test"),localStorage}catch{var e={};return{getItem:function(n){var i=e[n];return i===void 0?null:i},setItem:function(n,i){e[n]=i}}}},t.ReadString=function(e,r){var n=this._Storage.getItem(e);return n!==null?n:r},t.WriteString=function(e,r){this._Storage.setItem(e,r)},t.ReadBoolean=function(e,r){var n=this._Storage.getItem(e);return n!==null?n==="true":r},t.WriteBoolean=function(e,r){this._Storage.setItem(e,r?"true":"false")},t.ReadNumber=function(e,r){var n=this._Storage.getItem(e);return n!==null?parseFloat(n):r},t.WriteNumber=function(e,r){this._Storage.setItem(e,r.toString())},t._Storage=t._GetStorage(),t})();var xt;(function(t){var e=function(){function n(i,a,o,s){a===void 0&&(a=null),o===void 0&&(o=null),s===void 0&&(s=null),a=a!=null?a:function(){return 1},o=o!=null?o:function(){return 1},s=s!=null?s:function(l,h){return l===h?0:1},this._characterToIdx=new Map,this._insertionCosts=new Array(i.length),this._deletionCosts=new Array(i.length),this._substitutionCosts=new Array(i.length);for(var u,f=0;f<i.length;++f){u=i[f],this._characterToIdx.set(u,f),this._insertionCosts[f]=a(u),this._deletionCosts[f]=o(u),this._substitutionCosts[f]=new Array(i.length);for(var c=f;c<i.length;++c)this._substitutionCosts[f][c]=s(u,i[c])}}return n.prototype.serialize=function(){var i={},a=new Array(this._characterToIdx.size);return this._characterToIdx.forEach(function(o,s){a[o]=s}),i.characters=a,i.insertionCosts=this._insertionCosts,i.deletionCosts=this._deletionCosts,i.substitutionCosts=this._substitutionCosts,JSON.stringify(i)},n.Deserialize=function(i){var a=JSON.parse(i),o=new n(a.characters);return o._insertionCosts=a.insertionCosts,o._deletionCosts=a.deletionCosts,o._substitutionCosts=a.substitutionCosts,o},n.prototype.getCharacterIdx=function(i){return this._characterToIdx.get(i)},n.prototype.getInsertionCost=function(i){return this._insertionCosts[i]},n.prototype.getDeletionCost=function(i){return this._deletionCosts[i]},n.prototype.getSubstitutionCost=function(i,a){var o=Math.min(i,a),s=Math.max(i,a);return this._substitutionCosts[o][s]},n}();t.Alphabet=e;var r=function(){function n(i,a){var o=this;if(i.length>n._MAX_SEQUENCE_LENGTH)throw new Error("Sequences longer than "+n._MAX_SEQUENCE_LENGTH+" not supported.");this._alphabet=a,this._characters=i.map(function(s){return o._alphabet.getCharacterIdx(s)})}return n.prototype.serialize=function(){return JSON.stringify(this._characters)},n.Deserialize=function(i,a){var o=new n([],a);return o._characters=JSON.parse(i),o},n.prototype.distance=function(i){return n._Distance(this,i)},n._Distance=function(i,a){var o=i._alphabet;if(o!==a._alphabet)throw new Error("Cannot Levenshtein compare Sequences built from different alphabets.");var s=i._characters,u=a._characters,f=s.length,c=u.length,l=n._CostMatrix;l[0][0]=0;for(var h=0;h<f;++h)l[h+1][0]=l[h][0]+o.getInsertionCost(s[h]);for(var h=0;h<c;++h)l[0][h+1]=l[0][h]+o.getInsertionCost(u[h]);for(var d=0;d<f;++d)for(var v=0;v<c;++v)n._InsertionCost=l[d+1][v]+o.getInsertionCost(u[v]),n._DeletionCost=l[d][v+1]+o.getDeletionCost(s[d]),n._SubstitutionCost=l[d][v]+o.getSubstitutionCost(s[d],u[v]),l[d+1][v+1]=Math.min(n._InsertionCost,n._DeletionCost,n._SubstitutionCost);return l[f][c]},n._MAX_SEQUENCE_LENGTH=256,n._CostMatrix=ur([],Array(n._MAX_SEQUENCE_LENGTH+1),!0).map(function(){return new Array(n._MAX_SEQUENCE_LENGTH+1)}),n}();t.Sequence=r})(xt||(xt={}));(function(){function t(e){e===void 0&&(e=.01),this._points=[],this._segmentLength=e}return t.prototype.serialize=function(){return JSON.stringify(this)},t.Deserialize=function(e){var r=JSON.parse(e),n=new t(r._segmentLength);return n._points=r._points.map(function(i){return new C(i._x,i._y,i._z)}),n},t.prototype.getLength=function(){return this._points.length*this._segmentLength},t.prototype.add=function(e){var r=this,n=this._points.length;if(n===0)this._points.push(e.clone());else for(var i=function(){return r._segmentLength/C.Distance(r._points[n-1],e)},a=i();a<=1;a=i()){var o=this._points[n-1].scale(1-a);e.scaleAndAddToRef(a,o),this._points.push(o),++n}},t.prototype.resampleAtTargetResolution=function(e){var r=new t(this.getLength()/e);return this._points.forEach(function(n){r.add(n)}),r},t.prototype.tokenize=function(e){for(var r=[],n=new C,i=2;i<this._points.length;++i)t._TransformSegmentDirToRef(this._points[i-2],this._points[i-1],this._points[i],n)&&r.push(t._TokenizeSegment(n,e));return r},t._TransformSegmentDirToRef=function(e,r,n,i){var a=.98;return r.subtractToRef(e,t._ForwardDir),t._ForwardDir.normalize(),r.scaleToRef(-1,t._InverseFromVec),t._InverseFromVec.normalize(),Math.abs(C.Dot(t._ForwardDir,t._InverseFromVec))>a?!1:(C.CrossToRef(t._ForwardDir,t._InverseFromVec,t._UpDir),t._UpDir.normalize(),Te.LookAtLHToRef(e,r,t._UpDir,t._LookMatrix),n.subtractToRef(r,t._FromToVec),t._FromToVec.normalize(),C.TransformNormalToRef(t._FromToVec,t._LookMatrix,i),!0)},t._TokenizeSegment=function(e,r){t._BestMatch=0,t._Score=C.Dot(e,r[0]),t._BestScore=t._Score;for(var n=1;n<r.length;++n)t._Score=C.Dot(e,r[n]),t._Score>t._BestScore&&(t._BestMatch=n,t._BestScore=t._Score);return t._BestMatch},t._ForwardDir=new C,t._InverseFromVec=new C,t._UpDir=new C,t._FromToVec=new C,t._LookMatrix=new Te,t})();var ri=1.5,W=function(){function t(e){this._view=new Float32Array(e),this._itemLength=0}return Object.defineProperty(t.prototype,"itemLength",{get:function(){return this._itemLength},enumerable:!1,configurable:!0}),t.prototype.at=function(e){return e<0||e>=this._itemLength?NaN:this._view[e]},t.prototype.subarray=function(e,r){return e>=r||e<0?new Float32Array(0):(r>this._itemLength&&(r=this._itemLength),this._view.subarray(e,r))},t.prototype.push=function(e){this._view[this._itemLength]=e,this._itemLength++,this._itemLength>=this._view.length&&this._growArray()},t.prototype._growArray=function(){var e=Math.floor(this._view.length*ri),r=new Float32Array(e);r.set(this._view),this._view=r},t}(),Z=1800,ni=24,ii="0",Mt="timestamp",It="numPoints",ai=/\r/g,ze="@",oi=function(){function t(e,r){var n=this;this._scene=e,this._collectDataAtFrame=function(){var i=X.Now-n._startingTimestamp,a=n.datasets.ids.length,o=n.datasets.startingIndices.itemLength,s=0;if(o>0){var u=n.datasets.startingIndices.at(o-1);s=u+n.datasets.data.at(u+t.NumberOfPointsOffset)+t.SliceDataOffset}if(n.datasets.startingIndices.push(s),n.datasets.data.push(i),n.datasets.data.push(a),n.datasets.ids.forEach(function(l){var h=n._strategies.get(l);!h||n.datasets.data.push(h.getData())}),n.datasetObservable.hasObservers()){for(var f=[i,a],c=0;c<a;c++)f.push(n.datasets.data.at(s+t.SliceDataOffset+c));n.datasetObservable.notifyObservers(f)}},this.datasets={ids:[],data:new W(Z),startingIndices:new W(Z)},this._strategies=new Map,this._datasetMeta=new Map,this._eventRestoreSet=new Set,this._customEventObservable=new F,this.datasetObservable=new F,this.metadataObservable=new F(function(i){return i.callback(n._datasetMeta,new Nt(0))}),r&&this.addCollectionStrategies.apply(this,r)}return Object.defineProperty(t,"SliceDataOffset",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NumberOfPointsOffset",{get:function(){return 1},enumerable:!1,configurable:!0}),t.prototype.registerEvent=function(e,r,n){var i=this,a;if(!(this._strategies.has(e)&&!r)){this._strategies.has(e)&&r&&((a=this._strategies.get(e))===null||a===void 0||a.dispose(),this._strategies.delete(e));var o=function(u){var f=0,c=0,l=u.onAfterRenderObservable.add(function(){c=f,f=0}),h=i._customEventObservable.add(function(d){e===d.name&&(d.value!==void 0?f=d.value:f++)});return{id:e,getData:function(){return c},dispose:function(){u.onAfterRenderObservable.remove(l),i._customEventObservable.remove(h)}}},s={name:e};return this._eventRestoreSet.add(e),this.addCollectionStrategies({strategyCallback:o,category:n}),s}},t.prototype.sendEvent=function(e){this._customEventObservable.notifyObservers(e)},t.prototype._restoreStringEvents=function(){var e=this;this._eventRestoreSet.size!==this._customEventObservable.observers.length&&this._eventRestoreSet.forEach(function(r){e.registerEvent(r,!0)})},t.prototype.addCollectionStrategies=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++){var a=i[n],o=a.strategyCallback,s=a.category,u=a.hidden,f=o(this._scene);if(this._strategies.has(f.id)){f.dispose();continue}this.datasets.ids.push(f.id),s&&(s=s.replace(new RegExp(ze,"g"),"")),this._datasetMeta.set(f.id,{color:this._getHexColorFromId(f.id),category:s,hidden:u}),this._strategies.set(f.id,f)}this.metadataObservable.notifyObservers(this._datasetMeta)},t.prototype._getHexColorFromId=function(e){for(var r=0,n=0;n<e.length;n++)r=e.charCodeAt(n)+((r<<5)-r);for(var i="#",n=0;n<ni;n+=8){var a=r>>n&255;i+=(ii+a.toString(16)).substr(-2)}return i},t.prototype.getCurrentSlice=function(){var e=this,r=X.Now-this._startingTimestamp,n=this.datasets.ids.length,i=[r,n];this.datasets.ids.forEach(function(a){var o=e._strategies.get(a);!o||e.datasetObservable.hasObservers()&&i.push(o.getData())}),this.datasetObservable.hasObservers()&&this.datasetObservable.notifyObservers(i)},t.prototype.updateMetadata=function(e,r,n){var i=this._datasetMeta.get(e);!i||(i[r]=n,this.metadataObservable.notifyObservers(this._datasetMeta))},t.prototype.clear=function(e){this.datasets.data=new W(Z),this.datasets.ids.length=0,this.datasets.startingIndices=new W(Z),this._datasetMeta.clear(),this._strategies.forEach(function(r){return r.dispose()}),this._strategies.clear(),e||this._eventRestoreSet.clear(),this._hasLoadedData=!1},Object.defineProperty(t.prototype,"hasLoadedData",{get:function(){return this._hasLoadedData},enumerable:!1,configurable:!0}),t.prototype.loadFromFileData=function(e,r){var n=e.replace(ai,"").split(`
`).map(function(P){return P.split(",").filter(function(T){return T.length>0})}).filter(function(P){return P.length>0}),i=0,a=t.NumberOfPointsOffset;if(n.length<2)return!1;var o={ids:[],data:new W(Z),startingIndices:new W(Z)},s=n[0],u=n.slice(1);if(s.length<2||s[i]!==Mt||s[a]!==It)return!1;for(var f=new Map,c=t.SliceDataOffset;c<s.length;c++){var l=s[c].split(ze),h=l[0],d=l[1];o.ids.push(h),f.set(h,d)}for(var v=0,g=0,p=u;g<p.length;g++){var m=p[g];if(m.length<2)return!1;var A=parseFloat(m[i]),_=parseInt(m[a]);if(isNaN(_)||isNaN(A)||(o.data.push(A),o.data.push(_),_+t.SliceDataOffset!==m.length))return!1;for(var c=t.SliceDataOffset;c<m.length;c++){var w=parseFloat(m[c]);if(isNaN(w))return!1;o.data.push(w)}o.startingIndices.push(v),v+=m.length}if(this.datasets.ids=o.ids,this.datasets.data=o.data,this.datasets.startingIndices=o.startingIndices,r||this._datasetMeta.clear(),this._strategies.forEach(function(P){return P.dispose()}),this._strategies.clear(),!r)for(var b=0,E=this.datasets.ids;b<E.length;b++){var h=E[b],d=f.get(h);this._datasetMeta.set(h,{category:d,color:this._getHexColorFromId(h)})}return this.metadataObservable.notifyObservers(this._datasetMeta),this._hasLoadedData=!0,!0},t.prototype.exportDataToCsv=function(){var e="";e+="".concat(Mt,",").concat(It);for(var r=0;r<this.datasets.ids.length;r++)if(e+=",".concat(this.datasets.ids[r]),this._datasetMeta){var n=this._datasetMeta.get(this.datasets.ids[r]);n!=null&&n.category&&(e+="".concat(ze).concat(n.category))}e+=`
`;for(var r=0;r<this.datasets.startingIndices.itemLength;r++){var i=this.datasets.startingIndices.at(r),a=this.datasets.data.at(i),o=this.datasets.data.at(i+t.NumberOfPointsOffset);e+="".concat(a,",").concat(o);for(var s=0;s<o;s++)e+=",".concat(this.datasets.data.at(i+t.SliceDataOffset+s));for(var u=0;u<this.datasets.ids.length-o;u++)e+=",";e+=`
`}var f="".concat(new Date().toISOString(),"-perfdata.csv");D.Download(new Blob([e],{type:"text/csv"}),f)},t.prototype.start=function(e){e?this._startingTimestamp===void 0&&(this._startingTimestamp=X.Now):(this.datasets.data=new W(Z),this.datasets.startingIndices=new W(Z),this._startingTimestamp=X.Now),this._scene.onAfterRenderObservable.add(this._collectDataAtFrame),this._restoreStringEvents(),this._isStarted=!0},t.prototype.stop=function(){this._scene.onAfterRenderObservable.removeCallback(this._collectDataAtFrame),this._isStarted=!1},Object.defineProperty(t.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._scene.onAfterRenderObservable.removeCallback(this._collectDataAtFrame),this._datasetMeta.clear(),this._strategies.forEach(function(e){e.dispose()}),this.datasetObservable.clear(),this.metadataObservable.clear(),this._isStarted=!1,this.datasets=null},t}();gr.prototype.getPerfCollector=function(){return this._perfCollector||(this._perfCollector=new oi(this)),this._perfCollector};function si(t){var e=new Array,r=new Array,n=new Array,i=t.add(function(){for(var o=e.length,s=0;s<o;s++)Be(e.shift(),r.shift(),n.shift())}),a=function(o,s,u){e.push(o),r.push(s),n.push(u)};return{scheduler:a,dispose:function(){t.remove(i)}}}F.prototype.runCoroutineAsync=function(t){if(!this._coroutineScheduler){var e=si(this);this._coroutineScheduler=e.scheduler,this._coroutineSchedulerDispose=e.dispose}return jr(t,this._coroutineScheduler)};F.prototype.cancelAllCoroutines=function(){this._coroutineSchedulerDispose&&this._coroutineSchedulerDispose(),this._coroutineScheduler=void 0,this._coroutineSchedulerDispose=void 0};export{qi as $,Pi as A,Ui as B,Vr as C,yr as D,ra as E,oa as F,br as G,Ki as H,re as I,O as J,Di as K,y as L,ha as M,tt as N,F as O,X as P,ki as Q,Ti as R,Rr as S,de as T,ji as U,Wi as V,Ee as W,qt as X,Sr as Y,Yi as Z,te as _,D as a,Se as a0,Fi as a1,Xr as a2,Ii as a3,xi as a4,ua as a5,fn as a6,$i as a7,fa as a8,ca as a9,_a as aA,rt as aB,Ca as aC,ft as aD,Aa as aE,da as aa,le as ab,vn as ac,nr as ad,Rn as ae,Kn as af,Gn as ag,ta as ah,ut as ai,Qr as aj,Xi as ak,Mi as al,Gi as am,jr as an,zi as ao,ln as ap,ma as aq,pa as ar,ga as as,va as at,la as au,Hr as av,ve as aw,Wt as ax,Re as ay,Ni as az,Ri as b,Ji as c,Oi as d,Ei as e,Gr as f,Si as g,Li as h,Vt as i,Hi as j,Fr as k,Dr as l,Qi as m,Vi as n,Kr as o,et as p,na as q,aa as r,Bi as s,ia as t,sa as u,Ze as v,We as w,Zi as x,ea as y,J as z};
