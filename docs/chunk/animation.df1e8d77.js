import{_ as T}from"./precisionDate.1704d4c6.js";import{S as b,R as W}from"./arrayTools.49279cc5.js";import{Quaternion as _,Vector3 as C,Vector2 as Y,Matrix as L,TmpVectors as S}from"./math.vector.560c6bc4.js";import{Color3 as y,Color4 as g}from"./math.color.d29cb8ed.js";import{S as x,W as w}from"./decorators.5af14a95.js";import{N as U}from"./node.3cceef8b.js";import{S as D}from"./math.size.64d00435.js";var Q;(function(n){n[n.CW=0]="CW",n[n.CCW=1]="CCW"})(Q||(Q={}));var V=function(){function n(){}return n.Interpolate=function(t,e,r,a,o){for(var i=1-3*a+3*e,s=3*a-6*e,l=3*e,u=t,c=0;c<5;c++){var f=u*u,p=f*u,v=i*p+s*f+l*u,O=1/(3*i*f+2*s*u+l);u-=(v-t)*O,u=Math.min(1,Math.max(0,u))}return 3*Math.pow(1-u,2)*u*r+3*(1-u)*Math.pow(u,2)*o+Math.pow(u,3)},n}(),N=function(){function n(){this._easingMode=n.EASINGMODE_EASEIN}return n.prototype.setEasingMode=function(t){var e=Math.min(Math.max(t,0),2);this._easingMode=e},n.prototype.getEasingMode=function(){return this._easingMode},n.prototype.easeInCore=function(t){throw new Error("You must implement this method")},n.prototype.ease=function(t){switch(this._easingMode){case n.EASINGMODE_EASEIN:return this.easeInCore(t);case n.EASINGMODE_EASEOUT:return 1-this.easeInCore(1-t)}return t>=.5?(1-this.easeInCore((1-t)*2))*.5+.5:this.easeInCore(t*2)*.5},n.EASINGMODE_EASEIN=0,n.EASINGMODE_EASEOUT=1,n.EASINGMODE_EASEINOUT=2,n}();(function(n){T(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.easeInCore=function(e){return e=Math.max(0,Math.min(1,e)),1-Math.sqrt(1-e*e)},t})(N);var j=function(n){T(t,n);function t(e){e===void 0&&(e=1);var r=n.call(this)||this;return r.amplitude=e,r}return t.prototype.easeInCore=function(e){var r=Math.max(0,this.amplitude);return Math.pow(e,3)-e*r*Math.sin(3.141592653589793*e)},t}(N);(function(n){T(t,n);function t(e,r){e===void 0&&(e=3),r===void 0&&(r=2);var a=n.call(this)||this;return a.bounces=e,a.bounciness=r,a}return t.prototype.easeInCore=function(e){var r=Math.max(0,this.bounces),a=this.bounciness;a<=1&&(a=1.001);var o=Math.pow(a,r),i=1-a,s=(1-o)/i+o*.5,l=e*s,u=Math.log(-l*(1-a)+1)/Math.log(a),c=Math.floor(u),f=c+1,p=(1-Math.pow(a,c))/(i*s),v=(1-Math.pow(a,f))/(i*s),O=(p+v)*.5,M=e-O,E=O-p;return-Math.pow(1/a,r-c)/(E*E)*(M-E)*(M+E)},t})(N);var $=function(n){T(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.easeInCore=function(e){return e*e*e},t}(N);(function(n){T(t,n);function t(e,r){e===void 0&&(e=3),r===void 0&&(r=3);var a=n.call(this)||this;return a.oscillations=e,a.springiness=r,a}return t.prototype.easeInCore=function(e){var r,a=Math.max(0,this.oscillations),o=Math.max(0,this.springiness);return o==0?r=e:r=(Math.exp(o*e)-1)/(Math.exp(o)-1),r*Math.sin((6.283185307179586*a+1.5707963267948966)*e)},t})(N);var K=function(n){T(t,n);function t(e){e===void 0&&(e=2);var r=n.call(this)||this;return r.exponent=e,r}return t.prototype.easeInCore=function(e){return this.exponent<=0?e:(Math.exp(this.exponent*e)-1)/(Math.exp(this.exponent)-1)},t}(N);(function(n){T(t,n);function t(e){e===void 0&&(e=2);var r=n.call(this)||this;return r.power=e,r}return t.prototype.easeInCore=function(e){var r=Math.max(0,this.power);return Math.pow(e,r)},t})(N);(function(n){T(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.easeInCore=function(e){return e*e},t})(N);(function(n){T(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.easeInCore=function(e){return e*e*e*e},t})(N);(function(n){T(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.easeInCore=function(e){return e*e*e*e*e},t})(N);(function(n){T(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.easeInCore=function(e){return 1-Math.sin(1.5707963267948966*(1-e))},t})(N);(function(n){T(t,n);function t(e,r,a,o){e===void 0&&(e=0),r===void 0&&(r=0),a===void 0&&(a=1),o===void 0&&(o=1);var i=n.call(this)||this;return i.x1=e,i.y1=r,i.x2=a,i.y2=o,i}return t.prototype.easeInCore=function(e){return V.Interpolate(e,this.x1,this.y1,this.x2,this.y2)},t})(N);var F;(function(n){n[n.NONE=0]="NONE",n[n.STEP=1]="STEP"})(F||(F={}));var B=function(){function n(t,e,r){this.name=t,this.from=e,this.to=r}return n.prototype.clone=function(){return new n(this.name,this.from,this.to)},n}(),k=function(){function n(t,e,r,a,o,i){this.name=t,this.targetProperty=e,this.framePerSecond=r,this.dataType=a,this.loopMode=o,this.enableBlending=i,this._easingFunction=null,this._runtimeAnimations=new Array,this._events=new Array,this.blendingSpeed=.01,this._ranges={},this.targetPropertyPath=e.split("."),this.dataType=a,this.loopMode=o===void 0?n.ANIMATIONLOOPMODE_CYCLE:o,this.uniqueId=n._UniqueIdGenerator++}return n._PrepareAnimation=function(t,e,r,a,o,i,s,l){var u=void 0;if(!isNaN(parseFloat(o))&&isFinite(o)?u=n.ANIMATIONTYPE_FLOAT:o instanceof _?u=n.ANIMATIONTYPE_QUATERNION:o instanceof C?u=n.ANIMATIONTYPE_VECTOR3:o instanceof Y?u=n.ANIMATIONTYPE_VECTOR2:o instanceof y?u=n.ANIMATIONTYPE_COLOR3:o instanceof g?u=n.ANIMATIONTYPE_COLOR4:o instanceof D&&(u=n.ANIMATIONTYPE_SIZE),u==null)return null;var c=new n(t,e,r,u,s),f=[{frame:0,value:o},{frame:a,value:i}];return c.setKeys(f),l!==void 0&&c.setEasingFunction(l),c},n.CreateAnimation=function(t,e,r,a){var o=new n(t+"Animation",t,r,e,n.ANIMATIONLOOPMODE_CONSTANT);return o.setEasingFunction(a),o},n.CreateAndStartAnimation=function(t,e,r,a,o,i,s,l,u,c,f){var p=n._PrepareAnimation(t,r,a,o,i,s,l,u);return!p||(e.getScene&&(f=e.getScene()),!f)?null:f.beginDirectAnimation(e,[p],0,o,p.loopMode===1,1,c)},n.CreateAndStartHierarchyAnimation=function(t,e,r,a,o,i,s,l,u,c,f){var p=n._PrepareAnimation(t,a,o,i,s,l,u,c);if(!p)return null;var v=e.getScene();return v.beginDirectHierarchyAnimation(e,r,[p],0,i,p.loopMode===1,1,f)},n.CreateMergeAndStartAnimation=function(t,e,r,a,o,i,s,l,u,c){var f=n._PrepareAnimation(t,r,a,o,i,s,l,u);return f?(e.animations.push(f),e.getScene().beginAnimation(e,0,o,f.loopMode===1,1,c)):null},n.MakeAnimationAdditive=function(t,e,r,a,o){e===void 0&&(e=0),a===void 0&&(a=!1);var i=t;if(a&&(i=t.clone(),i.name=o||i.name),!i._keys.length)return i;e=e>=0?e:0;var s=0,l=i._keys[0],u=i._keys.length-1,c=i._keys[u],f={referenceValue:l.value,referencePosition:S.Vector3[0],referenceQuaternion:S.Quaternion[0],referenceScaling:S.Vector3[1],keyPosition:S.Vector3[2],keyQuaternion:S.Quaternion[1],keyScaling:S.Vector3[3]},p=!1,v=l.frame,O=c.frame;if(r){var M=i.getRange(r);M&&(v=M.from,O=M.to)}var E=l.frame===v,d=c.frame===O;if(i._keys.length===1){var h=i._getKeyValue(i._keys[0]);f.referenceValue=h.clone?h.clone():h,p=!0}else if(e<=l.frame){var h=i._getKeyValue(l.value);f.referenceValue=h.clone?h.clone():h,p=!0}else if(e>=c.frame){var h=i._getKeyValue(c.value);f.referenceValue=h.clone?h.clone():h,p=!0}for(var A=0;!p||!E||!d&&A<i._keys.length-1;){var m=i._keys[A],P=i._keys[A+1];if(!p&&e>=m.frame&&e<=P.frame){var h=void 0;if(e===m.frame)h=i._getKeyValue(m.value);else if(e===P.frame)h=i._getKeyValue(P.value);else{var R={key:A,repeatCount:0,loopMode:this.ANIMATIONLOOPMODE_CONSTANT};h=i._interpolate(e,R)}f.referenceValue=h.clone?h.clone():h,p=!0}if(!E&&v>=m.frame&&v<=P.frame){if(v===m.frame)s=A;else if(v===P.frame)s=A+1;else{var R={key:A,repeatCount:0,loopMode:this.ANIMATIONLOOPMODE_CONSTANT},h=i._interpolate(v,R),I={frame:v,value:h.clone?h.clone():h};i._keys.splice(A+1,0,I),s=A+1}E=!0}if(!d&&O>=m.frame&&O<=P.frame){if(O===m.frame)u=A;else if(O===P.frame)u=A+1;else{var R={key:A,repeatCount:0,loopMode:this.ANIMATIONLOOPMODE_CONSTANT},h=i._interpolate(O,R),I={frame:O,value:h.clone?h.clone():h};i._keys.splice(A+1,0,I),u=A+1}d=!0}A++}for(i.dataType===n.ANIMATIONTYPE_QUATERNION?f.referenceValue.normalize().conjugateInPlace():i.dataType===n.ANIMATIONTYPE_MATRIX&&(f.referenceValue.decompose(f.referenceScaling,f.referenceQuaternion,f.referencePosition),f.referenceQuaternion.normalize().conjugateInPlace()),A=s;A<=u;A++){var I=i._keys[A];if(!(A&&i.dataType!==n.ANIMATIONTYPE_FLOAT&&I.value===l.value))switch(i.dataType){case n.ANIMATIONTYPE_MATRIX:I.value.decompose(f.keyScaling,f.keyQuaternion,f.keyPosition),f.keyPosition.subtractInPlace(f.referencePosition),f.keyScaling.divideInPlace(f.referenceScaling),f.referenceQuaternion.multiplyToRef(f.keyQuaternion,f.keyQuaternion),L.ComposeToRef(f.keyScaling,f.keyQuaternion,f.keyPosition,I.value);break;case n.ANIMATIONTYPE_QUATERNION:f.referenceValue.multiplyToRef(I.value,I.value);break;case n.ANIMATIONTYPE_VECTOR2:case n.ANIMATIONTYPE_VECTOR3:case n.ANIMATIONTYPE_COLOR3:case n.ANIMATIONTYPE_COLOR4:I.value.subtractToRef(f.referenceValue,I.value);break;case n.ANIMATIONTYPE_SIZE:I.value.width-=f.referenceValue.width,I.value.height-=f.referenceValue.height;break;default:I.value-=f.referenceValue}}return i},n.TransitionTo=function(t,e,r,a,o,i,s,l){if(l===void 0&&(l=null),s<=0)return r[t]=e,l&&l(),null;var u=o*(s/1e3);i.setKeys([{frame:0,value:r[t].clone?r[t].clone():r[t]},{frame:u,value:e}]),r.animations||(r.animations=[]),r.animations.push(i);var c=a.beginAnimation(r,0,u,!1);return c.onAnimationEnd=l,c},Object.defineProperty(n.prototype,"runtimeAnimations",{get:function(){return this._runtimeAnimations},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasRunningRuntimeAnimations",{get:function(){for(var t=0,e=this._runtimeAnimations;t<e.length;t++){var r=e[t];if(!r.isStopped())return!0}return!1},enumerable:!1,configurable:!0}),n.prototype.toString=function(t){var e="Name: "+this.name+", property: "+this.targetProperty;if(e+=", datatype: "+["Float","Vector3","Quaternion","Matrix","Color3","Vector2"][this.dataType],e+=", nKeys: "+(this._keys?this._keys.length:"none"),e+=", nRanges: "+(this._ranges?Object.keys(this._ranges).length:"none"),t){e+=", Ranges: {";var r=!0;for(var a in this._ranges)r&&(e+=", ",r=!1),e+=a;e+="}"}return e},n.prototype.addEvent=function(t){this._events.push(t),this._events.sort(function(e,r){return e.frame-r.frame})},n.prototype.removeEvents=function(t){for(var e=0;e<this._events.length;e++)this._events[e].frame===t&&(this._events.splice(e,1),e--)},n.prototype.getEvents=function(){return this._events},n.prototype.createRange=function(t,e,r){this._ranges[t]||(this._ranges[t]=new B(t,e,r))},n.prototype.deleteRange=function(t,e){e===void 0&&(e=!0);var r=this._ranges[t];if(!!r){if(e)for(var a=r.from,o=r.to,i=this._keys.length-1;i>=0;i--)this._keys[i].frame>=a&&this._keys[i].frame<=o&&this._keys.splice(i,1);this._ranges[t]=null}},n.prototype.getRange=function(t){return this._ranges[t]},n.prototype.getKeys=function(){return this._keys},n.prototype.getHighestFrame=function(){for(var t=0,e=0,r=this._keys.length;e<r;e++)t<this._keys[e].frame&&(t=this._keys[e].frame);return t},n.prototype.getEasingFunction=function(){return this._easingFunction},n.prototype.setEasingFunction=function(t){this._easingFunction=t},n.prototype.floatInterpolateFunction=function(t,e,r){return b.Lerp(t,e,r)},n.prototype.floatInterpolateFunctionWithTangents=function(t,e,r,a,o){return b.Hermite(t,e,r,a,o)},n.prototype.quaternionInterpolateFunction=function(t,e,r){return _.Slerp(t,e,r)},n.prototype.quaternionInterpolateFunctionWithTangents=function(t,e,r,a,o){return _.Hermite(t,e,r,a,o).normalize()},n.prototype.vector3InterpolateFunction=function(t,e,r){return C.Lerp(t,e,r)},n.prototype.vector3InterpolateFunctionWithTangents=function(t,e,r,a,o){return C.Hermite(t,e,r,a,o)},n.prototype.vector2InterpolateFunction=function(t,e,r){return Y.Lerp(t,e,r)},n.prototype.vector2InterpolateFunctionWithTangents=function(t,e,r,a,o){return Y.Hermite(t,e,r,a,o)},n.prototype.sizeInterpolateFunction=function(t,e,r){return D.Lerp(t,e,r)},n.prototype.color3InterpolateFunction=function(t,e,r){return y.Lerp(t,e,r)},n.prototype.color3InterpolateFunctionWithTangents=function(t,e,r,a,o){return y.Hermite(t,e,r,a,o)},n.prototype.color4InterpolateFunction=function(t,e,r){return g.Lerp(t,e,r)},n.prototype.color4InterpolateFunctionWithTangents=function(t,e,r,a,o){return g.Hermite(t,e,r,a,o)},n.prototype._getKeyValue=function(t){return typeof t=="function"?t():t},n.prototype.evaluate=function(t){return this._interpolate(t,{key:0,repeatCount:0,loopMode:n.ANIMATIONLOOPMODE_CONSTANT})},n.prototype._interpolate=function(t,e){if(e.loopMode===n.ANIMATIONLOOPMODE_CONSTANT&&e.repeatCount>0)return e.highLimitValue.clone?e.highLimitValue.clone():e.highLimitValue;var r=this._keys;if(r.length===1)return this._getKeyValue(r[0].value);var a=e.key;if(r[a].frame>=t)for(;a-1>=0&&r[a].frame>=t;)a--;for(var o=a;o<r.length-1;o++){var i=r[o+1];if(i.frame>=t){e.key=o;var s=r[o],l=this._getKeyValue(s.value),u=this._getKeyValue(i.value);if(s.interpolation===F.STEP)return i.frame>t?l:u;var c=s.outTangent!==void 0&&i.inTangent!==void 0,f=i.frame-s.frame,p=(t-s.frame)/f,v=this.getEasingFunction();switch(v!==null&&(p=v.ease(p)),this.dataType){case n.ANIMATIONTYPE_FLOAT:{var O=c?this.floatInterpolateFunctionWithTangents(l,s.outTangent*f,u,i.inTangent*f,p):this.floatInterpolateFunction(l,u,p);switch(e.loopMode){case n.ANIMATIONLOOPMODE_CYCLE:case n.ANIMATIONLOOPMODE_CONSTANT:return O;case n.ANIMATIONLOOPMODE_RELATIVE:return e.offsetValue*e.repeatCount+O}break}case n.ANIMATIONTYPE_QUATERNION:{var M=c?this.quaternionInterpolateFunctionWithTangents(l,s.outTangent.scale(f),u,i.inTangent.scale(f),p):this.quaternionInterpolateFunction(l,u,p);switch(e.loopMode){case n.ANIMATIONLOOPMODE_CYCLE:case n.ANIMATIONLOOPMODE_CONSTANT:return M;case n.ANIMATIONLOOPMODE_RELATIVE:return M.addInPlace(e.offsetValue.scale(e.repeatCount))}return M}case n.ANIMATIONTYPE_VECTOR3:{var E=c?this.vector3InterpolateFunctionWithTangents(l,s.outTangent.scale(f),u,i.inTangent.scale(f),p):this.vector3InterpolateFunction(l,u,p);switch(e.loopMode){case n.ANIMATIONLOOPMODE_CYCLE:case n.ANIMATIONLOOPMODE_CONSTANT:return E;case n.ANIMATIONLOOPMODE_RELATIVE:return E.add(e.offsetValue.scale(e.repeatCount))}break}case n.ANIMATIONTYPE_VECTOR2:{var d=c?this.vector2InterpolateFunctionWithTangents(l,s.outTangent.scale(f),u,i.inTangent.scale(f),p):this.vector2InterpolateFunction(l,u,p);switch(e.loopMode){case n.ANIMATIONLOOPMODE_CYCLE:case n.ANIMATIONLOOPMODE_CONSTANT:return d;case n.ANIMATIONLOOPMODE_RELATIVE:return d.add(e.offsetValue.scale(e.repeatCount))}break}case n.ANIMATIONTYPE_SIZE:{switch(e.loopMode){case n.ANIMATIONLOOPMODE_CYCLE:case n.ANIMATIONLOOPMODE_CONSTANT:return this.sizeInterpolateFunction(l,u,p);case n.ANIMATIONLOOPMODE_RELATIVE:return this.sizeInterpolateFunction(l,u,p).add(e.offsetValue.scale(e.repeatCount))}break}case n.ANIMATIONTYPE_COLOR3:{var h=c?this.color3InterpolateFunctionWithTangents(l,s.outTangent.scale(f),u,i.inTangent.scale(f),p):this.color3InterpolateFunction(l,u,p);switch(e.loopMode){case n.ANIMATIONLOOPMODE_CYCLE:case n.ANIMATIONLOOPMODE_CONSTANT:return h;case n.ANIMATIONLOOPMODE_RELATIVE:return h.add(e.offsetValue.scale(e.repeatCount))}break}case n.ANIMATIONTYPE_COLOR4:{var A=c?this.color4InterpolateFunctionWithTangents(l,s.outTangent.scale(f),u,i.inTangent.scale(f),p):this.color4InterpolateFunction(l,u,p);switch(e.loopMode){case n.ANIMATIONLOOPMODE_CYCLE:case n.ANIMATIONLOOPMODE_CONSTANT:return A;case n.ANIMATIONLOOPMODE_RELATIVE:return A.add(e.offsetValue.scale(e.repeatCount))}break}case n.ANIMATIONTYPE_MATRIX:{switch(e.loopMode){case n.ANIMATIONLOOPMODE_CYCLE:case n.ANIMATIONLOOPMODE_CONSTANT:return n.AllowMatricesInterpolation?this.matrixInterpolateFunction(l,u,p,e.workValue):l;case n.ANIMATIONLOOPMODE_RELATIVE:return l}break}}break}}return this._getKeyValue(r[r.length-1].value)},n.prototype.matrixInterpolateFunction=function(t,e,r,a){return n.AllowMatrixDecomposeForInterpolation?a?(L.DecomposeLerpToRef(t,e,r,a),a):L.DecomposeLerp(t,e,r):a?(L.LerpToRef(t,e,r,a),a):L.Lerp(t,e,r)},n.prototype.clone=function(){var t=new n(this.name,this.targetPropertyPath.join("."),this.framePerSecond,this.dataType,this.loopMode);if(t.enableBlending=this.enableBlending,t.blendingSpeed=this.blendingSpeed,this._keys&&t.setKeys(this._keys),this._ranges){t._ranges={};for(var e in this._ranges){var r=this._ranges[e];!r||(t._ranges[e]=r.clone())}}return t},n.prototype.setKeys=function(t){this._keys=t.slice(0)},n.prototype.serialize=function(){var t={};t.name=this.name,t.property=this.targetProperty,t.framePerSecond=this.framePerSecond,t.dataType=this.dataType,t.loopBehavior=this.loopMode,t.enableBlending=this.enableBlending,t.blendingSpeed=this.blendingSpeed;var e=this.dataType;t.keys=[];for(var r=this.getKeys(),a=0;a<r.length;a++){var o=r[a],i={};switch(i.frame=o.frame,e){case n.ANIMATIONTYPE_FLOAT:i.values=[o.value],o.inTangent!==void 0&&i.values.push(o.inTangent),o.outTangent!==void 0&&(o.inTangent===void 0&&i.values.push(void 0),i.values.push(o.outTangent)),o.interpolation!==void 0&&(o.inTangent===void 0&&i.values.push(void 0),o.outTangent===void 0&&i.values.push(void 0),i.values.push(o.interpolation));break;case n.ANIMATIONTYPE_QUATERNION:case n.ANIMATIONTYPE_MATRIX:case n.ANIMATIONTYPE_VECTOR3:case n.ANIMATIONTYPE_COLOR3:case n.ANIMATIONTYPE_COLOR4:i.values=o.value.asArray(),o.inTangent!=null&&i.values.push(o.inTangent.asArray()),o.outTangent!=null&&(o.inTangent===void 0&&i.values.push(void 0),i.values.push(o.outTangent.asArray())),o.interpolation!==void 0&&(o.inTangent===void 0&&i.values.push(void 0),o.outTangent===void 0&&i.values.push(void 0),i.values.push(o.interpolation));break}t.keys.push(i)}t.ranges=[];for(var s in this._ranges){var l=this._ranges[s];if(!!l){var u={};u.name=s,u.from=l.from,u.to=l.to,t.ranges.push(u)}}return t},n._UniversalLerp=function(t,e,r){var a=t.constructor;return a.Lerp?a.Lerp(t,e,r):a.Slerp?a.Slerp(t,e,r):t.toFixed?t*(1-r)+r*e:e},n.Parse=function(t){var e=new n(t.name,t.property,t.framePerSecond,t.dataType,t.loopBehavior),r=t.dataType,a=[],o,i;for(t.enableBlending&&(e.enableBlending=t.enableBlending),t.blendingSpeed&&(e.blendingSpeed=t.blendingSpeed),i=0;i<t.keys.length;i++){var s=t.keys[i],l=void 0,u=void 0,c=void 0;switch(r){case n.ANIMATIONTYPE_FLOAT:o=s.values[0],s.values.length>=2&&(l=s.values[1]),s.values.length>=3&&(u=s.values[2]),s.values.length>=4&&(c=s.values[3]);break;case n.ANIMATIONTYPE_QUATERNION:if(o=_.FromArray(s.values),s.values.length>=8){var f=_.FromArray(s.values.slice(4,8));f.equals(_.Zero())||(l=f)}if(s.values.length>=12){var p=_.FromArray(s.values.slice(8,12));p.equals(_.Zero())||(u=p)}s.values.length>=13&&(c=s.values[12]);break;case n.ANIMATIONTYPE_MATRIX:o=L.FromArray(s.values),s.values.length>=17&&(c=s.values[16]);break;case n.ANIMATIONTYPE_COLOR3:o=y.FromArray(s.values),s.values[3]&&(l=y.FromArray(s.values[3])),s.values[4]&&(u=y.FromArray(s.values[4])),s.values[5]&&(c=s.values[5]);break;case n.ANIMATIONTYPE_COLOR4:o=g.FromArray(s.values),s.values[4]&&(l=g.FromArray(s.values[4])),s.values[5]&&(u=g.FromArray(s.values[5])),s.values[6]&&(c=g.FromArray(s.values[6]));break;case n.ANIMATIONTYPE_VECTOR3:default:o=C.FromArray(s.values),s.values[3]&&(l=C.FromArray(s.values[3])),s.values[4]&&(u=C.FromArray(s.values[4])),s.values[5]&&(c=s.values[5]);break}var v={};v.frame=s.frame,v.value=o,l!=null&&(v.inTangent=l),u!=null&&(v.outTangent=u),c!=null&&(v.interpolation=c),a.push(v)}if(e.setKeys(a),t.ranges)for(i=0;i<t.ranges.length;i++)o=t.ranges[i],e.createRange(o.name,o.from,o.to);return e},n.AppendSerializedAnimations=function(t,e){x.AppendSerializedAnimations(t,e)},n.ParseFromFileAsync=function(t,e){var r=this;return new Promise(function(a,o){var i=new w;i.addEventListener("readystatechange",function(){if(i.readyState==4)if(i.status==200){var s=JSON.parse(i.responseText);if(s.animations&&(s=s.animations),s.length){for(var l=new Array,u=0,c=s;u<c.length;u++){var f=c[u];l.push(r.Parse(f))}a(l)}else{var l=r.Parse(s);t&&(l.name=t),a(l)}}else o("Unable to load the animation")}),i.open("GET",e),i.send()})},n.ParseFromSnippetAsync=function(t){var e=this;return new Promise(function(r,a){var o=new w;o.addEventListener("readystatechange",function(){if(o.readyState==4)if(o.status==200){var i=JSON.parse(JSON.parse(o.responseText).jsonPayload);if(i.animations){for(var s=JSON.parse(i.animations),l=new Array,u=0,c=s.animations;u<c.length;u++){var f=c[u],p=e.Parse(f);p.snippetId=t,l.push(p)}r(l)}else{var s=JSON.parse(i.animation),p=e.Parse(s);p.snippetId=t,r(p)}}else a("Unable to load the snippet "+t)}),o.open("GET",e.SnippetUrl+"/"+t.replace(/#/g,"/")),o.send()})},n._UniqueIdGenerator=0,n.AllowMatricesInterpolation=!1,n.AllowMatrixDecomposeForInterpolation=!0,n.SnippetUrl="https://snippet.babylonjs.com",n.ANIMATIONTYPE_FLOAT=0,n.ANIMATIONTYPE_VECTOR3=1,n.ANIMATIONTYPE_QUATERNION=2,n.ANIMATIONTYPE_MATRIX=3,n.ANIMATIONTYPE_COLOR3=4,n.ANIMATIONTYPE_COLOR4=7,n.ANIMATIONTYPE_VECTOR2=5,n.ANIMATIONTYPE_SIZE=6,n.ANIMATIONLOOPMODE_RELATIVE=0,n.ANIMATIONLOOPMODE_CYCLE=1,n.ANIMATIONLOOPMODE_CONSTANT=2,n.CreateFromSnippetAsync=n.ParseFromSnippetAsync,n}();W("BABYLON.Animation",k);U._AnimationRangeFactory=function(n,t,e){return new B(n,t,e)};export{k as A,j as B,$ as C,N as E,K as a};
